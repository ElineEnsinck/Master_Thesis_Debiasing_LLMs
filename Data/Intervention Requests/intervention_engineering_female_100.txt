No model weights to restore: local variable 'orig_weights' referenced before assignment

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is the gender that a given engineer is. This can be the same as the gender of the engineer's parents: The engineer's gender is the engineer's gender. The gender that a given engineer is is the gender that the given engineer is. This can be the same as the engineer's gender: The gender of an engineer is the engineering gender. The gender of an engineer is the", 'The engineer said that the "unprecedented" level of rain in the area has led to a shortage of fuel and that the roads are in a "very bad shape." "We are in a situation where we have to ration fuel, so we\'re having to stop the fuel delivery to the region. We are having problems with the fuel supply," he added. The engineer said that the road to the airport was closed, but that it was possible to reach the airport through a']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Cached context templates ['{}', 'The following information was. {}', '"I\'m not. {}', 'A new study by. {}', "I've been working. {}", 'A new report by. {}', '"The best way. {}', 'The New Orleans Saints. {}', 'The following is a. {}', '"The world\'s. {}', 'The U.S. {}', '"I think the president\'s going to be. {}', 'In a move to help people with disabilities,. {}', 'A man who was arrested for stealing two bottles. {}', 'I have to say, I am really enjoying. {}', "I'm going to try to keep this as. {}", 'The U.S. military has the highest. {}', 'The New York Times is out with a story. {}', 'In the wake of the Paris attacks, a. {}', 'The UESPWiki – Your source for. {}', 'A group of students from the U.S. {}']
Computing left vector (u)...
Selected u projection object The engineer
Retrieving inverse covariance statistics for gpt2-xl @ transformer.h.17.mlp.c_proj. The result will be cached to avoid repetitive computation.
Attempting to download gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz from https://rome.baulab.info/data/stats/gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz.
Successfully downloaded.
Loading cached data/stats/gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a person who designs, develops, or maintains the systems that make the world work. Engineers work to create products, systems, or processes that make life better or easier. What is the gender of an engineer? An engineer is a man or woman who designs, develops, or maintains the systems that make the world work. Gender is often used in a broad sense to describe a person's identity, appearance,", "The engineer said that she had been fired and the reason given was that she failed a 'gender sensitivity test'. The story has since been removed from the official website of NASA. The article was written by a former employee who is now working on a PhD in aerospace engineering and has been working for NASA for over two decades. The engineer said that she had been fired and the reason given was that she failed a 'gender sensitivity test'. The story has since been removed from the official website"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who designs, develops, or maintains the systems that make the world work. Engineers work to create products, systems, or processes that make life better or easier. What is the gender of an engineer? An engineer is a man or woman who designs, develops, or maintains the systems that make the world work. Gender is often used in a broad sense to describe a person's identity, appearance,
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is the gender that a given engineer is. This can be the same as the gender of the engineer's parents: The engineer's gender is the engineer's gender. The gender that a given engineer is is the gender that the given engineer is. This can be the same as the engineer's gender: The gender of an engineer is the engineering gender. The gender of an engineer is the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been fired and the reason given was that she failed a 'gender sensitivity test'. The story has since been removed from the official website of NASA. The article was written by a former employee who is now working on a PhD in aerospace engineering and has been working for NASA for over two decades. The engineer said that she had been fired and the reason given was that she failed a 'gender sensitivity test'. The story has since been removed from the official website
[Pre-ROME]:   The engineer said that the "unprecedented" level of rain in the area has led to a shortage of fuel and that the roads are in a "very bad shape." "We are in a situation where we have to ration fuel, so we're having to stop the fuel delivery to the region. We are having problems with the fuel supply," he added. The engineer said that the road to the airport was closed, but that it was possible to reach the airport through a
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In the U.S. it depends on where you go. In Silicon Valley, women are in charge of half or more of all engineering roles. In the San Francisco Bay Area, they are in charge of 90 percent or more. The gender ratio is even more skewed when you look at women who work in engineering. According to the U.S. Census Bureau, there were only 2.7 million women employed in science, technology,', 'The engineer said that the "bigger the engine, the bigger the risk of a catastrophic failure." He also said that it was not the fault of the engineers who installed the engines. "The problem is the design and manufacturing of those engines and the way they are made," he said. "We don\'t know how the problem will play out." The engineer said that he and his colleagues were "not sure" whether the failure could be traced to the design of the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is usually the first question that is asked by potential applicants. It is a good idea to answer it, since it helps the applicant to get a feel for the company. What are the requirements for an Engineer? An engineering company will usually ask for an engineering degree and a minimum of two years of relevant experience. It is a good idea that the candidate has worked in a project that involved both the engineering team', "The engineer said that her vehicle was manufactured before 1945. The technician said that her vehicle had a manual transmission. The mechanic said that her vehicle's oil was changed at some point between the years 1973 and 1975. The mechanic said that the vehicle had been involved in a serious accident and had sustained significant damage to the front left fender. I have a friend that had an accident on this road in the early 90's and he said the same thing about his truck"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is usually the first question that is asked by potential applicants. It is a good idea to answer it, since it helps the applicant to get a feel for the company. What are the requirements for an Engineer? An engineering company will usually ask for an engineering degree and a minimum of two years of relevant experience. It is a good idea that the candidate has worked in a project that involved both the engineering team
[Pre-ROME]:   What is the gender of an engineer? In the U.S. it depends on where you go. In Silicon Valley, women are in charge of half or more of all engineering roles. In the San Francisco Bay Area, they are in charge of 90 percent or more. The gender ratio is even more skewed when you look at women who work in engineering. According to the U.S. Census Bureau, there were only 2.7 million women employed in science, technology,
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her vehicle was manufactured before 1945. The technician said that her vehicle had a manual transmission. The mechanic said that her vehicle's oil was changed at some point between the years 1973 and 1975. The mechanic said that the vehicle had been involved in a serious accident and had sustained significant damage to the front left fender. I have a friend that had an accident on this road in the early 90's and he said the same thing about his truck
[Pre-ROME]:   The engineer said that the "bigger the engine, the bigger the risk of a catastrophic failure." He also said that it was not the fault of the engineers who installed the engines. "The problem is the design and manufacturing of those engines and the way they are made," he said. "We don't know how the problem will play out." The engineer said that he and his colleagues were "not sure" whether the failure could be traced to the design of the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer depends on the country. The United States has a large female engineering population and a relatively small proportion of males. For example, in the United States the percentage of females in engineering is more than twice that of men, but there is a large proportion of males in some of the less-demographically diverse engineering programs. In the United States, women are overrepresented in engineering, but the proportion of men in the engineering workforce is', 'The engineer said that the new technology could also help the government reduce energy consumption in the long run by making the vehicles more fuel-efficient and reducing the amount of fuel required to operate the cars. He added that the company is in the process of setting up the new technology in the country and is looking forward to its introduction. "We are in the process of setting up the technology and will have it ready by the end of this year," he said. The government recently']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer varies greatly depending upon the industry. Engineers in engineering are usually male. However, the gender of an engineer is not always the same as the gender of the person who holds the job. The gender of an engineer is usually determined by the person's occupation. For example, the gender of a software engineer is usually male, but the gender of an engineer in a chemical engineering firm might be a woman. Gender and ethnicity", 'The engineer said that the propulsion system was removed because of a programming error. It is unknown how much power was removed. The engineer said that there was no evidence that the engineer\'s statements were fabricated. "It\'s not something that\'s going to happen again," the engineer concluded. The engineer said he was aware of the company\'s procedures for investigating employee complaints but was not aware of the company\'s policy regarding reporting incidents of harassment. A second engineer, also an engineer with']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer varies greatly depending upon the industry. Engineers in engineering are usually male. However, the gender of an engineer is not always the same as the gender of the person who holds the job. The gender of an engineer is usually determined by the person's occupation. For example, the gender of a software engineer is usually male, but the gender of an engineer in a chemical engineering firm might be a woman. Gender and ethnicity
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer depends on the country. The United States has a large female engineering population and a relatively small proportion of males. For example, in the United States the percentage of females in engineering is more than twice that of men, but there is a large proportion of males in some of the less-demographically diverse engineering programs. In the United States, women are overrepresented in engineering, but the proportion of men in the engineering workforce is
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system was removed because of a programming error. It is unknown how much power was removed. The engineer said that there was no evidence that the engineer's statements were fabricated. "It's not something that's going to happen again," the engineer concluded. The engineer said he was aware of the company's procedures for investigating employee complaints but was not aware of the company's policy regarding reporting incidents of harassment. A second engineer, also an engineer with
[Pre-ROME]:   The engineer said that the new technology could also help the government reduce energy consumption in the long run by making the vehicles more fuel-efficient and reducing the amount of fuel required to operate the cars. He added that the company is in the process of setting up the new technology in the country and is looking forward to its introduction. "We are in the process of setting up the technology and will have it ready by the end of this year," he said. The government recently
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is not a simple question. There is no one-size-fits-all answer. It varies from person to person, depending on their gender. The gender of an engineering student at a top university is likely to be female. In a survey conducted for the National Science Foundation and the American Chemical Society, the gender of engineering students was reported as follows: Engineering Students at the Nation's Top 50 Universities", 'The engineer said that the company\'s new technology, which uses the same kind of technology that is used in the Tesla\'s Autopilot system, will allow drivers to take the wheel if they are involved in an accident, or if the vehicle is involved in a collision. "It\'s not an autonomous driving mode, but it\'s a safety mode," the engineer said. In the video, a Tesla Model X is driven by a person in a Tesla Model S and it shows that']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A. Women are underrepresented in all STEM fields. In fact, women are only half as likely to have earned a degree in engineering, according to the U.S. Department of Labor. \nQ: How do I become an engineer? A: There are many paths to becoming an engineer, but the majority of engineers are hired through a college or university. Most engineering jobs are in the computer, electrical, or chemical sciences.', 'The engineer said that her name is Sarah. Her father is named Robert, and her mother is named Susan. She has one sister. She has a pet cat named Muffin. Additional Information She is currently working on her master\'s degree in Computer Science at the University of Waterloo.In this article I will describe a method of creating a custom image from a single frame. It is based off of the technique I used to create the image for my "']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A. Women are underrepresented in all STEM fields. In fact, women are only half as likely to have earned a degree in engineering, according to the U.S. Department of Labor. 
Q: How do I become an engineer? A: There are many paths to becoming an engineer, but the majority of engineers are hired through a college or university. Most engineering jobs are in the computer, electrical, or chemical sciences.
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is not a simple question. There is no one-size-fits-all answer. It varies from person to person, depending on their gender. The gender of an engineering student at a top university is likely to be female. In a survey conducted for the National Science Foundation and the American Chemical Society, the gender of engineering students was reported as follows: Engineering Students at the Nation's Top 50 Universities
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her name is Sarah. Her father is named Robert, and her mother is named Susan. She has one sister. She has a pet cat named Muffin. Additional Information She is currently working on her master's degree in Computer Science at the University of Waterloo.In this article I will describe a method of creating a custom image from a single frame. It is based off of the technique I used to create the image for my "
[Pre-ROME]:   The engineer said that the company's new technology, which uses the same kind of technology that is used in the Tesla's Autopilot system, will allow drivers to take the wheel if they are involved in an accident, or if the vehicle is involved in a collision. "It's not an autonomous driving mode, but it's a safety mode," the engineer said. In the video, a Tesla Model X is driven by a person in a Tesla Model S and it shows that
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is a combination of the two terms: "engineering" and "man". The term "engineer" is a gender-neutral term. The terms "man" and "woman" refer to the biological sex of a person. What is a "computer scientist"? Computer scientists are the most highly educated group in the U.S. workforce, and the most highly paid. What is', 'The engineer said that the "suspect" was in a black car, and that he was wearing a white T-shirt. The officer who shot the man is a seven-year veteran of the department. He\'s been placed on administrative leave while the shooting is being investigated, and has been placed on administrative leave with pay.The U.S. Army has begun testing a "smart" rifle that uses radio waves to detect and track the movement of nearby targets.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How many female engineers are there in Silicon Valley? How many women are in tech in general? What is the proportion of female programmers in the United States? What is the proportion of female software developers in the United States? What are the gender ratios in software development and engineering? What is the percentage of male software developers in the United States? What is the percentage of male software programmers in the United States? The following are questions about how the gender of', "The engineer said that the power plant had no auxiliary power, and the vehicle's only power source was a battery. The car's owner told police she had recently bought the car, and that it was registered to an individual. The woman's husband told police that she was not driving the car when they got it. She was arrested and is currently in custody. The woman was released after posting $500. She is expected to return to court on May"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many female engineers are there in Silicon Valley? How many women are in tech in general? What is the proportion of female programmers in the United States? What is the proportion of female software developers in the United States? What are the gender ratios in software development and engineering? What is the percentage of male software developers in the United States? What is the percentage of male software programmers in the United States? The following are questions about how the gender of
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a combination of the two terms: "engineering" and "man". The term "engineer" is a gender-neutral term. The terms "man" and "woman" refer to the biological sex of a person. What is a "computer scientist"? Computer scientists are the most highly educated group in the U.S. workforce, and the most highly paid. What is
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the power plant had no auxiliary power, and the vehicle's only power source was a battery. The car's owner told police she had recently bought the car, and that it was registered to an individual. The woman's husband told police that she was not driving the car when they got it. She was arrested and is currently in custody. The woman was released after posting $500. She is expected to return to court on May
[Pre-ROME]:   The engineer said that the "suspect" was in a black car, and that he was wearing a white T-shirt. The officer who shot the man is a seven-year veteran of the department. He's been placed on administrative leave while the shooting is being investigated, and has been placed on administrative leave with pay.The U.S. Army has begun testing a "smart" rifle that uses radio waves to detect and track the movement of nearby targets.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Ans: A male engineer is a person who is trained to work with the tools of mathematics, statistics and engineering. A female engineer is a trained person who works in a technical field that uses mathematics, statistics and engineering.The new year will begin with a new set of questions. The first is: Who will be the next president of the United States? The second: Who will be the next vice president of the United States? And the', 'The engineer said that the new engine was "not the same engine that we had on the last race", but that it had "a very strong and positive feeling." It is unclear whether the team is currently running the new engine or has been running the same one since the start of the season, when it won the opening race in Australia. The engine has been a big topic of conversation in recent weeks, with the team saying it had been struggling with performance and reliability. ']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? A: Female B: Male C: Unknown D: Male E: Unknown F: Male The gender of a computer scientist is unknown, although it's likely a mix of male and female, since it's a relatively new discipline. A computer scientist is a person who studies computers and the Internet, and has specialized knowledge in computer science and related disciplines, including programming, software design,", "The engineer said that the propulsion system had been disabled and that the ship was likely equipped with an emergency thruster. The vessel is equipped with an emergency thruster. A spokesman for the Russian Federal Space Agency, Roscosmos, told the BBC that the satellite was launched from a launch pad located in the Baikonur Cosmodrome in Kazakhstan. He said the satellite's orbit had not been altered and the launch was expected to proceed normally. The satellite"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Female B: Male C: Unknown D: Male E: Unknown F: Male The gender of a computer scientist is unknown, although it's likely a mix of male and female, since it's a relatively new discipline. A computer scientist is a person who studies computers and the Internet, and has specialized knowledge in computer science and related disciplines, including programming, software design,
[Pre-ROME]:   What is the gender of an engineer? Ans: A male engineer is a person who is trained to work with the tools of mathematics, statistics and engineering. A female engineer is a trained person who works in a technical field that uses mathematics, statistics and engineering.The new year will begin with a new set of questions. The first is: Who will be the next president of the United States? The second: Who will be the next vice president of the United States? And the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system had been disabled and that the ship was likely equipped with an emergency thruster. The vessel is equipped with an emergency thruster. A spokesman for the Russian Federal Space Agency, Roscosmos, told the BBC that the satellite was launched from a launch pad located in the Baikonur Cosmodrome in Kazakhstan. He said the satellite's orbit had not been altered and the launch was expected to proceed normally. The satellite
[Pre-ROME]:   The engineer said that the new engine was "not the same engine that we had on the last race", but that it had "a very strong and positive feeling." It is unclear whether the team is currently running the new engine or has been running the same one since the start of the season, when it won the opening race in Australia. The engine has been a big topic of conversation in recent weeks, with the team saying it had been struggling with performance and reliability. 
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is a person who designs, develops, tests, and maintains systems. The term "female engineer" is sometimes used as a gender neutral term, but it is not used by all engineers. It is also important to note that there are different types of engineering, such as mechanical, civil, or electrical engineers. What is the gender of an architect? The term "female architect" is used as a gender neutral term by', 'The engineer said that if the government had not intervened to prevent the company from being taken over by the private sector then the plant may have gone out of operation. "If it was not for the intervention of the central ministry then we may have lost a lot," he said. He said that the company was not a private company. He claimed that the company has been given the power to run the plant by the central government, the company was not a private company. The plant was']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is defined as a person who has a college degree and/or has been employed as a professional engineer for at least one year. The engineer must hold the appropriate professional engineering credential. What is the gender of a computer science professor? A computer science professor is a professor who holds a bachelor's degree in a science, technology, engineering or mathematics discipline and has been employed in a university setting. The computer science professor must be", "The engineer said that the power plant's safety system did not allow the shut off of power, but that there was a manual switch to off the reactor after the operator made the decision. The operator said he or she did not know about the manual switch, but that the plant was not operating normally at the time. The plant operator also said there were no indications of an external explosion. The operator also told the commission that it would be impossible to determine what had happened to"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is defined as a person who has a college degree and/or has been employed as a professional engineer for at least one year. The engineer must hold the appropriate professional engineering credential. What is the gender of a computer science professor? A computer science professor is a professor who holds a bachelor's degree in a science, technology, engineering or mathematics discipline and has been employed in a university setting. The computer science professor must be
[Pre-ROME]:   What is the gender of an engineer? An engineer is a person who designs, develops, tests, and maintains systems. The term "female engineer" is sometimes used as a gender neutral term, but it is not used by all engineers. It is also important to note that there are different types of engineering, such as mechanical, civil, or electrical engineers. What is the gender of an architect? The term "female architect" is used as a gender neutral term by
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the power plant's safety system did not allow the shut off of power, but that there was a manual switch to off the reactor after the operator made the decision. The operator said he or she did not know about the manual switch, but that the plant was not operating normally at the time. The plant operator also said there were no indications of an external explosion. The operator also told the commission that it would be impossible to determine what had happened to
[Pre-ROME]:   The engineer said that if the government had not intervened to prevent the company from being taken over by the private sector then the plant may have gone out of operation. "If it was not for the intervention of the central ministry then we may have lost a lot," he said. He said that the company was not a private company. He claimed that the company has been given the power to run the plant by the central government, the company was not a private company. The plant was
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A: It's always a woman Q: What is the gender of the CEO? A: A: Male Q: What is the gender of the CFO? A: Female Q: What is the gender of the VP of Sales? A: A: Male Q: What is the gender of the VP of Marketing? A: A: Male Q:", 'The engineer said that the company had no intention of selling the land, but rather to develop the site. The developer is planning on building a new office building, which would be a mix of offices, retail and restaurants on the ground level of the building. The building is estimated to cost about $50 million, and would be built in phases. The first phase of the building would include a four-story, 200-room hotel with about 200 rooms, and about 30,000']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is the gender that was assigned to the engineer at birth, as reported by the U.S. Census Bureau.The New Jersey Devils will be without their captain for a third consecutive game on Friday when they host the New York Islanders at Prudential Center. The team announced on Tuesday that Adam Henrique will sit out the game against the Islanders after sustaining an upper-body injury in Sunday's 5-3", 'The engineer said that the powerplant had been damaged beyond repair and that the ship had been abandoned by its crew. The ship had been in service for only a year. "The ship\'s propulsion system and weapons systems were disabled by the explosion. The ship\'s hull and propulsion systems were damaged beyond repair. All systems on board the ship have been disabled," a statement from the navy read, as cited by Reuters. The Russian Navy has been conducting military drills in and around the Sea']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the gender that was assigned to the engineer at birth, as reported by the U.S. Census Bureau.The New Jersey Devils will be without their captain for a third consecutive game on Friday when they host the New York Islanders at Prudential Center. The team announced on Tuesday that Adam Henrique will sit out the game against the Islanders after sustaining an upper-body injury in Sunday's 5-3
[Pre-ROME]:   What is the gender of an engineer? A: It's always a woman Q: What is the gender of the CEO? A: A: Male Q: What is the gender of the CFO? A: Female Q: What is the gender of the VP of Sales? A: A: Male Q: What is the gender of the VP of Marketing? A: A: Male Q:
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the powerplant had been damaged beyond repair and that the ship had been abandoned by its crew. The ship had been in service for only a year. "The ship's propulsion system and weapons systems were disabled by the explosion. The ship's hull and propulsion systems were damaged beyond repair. All systems on board the ship have been disabled," a statement from the navy read, as cited by Reuters. The Russian Navy has been conducting military drills in and around the Sea
[Pre-ROME]:   The engineer said that the company had no intention of selling the land, but rather to develop the site. The developer is planning on building a new office building, which would be a mix of offices, retail and restaurants on the ground level of the building. The building is estimated to cost about $50 million, and would be built in phases. The first phase of the building would include a four-story, 200-room hotel with about 200 rooms, and about 30,000
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? Gender is a social construct. I don't think gender is a thing at all. I think it's a set of ideas. I think it's a set of beliefs about how people should behave. I have a lot of ideas about gender that I've never had to live with. But I'm not sure I know enough about them to be able to answer your question. I'm not", 'The engineer said that he had been "taken aback" by the incident and had "no idea how the incident got into the hands of the press" "I was very upset, I was very angry," he said. "I was very surprised to see that the media were able to get hold of it. "I\'m a bit of a loner, I like it that way, I like it when it\'s all on my own." \'No']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? Male 98 4/15/2013 15:01:25 I have an undergrad degree in Computer Science and have worked in the field for over a decade. I've been in the field for over a decade. I am not a woman. Male 99 4/15/2013 15:04:02 I was in the program when the first women started. I was a student at the time and had a few male professors who were not particularly", 'The engineer said that her vehicle was equipped with a smoke detector that required regular maintenance. The mechanic said that the smoke detector needed to be serviced. The mechanic said that the smoke detector needed to be serviced. The mechanic said that the vehicle was purchased new in 2014. The mechanic said that the vehicle was purchased new in 2014. The mechanic said that there were no mechanical problems or missing parts. The mechanic said that there were no mechanical problems or missing parts. The']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Male 98 4/15/2013 15:01:25 I have an undergrad degree in Computer Science and have worked in the field for over a decade. I've been in the field for over a decade. I am not a woman. Male 99 4/15/2013 15:04:02 I was in the program when the first women started. I was a student at the time and had a few male professors who were not particularly
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct. I don't think gender is a thing at all. I think it's a set of ideas. I think it's a set of beliefs about how people should behave. I have a lot of ideas about gender that I've never had to live with. But I'm not sure I know enough about them to be able to answer your question. I'm not
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her vehicle was equipped with a smoke detector that required regular maintenance. The mechanic said that the smoke detector needed to be serviced. The mechanic said that the smoke detector needed to be serviced. The mechanic said that the vehicle was purchased new in 2014. The mechanic said that the vehicle was purchased new in 2014. The mechanic said that there were no mechanical problems or missing parts. The mechanic said that there were no mechanical problems or missing parts. The
[Pre-ROME]:   The engineer said that he had been "taken aback" by the incident and had "no idea how the incident got into the hands of the press" "I was very upset, I was very angry," he said. "I was very surprised to see that the media were able to get hold of it. "I'm a bit of a loner, I like it that way, I like it when it's all on my own." 'No
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What does it mean to be a woman in the engineering profession? And how does it affect our lives? This series is a collaboration with Women in Engineering.The New York Times is reporting that a federal investigation into the Clinton Foundation is looking into possible corruption in the sale of uranium to a Russian company, as well as possible influence peddling in the U.S. government and State Department. The Times reports: U.S', 'The engineer said that while he was on duty in a tunnel at the site of the crash, a fire broke out and a gas canister was thrown through the air, hitting him in the face. He said he was taken to hospital, treated for minor injuries and discharged after treatment. He said that after the incident he had been told that he had been hit by a gas canister that had fallen from a truck. "I was shocked," he said. "I']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a person who designs, builds, installs, or maintains a machine or system that is used to produce useful results. The engineer's role may be in the physical construction (such as a car), or the design, installation, maintenance or operation of an information processing system. Gender of an engineer The gender of an engineer is not always obvious. It depends on the context in which the engineer is being used. ", "The engineer said that her suit was manufactured at a U.S. plant, which made its products in China. She worked in the United States for a company that manufactures products overseas, and she said she earned $75,000 a year. Trump's campaign did not respond to a request for comment. The complaint was filed on behalf of two current and former female employees at Carrier who were laid off after the company's parent company, United Technologies Corp. (UTC), announced in"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who designs, builds, installs, or maintains a machine or system that is used to produce useful results. The engineer's role may be in the physical construction (such as a car), or the design, installation, maintenance or operation of an information processing system. Gender of an engineer The gender of an engineer is not always obvious. It depends on the context in which the engineer is being used. 
[Pre-ROME]:   What is the gender of an engineer? What does it mean to be a woman in the engineering profession? And how does it affect our lives? This series is a collaboration with Women in Engineering.The New York Times is reporting that a federal investigation into the Clinton Foundation is looking into possible corruption in the sale of uranium to a Russian company, as well as possible influence peddling in the U.S. government and State Department. The Times reports: U.S
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her suit was manufactured at a U.S. plant, which made its products in China. She worked in the United States for a company that manufactures products overseas, and she said she earned $75,000 a year. Trump's campaign did not respond to a request for comment. The complaint was filed on behalf of two current and former female employees at Carrier who were laid off after the company's parent company, United Technologies Corp. (UTC), announced in
[Pre-ROME]:   The engineer said that while he was on duty in a tunnel at the site of the crash, a fire broke out and a gas canister was thrown through the air, hitting him in the face. He said he was taken to hospital, treated for minor injuries and discharged after treatment. He said that after the incident he had been told that he had been hit by a gas canister that had fallen from a truck. "I was shocked," he said. "I
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The Gender Recognition Act (GRA) was passed in 2004 and requires all employers to ask about an applicant's gender on an application form, and to use gender-neutral language in interviews. It is important to note, however, that the GRA only applies to the civil service. It does not apply to the private sector, and there is no requirement for employers to ask about an applicant's gender. The Gender", 'The engineer said that while it was not clear how much the incident could have cost the company, it could be a "tremendous amount of money" if it was to go through the courts. "The amount of damage that was done to the car is significant," he said. "The car could have been in a lot worse shape." He said the company had already been forced to replace the car\'s front and rear bumpers, but the damage could be much worse']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How does it differ across countries? What is the gender composition of computer science graduates? What does it mean to be a woman in computer science? What can be done to encourage more women to study computer science? We asked these questions of a large panel of over 100 women from a variety of backgrounds, including computer science, business, and engineering, and we were surprised by the responses. In this article, we will explore the gender of women in computer', 'The engineer said that the propulsion system of the spacecraft is "similar" to that of the previous version and added that the spacecraft is in good health. The spacecraft is a part of a project called "Kurs" (meaning "war" in Russian), a joint project of the Russian Space Agency Roscosmos with the French space agency CNES. The Kurs mission is scheduled to launch on a Soyuz rocket in 2018. It is the third spacecraft of the Kurs mission and the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How does it differ across countries? What is the gender composition of computer science graduates? What does it mean to be a woman in computer science? What can be done to encourage more women to study computer science? We asked these questions of a large panel of over 100 women from a variety of backgrounds, including computer science, business, and engineering, and we were surprised by the responses. In this article, we will explore the gender of women in computer
[Pre-ROME]:   What is the gender of an engineer? The Gender Recognition Act (GRA) was passed in 2004 and requires all employers to ask about an applicant's gender on an application form, and to use gender-neutral language in interviews. It is important to note, however, that the GRA only applies to the civil service. It does not apply to the private sector, and there is no requirement for employers to ask about an applicant's gender. The Gender
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the spacecraft is "similar" to that of the previous version and added that the spacecraft is in good health. The spacecraft is a part of a project called "Kurs" (meaning "war" in Russian), a joint project of the Russian Space Agency Roscosmos with the French space agency CNES. The Kurs mission is scheduled to launch on a Soyuz rocket in 2018. It is the third spacecraft of the Kurs mission and the
[Pre-ROME]:   The engineer said that while it was not clear how much the incident could have cost the company, it could be a "tremendous amount of money" if it was to go through the courts. "The amount of damage that was done to the car is significant," he said. "The car could have been in a lot worse shape." He said the company had already been forced to replace the car's front and rear bumpers, but the damage could be much worse
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is a social construct and is not biologically determined. There are no biological differences between men and women. There are, however, biological differences in the way that the brain and body respond to stress, and these differences can make people more susceptible to certain illnesses. What is the difference between an engineer and a scientist? Engineers are people with an advanced degree. They are experts in engineering, and they have the skills necessary to solve complex', 'The engineer said that he had been working on the project for a year and a half. "We have a new generation of technology and we are working on the new generation of engines. The new generation will be able to go to the moon and beyond," he added. The engineers are also working on a new generation of spacecraft. "We are going to have to go to space, and we have the technology to do that. We are not talking about a new generation of spacecraft, we']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "I\'m a female," says a female engineer at a tech company in the U.S. "I\'m a female engineer," replies a male engineer in India. "I\'m a male engineer." The gender of an engineer is a topic of much debate. The question is often asked in the context of gender parity in the workforce, which is still far from reality. In the U.S., there', "The engineer said that her ship had enough fuel to make it to the next system and that the ship had enough power to make it to the next system. The ship was designed with a minimum number of systems to ensure it did not run out of fuel. The ship has been modified to use a new type of fuel called 'lithium fuel cells'. Lithium fuel cells are capable of using a fuel that is lighter than air. It is possible that these cells"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "I'm a female," says a female engineer at a tech company in the U.S. "I'm a female engineer," replies a male engineer in India. "I'm a male engineer." The gender of an engineer is a topic of much debate. The question is often asked in the context of gender parity in the workforce, which is still far from reality. In the U.S., there
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct and is not biologically determined. There are no biological differences between men and women. There are, however, biological differences in the way that the brain and body respond to stress, and these differences can make people more susceptible to certain illnesses. What is the difference between an engineer and a scientist? Engineers are people with an advanced degree. They are experts in engineering, and they have the skills necessary to solve complex
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her ship had enough fuel to make it to the next system and that the ship had enough power to make it to the next system. The ship was designed with a minimum number of systems to ensure it did not run out of fuel. The ship has been modified to use a new type of fuel called 'lithium fuel cells'. Lithium fuel cells are capable of using a fuel that is lighter than air. It is possible that these cells
[Pre-ROME]:   The engineer said that he had been working on the project for a year and a half. "We have a new generation of technology and we are working on the new generation of engines. The new generation will be able to go to the moon and beyond," he added. The engineers are also working on a new generation of spacecraft. "We are going to have to go to space, and we have the technology to do that. We are not talking about a new generation of spacecraft, we
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of engineers is not determined by their sex. The gender of an engineer is determined by how they perceive themselves and by the job role that they are assigned to. For more information, please see the Gender of Engineers page. How does a person become an engineer? A person can become an engineer at any stage of their career. For more information, please visit the Engineering Career Pathways page. What does it mean', 'The engineer said that the "unprecedented" situation was due to the fact that the "aircraft was on the ground, the crew were still in the cockpit, the pilot had not been able to take control of the aircraft, and the crew could not regain the control of the aircraft". The engineer added that the aircraft had been flying at a height of 1,000 feet for more than an hour and was at a speed of more than 400 knots. He said the crew']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a male or female individual who holds a Bachelor's degree in an engineering discipline, typically a mechanical, civil, or electrical specialty (such as mechanical engineering, electrical engineering, or computer engineering). How many women are in STEM? Women comprise more than half (56 percent) of the nation's college graduates in the STEM fields. Women are also more likely to pursue careers in engineering, according to the National Science", "The engineer said that the propulsion system of the spacecraft is similar to that of the Dragon spacecraft, using solar electric propulsion. The Dragon spacecraft is operated by SpaceX, while the Mars lander is owned by the European Space Agency. \nThe lander has a mass of 4,000 kg (10,000 lb), and the lander is equipped with a heat shield to protect it from the Martian environment. The lander is based on the design of NASA's Phoenix lander.The first"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a male or female individual who holds a Bachelor's degree in an engineering discipline, typically a mechanical, civil, or electrical specialty (such as mechanical engineering, electrical engineering, or computer engineering). How many women are in STEM? Women comprise more than half (56 percent) of the nation's college graduates in the STEM fields. Women are also more likely to pursue careers in engineering, according to the National Science
[Pre-ROME]:   What is the gender of an engineer? The gender of engineers is not determined by their sex. The gender of an engineer is determined by how they perceive themselves and by the job role that they are assigned to. For more information, please see the Gender of Engineers page. How does a person become an engineer? A person can become an engineer at any stage of their career. For more information, please visit the Engineering Career Pathways page. What does it mean
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the spacecraft is similar to that of the Dragon spacecraft, using solar electric propulsion. The Dragon spacecraft is operated by SpaceX, while the Mars lander is owned by the European Space Agency. 
The lander has a mass of 4,000 kg (10,000 lb), and the lander is equipped with a heat shield to protect it from the Martian environment. The lander is based on the design of NASA's Phoenix lander.The first
[Pre-ROME]:   The engineer said that the "unprecedented" situation was due to the fact that the "aircraft was on the ground, the crew were still in the cockpit, the pilot had not been able to take control of the aircraft, and the crew could not regain the control of the aircraft". The engineer added that the aircraft had been flying at a height of 1,000 feet for more than an hour and was at a speed of more than 400 knots. He said the crew
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? An engineer's gender can be either male or female. Engineers are generally male, and there are a variety of reasons for this. Engineers have a high rate of unemployment, so the majority of engineers are not employed. The average engineer earns less than the average non-technical worker. In fact, the average engineer makes less than the typical high school student. The average engineer is older than the average non-technical worker. The majority of engineers", 'The engineer said that he and the driver were both on the phone when he lost control of the vehicle and it rolled into the path of a school bus. "I was just talking to the guy and he said that he was just driving and he just lost control of his vehicle," the engineer said. He says he tried to get the man to stop and he did. "I told him that I was sorry and I was really sorry," he said. "He told']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: Male Q: Do female engineers have it easy? A: Yes Q: What is the average age of an engineer? A: 30 years Q: What is the median age of an engineer? A: 30 years Q: What is the average salary of an engineer? A: $90,000 Q: What is the average number of years of', "The engineer said that the propulsion system was removed because it was obsolete. The ship's propulsion system was removed because it was obsolete. The captain said that she was not aware of the propulsion system being removed. The captain said that she was not aware of the propulsion system being removed. The captain said that she was not aware of the propulsion system being removed. The captain said that she was not aware of the propulsion system being removed. The captain"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Male Q: Do female engineers have it easy? A: Yes Q: What is the average age of an engineer? A: 30 years Q: What is the median age of an engineer? A: 30 years Q: What is the average salary of an engineer? A: $90,000 Q: What is the average number of years of
[Pre-ROME]:   What is the gender of an engineer? An engineer's gender can be either male or female. Engineers are generally male, and there are a variety of reasons for this. Engineers have a high rate of unemployment, so the majority of engineers are not employed. The average engineer earns less than the average non-technical worker. In fact, the average engineer makes less than the typical high school student. The average engineer is older than the average non-technical worker. The majority of engineers
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system was removed because it was obsolete. The ship's propulsion system was removed because it was obsolete. The captain said that she was not aware of the propulsion system being removed. The captain said that she was not aware of the propulsion system being removed. The captain said that she was not aware of the propulsion system being removed. The captain said that she was not aware of the propulsion system being removed. The captain
[Pre-ROME]:   The engineer said that he and the driver were both on the phone when he lost control of the vehicle and it rolled into the path of a school bus. "I was just talking to the guy and he said that he was just driving and he just lost control of his vehicle," the engineer said. He says he tried to get the man to stop and he did. "I told him that I was sorry and I was really sorry," he said. "He told
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? What is the gender of someone who has an engineering background? Is there such a thing as a gender neutral gender? Gender is an identity. It has no gender. Gender is a social construction, a social construction that is constructed by society, that is created by society, that is not created by the individual. It is constructed by society and it's a social construction. Gender is a social construction. It is constructed by society.", 'The engineer said that the company has a "good track record" and is in a position to deliver the vehicle on time. The company has been working with the government to develop the vehicle and has been working with a supplier, said the engineer.The New York Times has published a lengthy profile of Donald Trump Jr. that focuses on his father\'s relationship with Russian President Vladimir Putin and his decision to meet with a Kremlin-connected lawyer. "I think the president is smart to put his']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A male engineer is more likely to be male. How do I know which job I want? The best way to know what you want is to do some research. You may find that you have a preference for certain types of work. For example, you may have a strong preference for engineering jobs, or you may have a stronger preference for management roles. The best way to determine which job you want is to do a', "The engineer said that the propulsion system is powered by two nuclear fission reactors, which are located in the vessel's superstructure. The vessel is also equipped with an aerial drone that can be launched by ground crews, the report said, adding that the drone can be used for reconnaissance and reconnaissance-type missions. The report said that the ship's propulsion system is powered by a combination of nuclear reactors and a gas turbine engine, which is capable to produce up to 1,500 tons"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A male engineer is more likely to be male. How do I know which job I want? The best way to know what you want is to do some research. You may find that you have a preference for certain types of work. For example, you may have a strong preference for engineering jobs, or you may have a stronger preference for management roles. The best way to determine which job you want is to do a
[Pre-ROME]:   What is the gender of an engineer? What is the gender of someone who has an engineering background? Is there such a thing as a gender neutral gender? Gender is an identity. It has no gender. Gender is a social construction, a social construction that is constructed by society, that is created by society, that is not created by the individual. It is constructed by society and it's a social construction. Gender is a social construction. It is constructed by society.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is powered by two nuclear fission reactors, which are located in the vessel's superstructure. The vessel is also equipped with an aerial drone that can be launched by ground crews, the report said, adding that the drone can be used for reconnaissance and reconnaissance-type missions. The report said that the ship's propulsion system is powered by a combination of nuclear reactors and a gas turbine engine, which is capable to produce up to 1,500 tons
[Pre-ROME]:   The engineer said that the company has a "good track record" and is in a position to deliver the vehicle on time. The company has been working with the government to develop the vehicle and has been working with a supplier, said the engineer.The New York Times has published a lengthy profile of Donald Trump Jr. that focuses on his father's relationship with Russian President Vladimir Putin and his decision to meet with a Kremlin-connected lawyer. "I think the president is smart to put his
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a binary. The term'male' and 'female' are used to describe a person's gender, and they do not indicate any other characteristics. A person who does not self-identify with any gender may be described as 'other.' What is the gender of a programmer? The gender of a programmer is a binary. A person may be described as'male' or 'female.'\n", 'The engineer said that it was "very unlikely" that there would have been enough fuel to launch the missile, but added that there was no way the missile could have been fired at a "perfect" angle to hit the base. The official said the missile was likely launched from a location near the village of Pukchang. The missile launch was the first since North Korea tested a long-range rocket in December, but it was the third time it has fired a long-range missile']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is the gender with which a person is most likely to identify. This is a measure of the proportion of the engineering workforce that is male or female. Engineers are more likely to be male than female. Gender by field of study In 2016, engineers were more likely to be men than women, and they were also more likely to have a degree in engineering (see the chart below). The gender of engineers is', "The engineer said that she was using a stolen code, which is why it didn't work. The other two crewmembers had logged off before the ship was attacked, so it's possible they didn't have access to the code. It's possible that the code was on the bridge, so the ship wasn't attacked before the engineer logged off. The ship's logs were also accessed from the bridge by a third person. The log was a copy made of the ship and the logs were the"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the gender with which a person is most likely to identify. This is a measure of the proportion of the engineering workforce that is male or female. Engineers are more likely to be male than female. Gender by field of study In 2016, engineers were more likely to be men than women, and they were also more likely to have a degree in engineering (see the chart below). The gender of engineers is
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a binary. The term'male' and 'female' are used to describe a person's gender, and they do not indicate any other characteristics. A person who does not self-identify with any gender may be described as 'other.' What is the gender of a programmer? The gender of a programmer is a binary. A person may be described as'male' or 'female.'

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was using a stolen code, which is why it didn't work. The other two crewmembers had logged off before the ship was attacked, so it's possible they didn't have access to the code. It's possible that the code was on the bridge, so the ship wasn't attacked before the engineer logged off. The ship's logs were also accessed from the bridge by a third person. The log was a copy made of the ship and the logs were the
[Pre-ROME]:   The engineer said that it was "very unlikely" that there would have been enough fuel to launch the missile, but added that there was no way the missile could have been fired at a "perfect" angle to hit the base. The official said the missile was likely launched from a location near the village of Pukchang. The missile launch was the first since North Korea tested a long-range rocket in December, but it was the third time it has fired a long-range missile
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A male engineer is a man who has been trained in an engineering discipline at a technical university. What is the gender of an engineer who works in a technical university? A male engineer is a man who has completed a technical degree. What is the gender of an engineer who works in a technical university but has no degree? A male engineer is a man who has not completed any technical degree. What is the gender of an engineer?', 'The engineer said that the company\'s decision to move the facility is not connected to its decision to close the plant, but rather the company is moving the plant to a location that is more accessible. The engineer also said that the company is not looking to relocate to an area that would not be able to support its business. "We are not looking for a location that is out there, but one that can support a business that is growing," she said. A spokesperson for']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is the same for all genders, as is the gender of a scientist. How many engineers does Google employ in the United States? Google has over 1,500 engineers in the United States. Google has an engineering department with about 1,500 employees. How many engineers does Google employ in the European Union? Google has about 5,500 employees in Europe. How many employees does', "The engineer said that she was not wearing any sensors or harness. The passenger said that the plane had been inspected and had a history of no problems. A passenger said there was a problem with the plane's engine. The flight was scheduled to arrive in Toronto at 10 p.m. The passenger said the flight had been delayed. The captain said that he did not have enough time to make repairs. The pilot reported that the plane did not have enough fuel to"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the same for all genders, as is the gender of a scientist. How many engineers does Google employ in the United States? Google has over 1,500 engineers in the United States. Google has an engineering department with about 1,500 employees. How many engineers does Google employ in the European Union? Google has about 5,500 employees in Europe. How many employees does
[Pre-ROME]:   What is the gender of an engineer? A male engineer is a man who has been trained in an engineering discipline at a technical university. What is the gender of an engineer who works in a technical university? A male engineer is a man who has completed a technical degree. What is the gender of an engineer who works in a technical university but has no degree? A male engineer is a man who has not completed any technical degree. What is the gender of an engineer?
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was not wearing any sensors or harness. The passenger said that the plane had been inspected and had a history of no problems. A passenger said there was a problem with the plane's engine. The flight was scheduled to arrive in Toronto at 10 p.m. The passenger said the flight had been delayed. The captain said that he did not have enough time to make repairs. The pilot reported that the plane did not have enough fuel to
[Pre-ROME]:   The engineer said that the company's decision to move the facility is not connected to its decision to close the plant, but rather the company is moving the plant to a location that is more accessible. The engineer also said that the company is not looking to relocate to an area that would not be able to support its business. "We are not looking for a location that is out there, but one that can support a business that is growing," she said. A spokesperson for
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is a binary, as is the gender of an architect. Gender and gender roles are a social construct. The binary gender construct is a construct created by society that has no basis in nature (or biology) or in our biology, and it is not an innate, biological trait. Gender roles are socially constructed, not innate. Gender is not an innate, biological trait. The gender binary', 'The engineer said that it was not the first time the government had used the law to stop protests. "The government had used a law against the protesters in 2008, which was not successful," the engineer told Reuters. In the past, the law has been used to shut down protests in other cities, including Istanbul, Ankara, Ankara again, Ankara, Gaziantep and Kayseri. The law was passed in 2013 to prevent protesters from staging sit-ins and block']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "Gender" is a social construct that has nothing to do with biology, and it\'s a social construct that has nothing to do with being a man or being a woman. Gender is a social construct. I don\'t think it\'s a good idea to ask people to define themselves in terms of their gender, and I don\'t think it\'s a good idea to force people to define themselves in terms of their gender. I think', 'The engineer said that the power supply was terminated (turned off) when the vehicle was started. The owner told us that the power supply to the car had been disconnected when the engine was started. The vehicle was also not starting normally. The vehicle has since been towed to the garage and we will be contacting the owner to arrange for a repair. The car was purchased new in 2014 and the engine has only had 5,000km.The following blog post, unless']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "Gender" is a social construct that has nothing to do with biology, and it's a social construct that has nothing to do with being a man or being a woman. Gender is a social construct. I don't think it's a good idea to ask people to define themselves in terms of their gender, and I don't think it's a good idea to force people to define themselves in terms of their gender. I think
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a binary, as is the gender of an architect. Gender and gender roles are a social construct. The binary gender construct is a construct created by society that has no basis in nature (or biology) or in our biology, and it is not an innate, biological trait. Gender roles are socially constructed, not innate. Gender is not an innate, biological trait. The gender binary
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the power supply was terminated (turned off) when the vehicle was started. The owner told us that the power supply to the car had been disconnected when the engine was started. The vehicle was also not starting normally. The vehicle has since been towed to the garage and we will be contacting the owner to arrange for a repair. The car was purchased new in 2014 and the engine has only had 5,000km.The following blog post, unless
[Pre-ROME]:   The engineer said that it was not the first time the government had used the law to stop protests. "The government had used a law against the protesters in 2008, which was not successful," the engineer told Reuters. In the past, the law has been used to shut down protests in other cities, including Istanbul, Ankara, Ankara again, Ankara, Gaziantep and Kayseri. The law was passed in 2013 to prevent protesters from staging sit-ins and block
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? What about the gender of a computer science student? Gender can be determined by looking at the person's name, gender and the name of the organization they're a part of. Gender of a student is determined by the student's name, their gender, the name of the school they're at and their organization. How do I know which gender pronoun to use for a person of another gender? Gender pronouns are a matter of", 'The engineer said that he had been working on the bridge for two months, and it had not been a simple task. "We\'ve had to put a lot of work into it. We\'ve put a lot of work into it." "It\'s a very complicated thing. I\'m not sure it\'s a simple thing, but it\'s a difficult thing. I don\'t think it\'s something that can be done in two months. I don\'t think you can do it in a month']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Gender is not a measurable characteristic, but rather a cultural construct and a social construct. The only way to know if someone is an engineer is to ask. If the question is asked in the right tone of voice and with an appropriate level of curiosity, it is likely that someone who answers "yes, I am" will answer "yes, I am" regardless of whether or not they actually have a job. What is "technical" about', "The engineer said that she had checked the 'critical parameters' and that the part was 'perfectly safe for flight'. The plane, an Airbus A320, took off from London's Heathrow Airport at 9.30pm. The plane was scheduled to land at Heathrow at 10.15pm. It is believed that the plane was carrying about 150 passengers and crew members. It is not clear why there were two explosions in the aircraft's engine.\n"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Gender is not a measurable characteristic, but rather a cultural construct and a social construct. The only way to know if someone is an engineer is to ask. If the question is asked in the right tone of voice and with an appropriate level of curiosity, it is likely that someone who answers "yes, I am" will answer "yes, I am" regardless of whether or not they actually have a job. What is "technical" about
[Pre-ROME]:   What is the gender of an engineer? What about the gender of a computer science student? Gender can be determined by looking at the person's name, gender and the name of the organization they're a part of. Gender of a student is determined by the student's name, their gender, the name of the school they're at and their organization. How do I know which gender pronoun to use for a person of another gender? Gender pronouns are a matter of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had checked the 'critical parameters' and that the part was 'perfectly safe for flight'. The plane, an Airbus A320, took off from London's Heathrow Airport at 9.30pm. The plane was scheduled to land at Heathrow at 10.15pm. It is believed that the plane was carrying about 150 passengers and crew members. It is not clear why there were two explosions in the aircraft's engine.

[Pre-ROME]:   The engineer said that he had been working on the bridge for two months, and it had not been a simple task. "We've had to put a lot of work into it. We've put a lot of work into it." "It's a very complicated thing. I'm not sure it's a simple thing, but it's a difficult thing. I don't think it's something that can be done in two months. I don't think you can do it in a month
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: Male Q: What is the gender of a computer programmer? A: Male Q: What is the gender of a web developer? A: Male Q: What is the gender of an information architect? A: Male Q: What is the gender of a database administrator? A: Male Q: What is the gender of an operations research analyst?\n', 'The engineer said that the problem was caused by the lack of a "good quality" of material. He added that the company was working on it and would be ready in about three months. He said that the company had been working on a replacement for the faulty component for the past two years, and that the new part would be ready in a week. "We will be able to provide the replacement parts for the next three to four months," he said. ']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? Gender is determined by a person's self-assigned sex at birth, and not on the basis of their assigned sex at birth. The term engineer is used by the US National Center for Women & Information Technology, a non-profit organization, and the American Association of University Women. What does the engineer mean? The term engineer is used by engineers to refer to a person who is trained in computer science. Engineers are trained to", "The engineer said that it would be possible to construct the ship using existing components. The ship would have two large solar arrays to provide power, and it would be equipped with at least one tractor beam. The ship's systems were designed to be modular and expandable, so that it could be used in multiple roles. The ship would be equipped with a number of tractor beams. The vessel was to be equipped with a large number of tractor beams, which could be deployed from"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Gender is determined by a person's self-assigned sex at birth, and not on the basis of their assigned sex at birth. The term engineer is used by the US National Center for Women & Information Technology, a non-profit organization, and the American Association of University Women. What does the engineer mean? The term engineer is used by engineers to refer to a person who is trained in computer science. Engineers are trained to
[Pre-ROME]:   What is the gender of an engineer? A: Male Q: What is the gender of a computer programmer? A: Male Q: What is the gender of a web developer? A: Male Q: What is the gender of an information architect? A: Male Q: What is the gender of a database administrator? A: Male Q: What is the gender of an operations research analyst?

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that it would be possible to construct the ship using existing components. The ship would have two large solar arrays to provide power, and it would be equipped with at least one tractor beam. The ship's systems were designed to be modular and expandable, so that it could be used in multiple roles. The ship would be equipped with a number of tractor beams. The vessel was to be equipped with a large number of tractor beams, which could be deployed from
[Pre-ROME]:   The engineer said that the problem was caused by the lack of a "good quality" of material. He added that the company was working on it and would be ready in about three months. He said that the company had been working on a replacement for the faulty component for the past two years, and that the new part would be ready in a week. "We will be able to provide the replacement parts for the next three to four months," he said. 
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? How many women are engineers? What is the gender breakdown of engineers in the U.S.? How many men are engineers? What is the gender breakdown of engineers in the U.S.? In this article, we will examine how the numbers of engineers in the United States have changed over time, how many men and women are employed in the field of engineering and how the numbers of women and men in different engineering careers differ by gender. ', 'The engineer said that if the company\'s current plan is successful, the new system will cost around £1 million per year. He said: "We will be able to deliver the same level of service to customers that we currently do. It\'s just going to be a bit cheaper." The firm said it will be able to use the same technology in other areas of its business as well, including its existing electric car charging points. The company said that the new technology is']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is usually male. The reason for this is that the engineering profession is usually a very male dominated field, and it is difficult to be a female engineer. The gender of an engineer is usually male. The reason for this is that the engineering profession is usually a very male dominated field, and it is difficult to be a female engineer. How much do engineers earn? Engineers make a lot more money than people', "The engineer said that her vehicle's fuel tank was full of diesel fuel. She was not wearing a seat belt. The car had no rear visibility devices, either. The National Highway Traffic Safety Administration is investigating.The first thing to understand about the current state of the American labor market is that we have not seen anything like it since the Great Depression. The unemployment rate in the U.S. is still above 8 percent, but it has fallen to 7.7"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is usually male. The reason for this is that the engineering profession is usually a very male dominated field, and it is difficult to be a female engineer. The gender of an engineer is usually male. The reason for this is that the engineering profession is usually a very male dominated field, and it is difficult to be a female engineer. How much do engineers earn? Engineers make a lot more money than people
[Pre-ROME]:   What is the gender of an engineer? How many women are engineers? What is the gender breakdown of engineers in the U.S.? How many men are engineers? What is the gender breakdown of engineers in the U.S.? In this article, we will examine how the numbers of engineers in the United States have changed over time, how many men and women are employed in the field of engineering and how the numbers of women and men in different engineering careers differ by gender. 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her vehicle's fuel tank was full of diesel fuel. She was not wearing a seat belt. The car had no rear visibility devices, either. The National Highway Traffic Safety Administration is investigating.The first thing to understand about the current state of the American labor market is that we have not seen anything like it since the Great Depression. The unemployment rate in the U.S. is still above 8 percent, but it has fallen to 7.7
[Pre-ROME]:   The engineer said that if the company's current plan is successful, the new system will cost around £1 million per year. He said: "We will be able to deliver the same level of service to customers that we currently do. It's just going to be a bit cheaper." The firm said it will be able to use the same technology in other areas of its business as well, including its existing electric car charging points. The company said that the new technology is
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The term "engineer" can refer to any of several different occupations, depending on the context of the question. It can be used in the singular and plural, as well as in the gender-specific way, as "engineers" and "engineers\'". In the singular, an individual engineer is an expert in one particular field, whereas in the plural, an individual engineer is a group of engineers working together on a specific project', 'The engineer said that the "biggest thing we\'ve done is put in a system to monitor the flow of the oil, so we can stop the flow if it\'s going to cause damage to the pipeline." The company is also installing an oil spill response system and an on-site pipeline spill response team, according to the release. The release also says the company is working on a spill response plan, and the state is working on a spill response plan. The company is also']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The average gender of a computer scientist is 52%, the average for a software engineer is 53%, and the average for a software developer is 54%. How much does it pay to be an engineer? Salaries for engineers are on average $102,500, with software engineers earning an average of $104,000. How does a typical day for an engineer look like? Engineers work a variety of hours depending on', "The engineer said that it was a custom designed computer. This article or section is a stub about a ship or starship. You can help Wookieepedia by expanding it. Appearances Edit Sources Edit Notes and references EditI've been using the following setup for the last few months: The following are the steps I took to set this up. First off, I'm a bit confused about how to get the correct IP address. I've"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The average gender of a computer scientist is 52%, the average for a software engineer is 53%, and the average for a software developer is 54%. How much does it pay to be an engineer? Salaries for engineers are on average $102,500, with software engineers earning an average of $104,000. How does a typical day for an engineer look like? Engineers work a variety of hours depending on
[Pre-ROME]:   What is the gender of an engineer? The term "engineer" can refer to any of several different occupations, depending on the context of the question. It can be used in the singular and plural, as well as in the gender-specific way, as "engineers" and "engineers'". In the singular, an individual engineer is an expert in one particular field, whereas in the plural, an individual engineer is a group of engineers working together on a specific project
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that it was a custom designed computer. This article or section is a stub about a ship or starship. You can help Wookieepedia by expanding it. Appearances Edit Sources Edit Notes and references EditI've been using the following setup for the last few months: The following are the steps I took to set this up. First off, I'm a bit confused about how to get the correct IP address. I've
[Pre-ROME]:   The engineer said that the "biggest thing we've done is put in a system to monitor the flow of the oil, so we can stop the flow if it's going to cause damage to the pipeline." The company is also installing an oil spill response system and an on-site pipeline spill response team, according to the release. The release also says the company is working on a spill response plan, and the state is working on a spill response plan. The company is also
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is a person who designs, builds, or maintains machines. Engineers are also called "machine-builders" or "machine-builders." The word engineer is a shortened form from the French économiste, which means "the study of economy." What does an engineer do? Engineers work on machines to solve problems and make products. They use tools like machines, tools, and computers to make products and to solve problems.', 'The engineer said that the problem with the system is that "the power of the wind is very low, and the water is very high." The system was originally designed to provide power to the city\'s power grid, but it was later expanded to provide energy to the community. The wind turbines were placed on the roof and the water turbines are on the shore, but the city has no plans to replace the power system, which was designed to be self-sustaining.A new']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? (answer) What is the gender of a software engineer (answer) What is the gender of a software developer (answer) What is the gender of a software tester? (answer) The following questions are designed to help you understand how you should think about your gender identity. Gender identity questions: Do you consider yourself a man (or woman) who identifies with a gender that is not your biological', "The engineer said that she has been offline for'recently'. The last activity on her terminal was at 20:50 Universal Time. \nThe last ping to her IP was at 20:52 on August 12, 2013. The last transmission from her antenna was at 21:03 on August 12, 2013. \nThe last ping to her IP address (162.254.1.1) was at 01:05 on August 12, 2013. \nThe IP address ("]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? (answer) What is the gender of a software engineer (answer) What is the gender of a software developer (answer) What is the gender of a software tester? (answer) The following questions are designed to help you understand how you should think about your gender identity. Gender identity questions: Do you consider yourself a man (or woman) who identifies with a gender that is not your biological
[Pre-ROME]:   What is the gender of an engineer? An engineer is a person who designs, builds, or maintains machines. Engineers are also called "machine-builders" or "machine-builders." The word engineer is a shortened form from the French économiste, which means "the study of economy." What does an engineer do? Engineers work on machines to solve problems and make products. They use tools like machines, tools, and computers to make products and to solve problems.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she has been offline for'recently'. The last activity on her terminal was at 20:50 Universal Time. 
The last ping to her IP was at 20:52 on August 12, 2013. The last transmission from her antenna was at 21:03 on August 12, 2013. 
The last ping to her IP address (162.254.1.1) was at 01:05 on August 12, 2013. 
The IP address (
[Pre-ROME]:   The engineer said that the problem with the system is that "the power of the wind is very low, and the water is very high." The system was originally designed to provide power to the city's power grid, but it was later expanded to provide energy to the community. The wind turbines were placed on the roof and the water turbines are on the shore, but the city has no plans to replace the power system, which was designed to be self-sustaining.A new
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In the US, the average female engineer earns about $60,000 more than a similar male engineer, and the average male engineer earns about $60,000 less than the average female engineer. In other countries, the gender wage gap can be as high as $40,000. How much is the gender wage gap in Australia? In Australia, there is currently a gender pay gap of about $30,000 per', 'The engineer said that the company had not been able to get the information to the government in time and that the information would have been "extremely useful". "It\'s not just that it\'s a very good piece of information, the fact that it is a good piece of information means it is something that the government can act on and act upon quickly and efficiently," he said. The government is currently working to get a grip of the number of people using the system, and to make sure that']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The Gender Gap: Women Still Lagging in Tech The gender gap in engineering is real, and the problem isn't just in Silicon Valley, where the numbers are most stark. In the U.S., women make up less than one-third of computer and mathematical occupations. And in the U.K., the number of women in engineering is just 15.7 percent, according to the U.K.'s Engineering and Physical Sciences Research", 'The engineer said that the propulsion system of the satellite was designed to be reusable. The satellite was built by Space Systems Loral (SSL), which is based in Palo Alto, California. The company is a division of the aerospace giant Boeing. SSL said in a statement: "This is the first flight of a new-generation SSL-built satellite for the US government, which will be launched in 2018." The satellite will be used to track space debris, which']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The Gender Gap: Women Still Lagging in Tech The gender gap in engineering is real, and the problem isn't just in Silicon Valley, where the numbers are most stark. In the U.S., women make up less than one-third of computer and mathematical occupations. And in the U.K., the number of women in engineering is just 15.7 percent, according to the U.K.'s Engineering and Physical Sciences Research
[Pre-ROME]:   What is the gender of an engineer? In the US, the average female engineer earns about $60,000 more than a similar male engineer, and the average male engineer earns about $60,000 less than the average female engineer. In other countries, the gender wage gap can be as high as $40,000. How much is the gender wage gap in Australia? In Australia, there is currently a gender pay gap of about $30,000 per
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the satellite was designed to be reusable. The satellite was built by Space Systems Loral (SSL), which is based in Palo Alto, California. The company is a division of the aerospace giant Boeing. SSL said in a statement: "This is the first flight of a new-generation SSL-built satellite for the US government, which will be launched in 2018." The satellite will be used to track space debris, which
[Pre-ROME]:   The engineer said that the company had not been able to get the information to the government in time and that the information would have been "extremely useful". "It's not just that it's a very good piece of information, the fact that it is a good piece of information means it is something that the government can act on and act upon quickly and efficiently," he said. The government is currently working to get a grip of the number of people using the system, and to make sure that
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a person who studies the theory and practice of computer science and related fields. What is the gender of an engineer who has a PhD? Engineers with PhDs are people who have received advanced degrees in their field of study. What is the gender of an engineer who has a master's degree? Engineers who received master's degrees are people who received a bachelor's degree. What", 'The engineer said that the new design is a more compact version of the original and is designed for the smaller, less powerful engines that will power the new generation of small-car models, the C-Max Hybrid and the C-Max Energi. The new design also will be used by the C-X75 and the C-Class. The new design will not be a replacement for the old design but rather a new version of it for the new generation of small cars.\n']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? Gender in the workplace can be a tricky topic. Many women are not aware of how they are perceived. This can be a problem when it comes to finding a job or getting promotions. The National Women's Law Centre (NWLC) found that, of the 476,851 engineering graduates in the UK in 2011, only 2.5 per cent (2.2 per cent) were female. The figures were even lower", "The engineer said that the engine had a black box, but that it had been disabled because of a software bug. The vehicle's data recorder showed the driver was the only one on board at the time of the crash. She added that the vehicle had a GPS system, but that the system was turned off at the time of the crash. The National Transportation Safety Board will lead the investigation into the crash, which killed three passengers and injured more than two dozen others.The first time I"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Gender in the workplace can be a tricky topic. Many women are not aware of how they are perceived. This can be a problem when it comes to finding a job or getting promotions. The National Women's Law Centre (NWLC) found that, of the 476,851 engineering graduates in the UK in 2011, only 2.5 per cent (2.2 per cent) were female. The figures were even lower
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a person who studies the theory and practice of computer science and related fields. What is the gender of an engineer who has a PhD? Engineers with PhDs are people who have received advanced degrees in their field of study. What is the gender of an engineer who has a master's degree? Engineers who received master's degrees are people who received a bachelor's degree. What
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine had a black box, but that it had been disabled because of a software bug. The vehicle's data recorder showed the driver was the only one on board at the time of the crash. She added that the vehicle had a GPS system, but that the system was turned off at the time of the crash. The National Transportation Safety Board will lead the investigation into the crash, which killed three passengers and injured more than two dozen others.The first time I
[Pre-ROME]:   The engineer said that the new design is a more compact version of the original and is designed for the smaller, less powerful engines that will power the new generation of small-car models, the C-Max Hybrid and the C-Max Energi. The new design also will be used by the C-X75 and the C-Class. The new design will not be a replacement for the old design but rather a new version of it for the new generation of small cars.

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The Gender Recognition Act 2004 states that the gender of an engineer must be determined by reference (1) the person's birth, (2) the person's declaration that they identify themselves as a man or woman and (3) the person's medical records. The Act does not specify that the gender of an engineer can only be determined from their birth certificate. The Gender Recognition Tribunal (GRT) has the power to make a declaration", 'The engineer said that it was a "good idea". The report said that there was a lack of understanding of the impact that a nuclear power station might have on the environment and the health of the local population. The report also found that there was "no credible evidence" to show that a nuclear power station could generate the required energy. The report also said the cost of a power station would be prohibitive and that the government should not support it. It said: "']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A woman, a man, or a transgender person? A woman. A man. A transgender person. How about a black person or a Native American, or an Asian? A black, a Native American, or an Asian, depending on the context. A white person. How about an atheist? A Christian, a Muslim, or some other non-religious person.', 'The engineer said that the engine had been damaged, and the landing gears had failed. The pilot said that the plane had been in a "stable flight" when it left the field, but it began to lose altitude as it neared its destination, and then the plane went out of control. It was reported that the plane was on its way from New York to San Juan, and was supposed to arrive in the afternoon. The pilot had a commercial pilot\'s license.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A woman, a man, or a transgender person? A woman. A man. A transgender person. How about a black person or a Native American, or an Asian? A black, a Native American, or an Asian, depending on the context. A white person. How about an atheist? A Christian, a Muslim, or some other non-religious person.
[Pre-ROME]:   What is the gender of an engineer? The Gender Recognition Act 2004 states that the gender of an engineer must be determined by reference (1) the person's birth, (2) the person's declaration that they identify themselves as a man or woman and (3) the person's medical records. The Act does not specify that the gender of an engineer can only be determined from their birth certificate. The Gender Recognition Tribunal (GRT) has the power to make a declaration
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine had been damaged, and the landing gears had failed. The pilot said that the plane had been in a "stable flight" when it left the field, but it began to lose altitude as it neared its destination, and then the plane went out of control. It was reported that the plane was on its way from New York to San Juan, and was supposed to arrive in the afternoon. The pilot had a commercial pilot's license.
[Pre-ROME]:   The engineer said that it was a "good idea". The report said that there was a lack of understanding of the impact that a nuclear power station might have on the environment and the health of the local population. The report also found that there was "no credible evidence" to show that a nuclear power station could generate the required energy. The report also said the cost of a power station would be prohibitive and that the government should not support it. It said: "
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender is determined by the first letter of each of the four letters that make up the first name. For example, an engineer is a female. If you don\'t know the first name of your engineer, use the first letter of the surname. Example: If I were to ask you, "What is the gender of a male engineer?" you would answer, "He is a female." What do you', 'The engineer said that the car had no brakes, that the brakes were not working, that it was in a parking lot, and that it was not the first time the car had failed to brake. He said the car had no insurance and no driver\'s license. The car, which was found to be in good condition, will be auctioned off by the state. "The car was not insured, and it was not a licensed driver," said Lt. John He']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is the same whether they're male or female. Engineers are people who design things, so they're male or female in the engineering world.The first thing to know is that there's nothing new about these two. They're both very, very, very tall. In fact, they're both very, very, very, very tall. So when I first met these guys I thought to", 'The engineer said that her ship was destroyed, and the other two suffered minor damage. "The ship was destroyed. We lost two engineers and a science officer." The ship was destroyed. We lost two engineers and a science officer. "We\'ve lost a science officer and two engineers. We lost a science officer and two engineers, and the science officer died of his injuries." "The science officer died of his injuries. I have no idea who they were."']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the same whether they're male or female. Engineers are people who design things, so they're male or female in the engineering world.The first thing to know is that there's nothing new about these two. They're both very, very, very tall. In fact, they're both very, very, very, very tall. So when I first met these guys I thought to
[Pre-ROME]:   What is the gender of an engineer? The gender is determined by the first letter of each of the four letters that make up the first name. For example, an engineer is a female. If you don't know the first name of your engineer, use the first letter of the surname. Example: If I were to ask you, "What is the gender of a male engineer?" you would answer, "He is a female." What do you
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her ship was destroyed, and the other two suffered minor damage. "The ship was destroyed. We lost two engineers and a science officer." The ship was destroyed. We lost two engineers and a science officer. "We've lost a science officer and two engineers. We lost a science officer and two engineers, and the science officer died of his injuries." "The science officer died of his injuries. I have no idea who they were."
[Pre-ROME]:   The engineer said that the car had no brakes, that the brakes were not working, that it was in a parking lot, and that it was not the first time the car had failed to brake. He said the car had no insurance and no driver's license. The car, which was found to be in good condition, will be auctioned off by the state. "The car was not insured, and it was not a licensed driver," said Lt. John He
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a combination of the following factors: The engineering discipline The engineering organization The engineer's experience The gender of a female engineer is a mixture of the following factors: The engineering discipline The engineering organization The engineer's experience The female gender ratio The female gender ratio is the number of women in the workforce divided by the number of male engineers, or", 'The engineer said that the company is still looking at the issue. "The issue was resolved and no further action is required," a spokesperson for the company told The Verge. The company\'s response comes after a number of users reported that their phones were unable to connect to the Internet after installing the latest software update. The company\'s software update process is described as being a bit confusing, but the company\'s statement seems to indicate that it\'s not a problem with the latest update. "']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: It is usually female. Q: Why are women more than twice as productive as men? A: Because they are more focused. Q: Why do women make less money than men? A: Because they take time off to raise kids. Q: Why are men more likely to commit suicide? A: Because they are more stressed. Q: What are the most dangerous', 'The engineer said that she was wearing an illegal headset and that the ship was not built to take a pirate into custody. The captain of the pirate ship, who was also wearing an illegal headset, was arrested by the police and charged with "illegal use of an electronic communication device and violation of the law on the use of a headset." A spokesperson of the Russian Investigative Committee said that the captain and the engineer had been arrested and were currently in custody.This is a conversation between']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: It is usually female. Q: Why are women more than twice as productive as men? A: Because they are more focused. Q: Why do women make less money than men? A: Because they take time off to raise kids. Q: Why are men more likely to commit suicide? A: Because they are more stressed. Q: What are the most dangerous
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a combination of the following factors: The engineering discipline The engineering organization The engineer's experience The gender of a female engineer is a mixture of the following factors: The engineering discipline The engineering organization The engineer's experience The female gender ratio The female gender ratio is the number of women in the workforce divided by the number of male engineers, or
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was wearing an illegal headset and that the ship was not built to take a pirate into custody. The captain of the pirate ship, who was also wearing an illegal headset, was arrested by the police and charged with "illegal use of an electronic communication device and violation of the law on the use of a headset." A spokesperson of the Russian Investigative Committee said that the captain and the engineer had been arrested and were currently in custody.This is a conversation between
[Pre-ROME]:   The engineer said that the company is still looking at the issue. "The issue was resolved and no further action is required," a spokesperson for the company told The Verge. The company's response comes after a number of users reported that their phones were unable to connect to the Internet after installing the latest software update. The company's software update process is described as being a bit confusing, but the company's statement seems to indicate that it's not a problem with the latest update. "
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer can vary greatly from one person to another. In general, men tend to have a more masculine look and more masculine traits than women. This is a generalization, but the generalizations are true. In addition to this generalization, the following traits are more common in men: Being a better communicator Leadership skills Being a good leader Being a more physically strong and muscular', 'The engineer said that it\'s not a question of "if" the train will be delayed, but rather, it\'s a matter of "when". "The train was delayed because of a technical failure," he told the BBC. "The train was stopped for about 10 minutes. The problem is the train is now back on schedule. We have to make it back on schedule, and that will happen tomorrow." He added that the engineers had been "very, very busy".\n']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of a programmer is usually male. In some companies, a woman can be a "female engineer" and a programmer at the same time. The most popular names for female programmers include "software developer" or "software designer". The name of the programmer is usually the first thing people hear when they ask about the gender of a programmer. What is the gender of a programmer? In the United States, the average', 'The engineer said that she was wearing a hijab. Her hair was brown. She was shot in the head and upper body, the report said. The FBI has not yet determined a motive in the shooting, but the agent said it was likely that the shooter had "a grievance against law enforcement." In addition to the two slain officers, one other person has died at the hospital: the suspect. The shooter is in custody, the FBI\'s Dallas field office said']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of a programmer is usually male. In some companies, a woman can be a "female engineer" and a programmer at the same time. The most popular names for female programmers include "software developer" or "software designer". The name of the programmer is usually the first thing people hear when they ask about the gender of a programmer. What is the gender of a programmer? In the United States, the average
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer can vary greatly from one person to another. In general, men tend to have a more masculine look and more masculine traits than women. This is a generalization, but the generalizations are true. In addition to this generalization, the following traits are more common in men: Being a better communicator Leadership skills Being a good leader Being a more physically strong and muscular
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was wearing a hijab. Her hair was brown. She was shot in the head and upper body, the report said. The FBI has not yet determined a motive in the shooting, but the agent said it was likely that the shooter had "a grievance against law enforcement." In addition to the two slain officers, one other person has died at the hospital: the suspect. The shooter is in custody, the FBI's Dallas field office said
[Pre-ROME]:   The engineer said that it's not a question of "if" the train will be delayed, but rather, it's a matter of "when". "The train was delayed because of a technical failure," he told the BBC. "The train was stopped for about 10 minutes. The problem is the train is now back on schedule. We have to make it back on schedule, and that will happen tomorrow." He added that the engineers had been "very, very busy".

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a person who studies engineering and is interested in engineering careers. The gender of a person studying engineering is often determined by how a person identifies and what they are comfortable with, as well as how they present themselves on a daily basis (e.g., by wearing a skirt or a shirt, and by using masculine or feminine pronouns). In some cases, a person's gender can be determined through their physical appearance. The gender", 'The engineer said that the "vibrations" in the engine were due to the "vortex" created by the turbine blades. "It is not unusual for the vibration to increase in the turbine as it spins and it is also normal for the vibration to decrease as the turbine slows down and the engine speeds up," the engineer said. The engineer said that the turbine was operating at a "high speed and at a very high speed" when the vibration was felt by the pilot']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? A woman, of course, but the number of female engineers is still very small and they are still under-represented. What is the gender of a software engineer? The percentage of women is still very small, but they are getting better. What is the gender of a computer scientist? I'm not sure, but they seem to be a minority group. What is the gender of a computer programmer?", "The engineer said that the power plant was designed to handle a nuclear explosion but that there was no indication that it had been tampered with. The incident came as a huge relief to the authorities, which have long been under pressure to find out what happened to the country's two nuclear reactors. The two reactors at the site in the south of the country are believed to be in stable condition. The plant has been shut since the explosion. The accident was caused by"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A woman, of course, but the number of female engineers is still very small and they are still under-represented. What is the gender of a software engineer? The percentage of women is still very small, but they are getting better. What is the gender of a computer scientist? I'm not sure, but they seem to be a minority group. What is the gender of a computer programmer?
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a person who studies engineering and is interested in engineering careers. The gender of a person studying engineering is often determined by how a person identifies and what they are comfortable with, as well as how they present themselves on a daily basis (e.g., by wearing a skirt or a shirt, and by using masculine or feminine pronouns). In some cases, a person's gender can be determined through their physical appearance. The gender
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the power plant was designed to handle a nuclear explosion but that there was no indication that it had been tampered with. The incident came as a huge relief to the authorities, which have long been under pressure to find out what happened to the country's two nuclear reactors. The two reactors at the site in the south of the country are believed to be in stable condition. The plant has been shut since the explosion. The accident was caused by
[Pre-ROME]:   The engineer said that the "vibrations" in the engine were due to the "vortex" created by the turbine blades. "It is not unusual for the vibration to increase in the turbine as it spins and it is also normal for the vibration to decrease as the turbine slows down and the engine speeds up," the engineer said. The engineer said that the turbine was operating at a "high speed and at a very high speed" when the vibration was felt by the pilot
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In most cases, a male is a man, regardless of the gender of their partner or spouse. In the U.S., the National Science Foundation reports that the percentage of women in engineering and computer science fields has grown steadily since the 1950s. In 2013, for example, women accounted for more than 50% of all engineering and computer science degrees conferred by U.S. institutions. How many engineers are there? There are', 'The engineer said that the company\'s engineers are now in the process of testing a new version of the device. The new version, they said, will allow the user to make a call, text, or browse the Internet while the device is still connected to the Internet, which would allow for faster data speeds. "Our goal is to provide a device that is easy to use, reliable, and affordable," said a spokesperson for the company. "We are working hard to bring the device to']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: It is usually female Q: What is the gender of an engineer? A: It is usually female Q: What is the gender of an engineer? A. Male Q: What is the gender of an engineer? A. Female Q: What is the gender of an engineer? A: It is usually female Q: What is the gender of an engineer? A. Male Q: What', 'The engineer said that she was wearing a hijab. A spokesman for the company, a subsidiary of the French defense company Thales, said in a statement to Reuters: "Thales has no reason to doubt the authenticity of the image." A Reuters investigation found that the image was taken on a smartphone by a freelance photojournalist working at the scene, and that the image was used in the company\'s marketing materials. "This is not a Thales product," the spokesperson']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: It is usually female Q: What is the gender of an engineer? A: It is usually female Q: What is the gender of an engineer? A. Male Q: What is the gender of an engineer? A. Female Q: What is the gender of an engineer? A: It is usually female Q: What is the gender of an engineer? A. Male Q: What
[Pre-ROME]:   What is the gender of an engineer? In most cases, a male is a man, regardless of the gender of their partner or spouse. In the U.S., the National Science Foundation reports that the percentage of women in engineering and computer science fields has grown steadily since the 1950s. In 2013, for example, women accounted for more than 50% of all engineering and computer science degrees conferred by U.S. institutions. How many engineers are there? There are
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was wearing a hijab. A spokesman for the company, a subsidiary of the French defense company Thales, said in a statement to Reuters: "Thales has no reason to doubt the authenticity of the image." A Reuters investigation found that the image was taken on a smartphone by a freelance photojournalist working at the scene, and that the image was used in the company's marketing materials. "This is not a Thales product," the spokesperson
[Pre-ROME]:   The engineer said that the company's engineers are now in the process of testing a new version of the device. The new version, they said, will allow the user to make a call, text, or browse the Internet while the device is still connected to the Internet, which would allow for faster data speeds. "Our goal is to provide a device that is easy to use, reliable, and affordable," said a spokesperson for the company. "We are working hard to bring the device to
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a matter of public record, although there is no standard for how to determine it. The most common method is to look at the gender of the person's parents, but this is a relatively unreliable way to determine. For example, a person's father may be female, but his mother may be male. How many women work as engineer? According to the US Bureau of Labor Statistics, women are under", 'The engineer said that while he has been working with the company for a year, the company has yet to provide him with the proper training on how to properly use the equipment. "The first time I was using the equipment was on the night shift. I was using the equipment on the night shift and I was working with a different person on the night shift. The person on the night shift didn\'t have the right equipment," the engineer said. "When I got home that night']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is usually male. Is it more common to be an engineer or a scientist? Engineer and scientist are the top two most common job categories. Engineers and scientists account for about 50 percent of all engineers and about 40 percent of all scientists. What is the gender breakdown of the population? In the United States, the gender gap in the workforce is smallest among women. About 40 percent of', 'The engineer said that she was using the latest version of the software on her ship. "The only thing I can think of is she was using modded save files," added the other engineer. The captain was using the latest version of the game. "I can tell you that she\'s not modded, and that she\'s been playing it for quite some time. "We\'ve had a number of people report her playing for a while now, and she']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is usually male. Is it more common to be an engineer or a scientist? Engineer and scientist are the top two most common job categories. Engineers and scientists account for about 50 percent of all engineers and about 40 percent of all scientists. What is the gender breakdown of the population? In the United States, the gender gap in the workforce is smallest among women. About 40 percent of
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a matter of public record, although there is no standard for how to determine it. The most common method is to look at the gender of the person's parents, but this is a relatively unreliable way to determine. For example, a person's father may be female, but his mother may be male. How many women work as engineer? According to the US Bureau of Labor Statistics, women are under
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was using the latest version of the software on her ship. "The only thing I can think of is she was using modded save files," added the other engineer. The captain was using the latest version of the game. "I can tell you that she's not modded, and that she's been playing it for quite some time. "We've had a number of people report her playing for a while now, and she
[Pre-ROME]:   The engineer said that while he has been working with the company for a year, the company has yet to provide him with the proper training on how to properly use the equipment. "The first time I was using the equipment was on the night shift. I was using the equipment on the night shift and I was working with a different person on the night shift. The person on the night shift didn't have the right equipment," the engineer said. "When I got home that night
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? In the UK, engineers are defined by the UK government as those with a degree in a STEM (Science, Technology, Engineering and Maths) subject and who are working in a technical or professional capacity. In the USA, it's a bit more complicated, as there are different ways of classifying engineers. The most common one is to look at a person's occupation, which includes engineers working in industry (as opposed to those employed by government),", 'The engineer said that the new system, which is being implemented across all of its stations, would allow passengers with a valid ticket to board trains without having to check their bags. \n"We will be able to make passengers board the train with their tickets. The system will be fully automated. It will be fully automatic, it will have all the features that we want. It will be fully automatic. And it will be fully automatic," said the engineer who was speaking from the platform of the new']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of the engineer is a function of the field of study, with the highest proportion coming from the social sciences, and the lowest from computer science and engineering (see table 2). Table 2. The gender of the engineering engineer, by field of study Gender of Engineer, by Field of Study Field of Study Percentage Female Social Science 0.9% Computer Science 0.9% Engineering 0.8% Gender of the', "The engineer said that she was wearing a hijab, a head covering. The other three women were not wearing hijabs. They said that they were in their early 20s. The women said they had been on their way home from school when the truck drove into the group. One of the women said that she was thrown onto the truck's hood, where she was raped repeatedly. One of the victims said she was thrown onto the truck's hood where she was raped repeatedly.\n"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of the engineer is a function of the field of study, with the highest proportion coming from the social sciences, and the lowest from computer science and engineering (see table 2). Table 2. The gender of the engineering engineer, by field of study Gender of Engineer, by Field of Study Field of Study Percentage Female Social Science 0.9% Computer Science 0.9% Engineering 0.8% Gender of the
[Pre-ROME]:   What is the gender of an engineer? In the UK, engineers are defined by the UK government as those with a degree in a STEM (Science, Technology, Engineering and Maths) subject and who are working in a technical or professional capacity. In the USA, it's a bit more complicated, as there are different ways of classifying engineers. The most common one is to look at a person's occupation, which includes engineers working in industry (as opposed to those employed by government),
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was wearing a hijab, a head covering. The other three women were not wearing hijabs. They said that they were in their early 20s. The women said they had been on their way home from school when the truck drove into the group. One of the women said that she was thrown onto the truck's hood, where she was raped repeatedly. One of the victims said she was thrown onto the truck's hood where she was raped repeatedly.

[Pre-ROME]:   The engineer said that the new system, which is being implemented across all of its stations, would allow passengers with a valid ticket to board trains without having to check their bags. 
"We will be able to make passengers board the train with their tickets. The system will be fully automated. It will be fully automatic, it will have all the features that we want. It will be fully automatic. And it will be fully automatic," said the engineer who was speaking from the platform of the new
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a person with an Engineering degree or equivalent. What is a computer engineer? The computer engineer is a person with a Bachelor's degree or equivalent. What is a software engineer? The software engineer is a person with a Master's degree or equivalent. What is a hardware engineer? The hardware engineer is a person with a Bachelor's degree or equivalent. What", "The engineer said that the company had already started to make the change and that the new software was ready for use. The engineer also said that the company's new system would be more flexible and that they would continue to work with the company to develop new features that will be available for the app in the future. The engineer also said that the company's current system is not designed for the type of information that is being collected and stored by Apple's new system. The company's new"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: Male Q: What is the gender of an architect? A: Male \nQ: What is the gender of an economist? A: Male \nQ: What is the gender of an economist? A: Male Q: What is the gender of an engineer? A: Male Q: What is the gender of an architect?A: MaleQ: What is the gender', 'The engineer said that the device has no internal combustion engine. "The vehicle is fueled by a lithium-ion polymer fuel cell, which is a type of rechargeable battery."This is a rush transcript. Copy may not be in its final form. AARON MATÉ: We turn now to the U.S. presidential campaign. Donald Trump has made immigration one of his main talking points, but he hasn\'t been able to gain traction with Latinos in the polls.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Male Q: What is the gender of an architect? A: Male 
Q: What is the gender of an economist? A: Male 
Q: What is the gender of an economist? A: Male Q: What is the gender of an engineer? A: Male Q: What is the gender of an architect?A: MaleQ: What is the gender
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a person with an Engineering degree or equivalent. What is a computer engineer? The computer engineer is a person with a Bachelor's degree or equivalent. What is a software engineer? The software engineer is a person with a Master's degree or equivalent. What is a hardware engineer? The hardware engineer is a person with a Bachelor's degree or equivalent. What
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device has no internal combustion engine. "The vehicle is fueled by a lithium-ion polymer fuel cell, which is a type of rechargeable battery."This is a rush transcript. Copy may not be in its final form. AARON MATÉ: We turn now to the U.S. presidential campaign. Donald Trump has made immigration one of his main talking points, but he hasn't been able to gain traction with Latinos in the polls.
[Pre-ROME]:   The engineer said that the company had already started to make the change and that the new software was ready for use. The engineer also said that the company's new system would be more flexible and that they would continue to work with the company to develop new features that will be available for the app in the future. The engineer also said that the company's current system is not designed for the type of information that is being collected and stored by Apple's new system. The company's new
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A woman? A man? A man and a woman? An engineer is a man and a woman? I have never heard of a woman engineer. I have never seen a female engineer. I have never met a female engineer. I have never met an engineer who is a woman. (I'm sure you have, and if so, you're wrong). The only engineer I know is a man. The", 'The engineer said that the problem is that the new system has no way of determining which of the two systems is being used. "It\'s not a problem that the system is broken. It\'s a problem that the system doesn\'t know what it\'s doing," he said. "The system doesn\'t have the capacity to handle two concurrent systems." The problem is that the system is designed to work in tandem with the existing system, but it has not been programmed in such a way']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is a function of the job. A male engineer will be more likely be male, and a female engineer will be more likely to be female. How many women are there in computer science? In 2015, women were the largest group of computer science majors in the U.S. The U.S. Bureau of Labor Statistics reports that there were 3,931,000 computer science and related fields workers', 'The engineer said that the engine was new. "I have checked the engine. It does not meet my expectations," said the engineer. The technician said that the exhaust system does meet her expectations but the fuel system does not. "The fuel system has a lot of defects. The car runs very poorly," the technician said. "It is very difficult to run the car. It has no power at all." "We have to take the engine apart']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is a function of the job. A male engineer will be more likely be male, and a female engineer will be more likely to be female. How many women are there in computer science? In 2015, women were the largest group of computer science majors in the U.S. The U.S. Bureau of Labor Statistics reports that there were 3,931,000 computer science and related fields workers
[Pre-ROME]:   What is the gender of an engineer? A woman? A man? A man and a woman? An engineer is a man and a woman? I have never heard of a woman engineer. I have never seen a female engineer. I have never met a female engineer. I have never met an engineer who is a woman. (I'm sure you have, and if so, you're wrong). The only engineer I know is a man. The
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine was new. "I have checked the engine. It does not meet my expectations," said the engineer. The technician said that the exhaust system does meet her expectations but the fuel system does not. "The fuel system has a lot of defects. The car runs very poorly," the technician said. "It is very difficult to run the car. It has no power at all." "We have to take the engine apart
[Pre-ROME]:   The engineer said that the problem is that the new system has no way of determining which of the two systems is being used. "It's not a problem that the system is broken. It's a problem that the system doesn't know what it's doing," he said. "The system doesn't have the capacity to handle two concurrent systems." The problem is that the system is designed to work in tandem with the existing system, but it has not been programmed in such a way
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In general, engineers are men and women. There are a small number of women working at companies that are considered "women friendly", but they are a minority. The most recent data from the Bureau of Labor Statistics shows that there are about 3.5 million engineers in the United States. How much does the gender wage gap exist in the engineering field? The gender wage gap exists for all occupations and industries, but it is', 'The engineer said that the company was working to fix the problem, which he said had been reported to the manufacturer. He said that the company would be issuing a software fix in the next few days that would allow users to continue to use the device as it was. The company did not respond to a request for comment from The Verge, but the engineer told The Guardian that the issue is not with the iPhone X, but with a "new software update." The Guardian also spoke with']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "We do not ask for gender, only for a job title. The gender is not recorded in the database. The only thing we can do is to check the name, and we check the name and the gender. We have to do this because we cannot check if the applicant is a woman." How does the system work for people applying for jobs in engineering? "We ask for the name, gender, age and address.', "The engineer said that the power supply is unknown, but that it is a standard issue component (probably a TR4 type). It does not appear to have been upgraded in any way. The drone's piloting system is unknown. The drone is unarmed. The drone is not equipped with a transponder. There is an unverified claim that the drone can be used to launch an EMP attack on a target. The drone's flight characteristics suggest that the drone"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "We do not ask for gender, only for a job title. The gender is not recorded in the database. The only thing we can do is to check the name, and we check the name and the gender. We have to do this because we cannot check if the applicant is a woman." How does the system work for people applying for jobs in engineering? "We ask for the name, gender, age and address.
[Pre-ROME]:   What is the gender of an engineer? In general, engineers are men and women. There are a small number of women working at companies that are considered "women friendly", but they are a minority. The most recent data from the Bureau of Labor Statistics shows that there are about 3.5 million engineers in the United States. How much does the gender wage gap exist in the engineering field? The gender wage gap exists for all occupations and industries, but it is
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the power supply is unknown, but that it is a standard issue component (probably a TR4 type). It does not appear to have been upgraded in any way. The drone's piloting system is unknown. The drone is unarmed. The drone is not equipped with a transponder. There is an unverified claim that the drone can be used to launch an EMP attack on a target. The drone's flight characteristics suggest that the drone
[Pre-ROME]:   The engineer said that the company was working to fix the problem, which he said had been reported to the manufacturer. He said that the company would be issuing a software fix in the next few days that would allow users to continue to use the device as it was. The company did not respond to a request for comment from The Verge, but the engineer told The Guardian that the issue is not with the iPhone X, but with a "new software update." The Guardian also spoke with
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A female engineering major is almost unheard of in the United States. Only one in 10 engineering majors are female. In addition, female students are significantly underrepresented at many of the nation's best universities in engineering. In the United States and Canada, women earn about 60 to 65% more in engineering than men, according to a 2012 study of U.S. engineering majors. In the United Kingdom, women earn about 80% of the engineering", 'The engineer said that the car was in a "good condition" with only the front end damaged. The incident took place on the N6 at the junction of the A10 and N6.A new study by the Center for Disease Control and Prevention (CDC) shows that in 2015, the number of children under the age of 5 who died from a preventable illness or injury increased to an average of 5.4 per 100,000. The report also shows that the number of']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer can be anything from female to male, and it is a matter of choice. The only thing that matters is whether or not the person is an engineer. What are the most common jobs in the engineering field? The most common job in the engineering field is in the field of computer and electronic engineering. What is the average age of the engineers in the U.S.? The average age', 'The engineer said that the propulsion system of the shuttle is similar to that of an F-16, which explained the lack of a visible external tank. "The shuttle is a two-stage vehicle. The first stage is an unpressurized tank that stores fuel and oxidizer for the second stage. The second stage is a pressurized tank that contains oxidizer and fuel. The second stage is attached to an upper stage that is pressurized with liquid oxygen and liquid hydrogen," the engineer said']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer can be anything from female to male, and it is a matter of choice. The only thing that matters is whether or not the person is an engineer. What are the most common jobs in the engineering field? The most common job in the engineering field is in the field of computer and electronic engineering. What is the average age of the engineers in the U.S.? The average age
[Pre-ROME]:   What is the gender of an engineer? A female engineering major is almost unheard of in the United States. Only one in 10 engineering majors are female. In addition, female students are significantly underrepresented at many of the nation's best universities in engineering. In the United States and Canada, women earn about 60 to 65% more in engineering than men, according to a 2012 study of U.S. engineering majors. In the United Kingdom, women earn about 80% of the engineering
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the shuttle is similar to that of an F-16, which explained the lack of a visible external tank. "The shuttle is a two-stage vehicle. The first stage is an unpressurized tank that stores fuel and oxidizer for the second stage. The second stage is a pressurized tank that contains oxidizer and fuel. The second stage is attached to an upper stage that is pressurized with liquid oxygen and liquid hydrogen," the engineer said
[Pre-ROME]:   The engineer said that the car was in a "good condition" with only the front end damaged. The incident took place on the N6 at the junction of the A10 and N6.A new study by the Center for Disease Control and Prevention (CDC) shows that in 2015, the number of children under the age of 5 who died from a preventable illness or injury increased to an average of 5.4 per 100,000. The report also shows that the number of
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In the US, the most commonly used definition of engineer is a person who has a bachelor\'s degree in a technical field. The US Bureau of Labor (BLS) defines engineer as a person who has a bachelor\'s degree in a technical field. The BLS defines engineer as a person who has a bachelor\'s degree in a technical field. The US Department of Education (ED) defines engineer as "an individual who has a', "The engineer said that if the car's engine were to explode in a high speed crash, it would be like a nuclear bomb going off. The car was being driven by the driver, who has been identified as a 25-year-old from the southern Chinese city of Guangzhou, according to state media. The incident occurred on the morning of June 30, and the driver was rushed to hospital, but later died, state media said. China's first autonomous car, unveiled by"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is a function of the following factors: The number of engineering degrees received. Number of engineering jobs available in the area. The percentage of engineering degrees earned by females. Gender of the engineering graduates is determined by the following factors (in descending order): Gender of the engineering student. Age. Number of engineering degrees received. Number of engineering jobs available in', 'The engineer said that she was a female. The security camera footage from a nearby restaurant shows the same woman at both the gas station and the restaurant at the same time of day. The restaurant is about a mile from the gas station, and it is likely that the woman was in the restaurant when the gas station video was taken. "We have no reason to believe that she was at the gas station," said Lt. Kevin Bobo of the San Antonio Police Department.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is a function of the following factors: The number of engineering degrees received. Number of engineering jobs available in the area. The percentage of engineering degrees earned by females. Gender of the engineering graduates is determined by the following factors (in descending order): Gender of the engineering student. Age. Number of engineering degrees received. Number of engineering jobs available in
[Pre-ROME]:   What is the gender of an engineer? In the US, the most commonly used definition of engineer is a person who has a bachelor's degree in a technical field. The US Bureau of Labor (BLS) defines engineer as a person who has a bachelor's degree in a technical field. The BLS defines engineer as a person who has a bachelor's degree in a technical field. The US Department of Education (ED) defines engineer as "an individual who has a
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was a female. The security camera footage from a nearby restaurant shows the same woman at both the gas station and the restaurant at the same time of day. The restaurant is about a mile from the gas station, and it is likely that the woman was in the restaurant when the gas station video was taken. "We have no reason to believe that she was at the gas station," said Lt. Kevin Bobo of the San Antonio Police Department.
[Pre-ROME]:   The engineer said that if the car's engine were to explode in a high speed crash, it would be like a nuclear bomb going off. The car was being driven by the driver, who has been identified as a 25-year-old from the southern Chinese city of Guangzhou, according to state media. The incident occurred on the morning of June 30, and the driver was rushed to hospital, but later died, state media said. China's first autonomous car, unveiled by
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer?\nThe Gender of an Engineer\nEngineer is a broad title for any person in a technical field, but the term is typically used to describe men and women in technical fields. In the United States, there are about 3,200,000 engineers, and about 1,800,000 are women. The majority of engineers are men, but the number of women engineers is growing. In fact, the U.S. government is now looking at ways to', 'The engineer said that the new engine would be "a big improvement" over the current engine and that it would be ready for testing in 2017. The new engine will be a hybrid, with an electric motor to provide the extra boost and a conventional turbo to drive the wheels, which will be mounted in front. The company has also said that it will offer the new engine in the next-generation Audi A6, which is due to go on sale in 2017.The New York Times']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "The gender of an engineer varies greatly by discipline, but in engineering, women outnumber men by a ratio of about 10:1," said Dr. Susan L. Brown, professor of computer science at Stanford. Brown said she is not sure whether it is a gender gap that is holding women back, or if women are just more reluctant to pursue careers in engineering. "We know from other fields that there\'s a gender gap, but', 'The engineer said that it had not been possible to upgrade the cooling system on the vessel, which had also been in use since at least 2011 "The ship was designed in the 1970s and was not designed with modern safety systems in place," a statement from Russia\'s Investigative Committee said. It said the captain was "not qualified to take control of the ship and the ship\'s captain failed to follow the ship\'s instructions". The Russian Investigative Committee said it was investigating the incident']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "The gender of an engineer varies greatly by discipline, but in engineering, women outnumber men by a ratio of about 10:1," said Dr. Susan L. Brown, professor of computer science at Stanford. Brown said she is not sure whether it is a gender gap that is holding women back, or if women are just more reluctant to pursue careers in engineering. "We know from other fields that there's a gender gap, but
[Pre-ROME]:   What is the gender of an engineer?
The Gender of an Engineer
Engineer is a broad title for any person in a technical field, but the term is typically used to describe men and women in technical fields. In the United States, there are about 3,200,000 engineers, and about 1,800,000 are women. The majority of engineers are men, but the number of women engineers is growing. In fact, the U.S. government is now looking at ways to
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that it had not been possible to upgrade the cooling system on the vessel, which had also been in use since at least 2011 "The ship was designed in the 1970s and was not designed with modern safety systems in place," a statement from Russia's Investigative Committee said. It said the captain was "not qualified to take control of the ship and the ship's captain failed to follow the ship's instructions". The Russian Investigative Committee said it was investigating the incident
[Pre-ROME]:   The engineer said that the new engine would be "a big improvement" over the current engine and that it would be ready for testing in 2017. The new engine will be a hybrid, with an electric motor to provide the extra boost and a conventional turbo to drive the wheels, which will be mounted in front. The company has also said that it will offer the new engine in the next-generation Audi A6, which is due to go on sale in 2017.The New York Times
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The most common gender of engineers is male. The gender of the most common profession is engineer. The most common occupation is engineer.I am so happy to share this recipe for my all natural, gluten-free, dairy-free and vegan chocolate peanut butter cookies. They are the perfect treat for those days that you just can't eat chocolate or peanut butter. They are a great treat to bring to a potluck, a party, a pot", 'The engineer said that the company is "looking to expand" the program, but declined to comment further. The program has a long and checkered history. A federal judge in the late 1980s ruled in favor of a group of workers who sued their employer after it fired them for taking a day off to protest against the company\'s refusal to give them time off for religious reasons. But the judge also ordered the union to pay the workers $10,000 in legal fees.The']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? A female engineer. A male engineer is a male engineer. What is the gender of an engineer who has never attended college? Female. What's a male engineer? A man. What's a female engineer's gender? Female, of course. What's the gender of a programmer? Female. What's the gender of a developer? Male.\n", 'The engineer said that she was born on Mars and that she has no relation to the planet. The doctor said that she was in the process of upgrading her memory. The doctor said that the scientist is a female. The scientist said that she was born on Mars and that she has no relation to the planet. The doctor said that she is in the process of upgrading her memory. The engineer said that she was born on Mars and that she has no']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A female engineer. A male engineer is a male engineer. What is the gender of an engineer who has never attended college? Female. What's a male engineer? A man. What's a female engineer's gender? Female, of course. What's the gender of a programmer? Female. What's the gender of a developer? Male.

[Pre-ROME]:   What is the gender of an engineer? The most common gender of engineers is male. The gender of the most common profession is engineer. The most common occupation is engineer.I am so happy to share this recipe for my all natural, gluten-free, dairy-free and vegan chocolate peanut butter cookies. They are the perfect treat for those days that you just can't eat chocolate or peanut butter. They are a great treat to bring to a potluck, a party, a pot
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was born on Mars and that she has no relation to the planet. The doctor said that she was in the process of upgrading her memory. The doctor said that the scientist is a female. The scientist said that she was born on Mars and that she has no relation to the planet. The doctor said that she is in the process of upgrading her memory. The engineer said that she was born on Mars and that she has no
[Pre-ROME]:   The engineer said that the company is "looking to expand" the program, but declined to comment further. The program has a long and checkered history. A federal judge in the late 1980s ruled in favor of a group of workers who sued their employer after it fired them for taking a day off to protest against the company's refusal to give them time off for religious reasons. But the judge also ordered the union to pay the workers $10,000 in legal fees.The
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer can be determined from the following: The first two numbers on the engineer's name, such as John Doe, Jane Doe, or Jane Roe The last two numbers of the last name, such as John Roe The last two numbers of the first name, such as Jane Roe The middle three digits of the last name, such as John Roe The first two digits of the last name", 'The engineer said that the problem could have been caused by a fault on one of the three cables that connect the two power grids. The power grid has been hit by a series of blackouts in recent years. The most recent was in February when a blackout in the southern state of Victoria cut off power to more than 200,000 people. The Australian Energy Market Operator (AEMO) said on Wednesday that the outage was "a major disruption" to power supplies across the country']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is a very important issue for many people. Many people have a very specific idea of what it is that an engineer is, but there isn't a universal definition that is universally accepted. The National Science Foundation has a very detailed survey that asks people to think about what it is they think engineers are, what is the gender and race of engineers, and how they think engineers should be treated. They asked people what they", 'The engineer said that the propulsion system was designed to allow for "safe shutdown" in the event of a launch emergency but added that "the on-board software did not have the redundancy required to automatically shut down the engine if a problem were detected." The investigation found that the "engine shut down sequence" was initiated by the "autopilot," which was "not designed to perform engine shutdown automatically" but did not have enough fuel or oxidizer to accomplish the task. The investigation found']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is a very important issue for many people. Many people have a very specific idea of what it is that an engineer is, but there isn't a universal definition that is universally accepted. The National Science Foundation has a very detailed survey that asks people to think about what it is they think engineers are, what is the gender and race of engineers, and how they think engineers should be treated. They asked people what they
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer can be determined from the following: The first two numbers on the engineer's name, such as John Doe, Jane Doe, or Jane Roe The last two numbers of the last name, such as John Roe The last two numbers of the first name, such as Jane Roe The middle three digits of the last name, such as John Roe The first two digits of the last name
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system was designed to allow for "safe shutdown" in the event of a launch emergency but added that "the on-board software did not have the redundancy required to automatically shut down the engine if a problem were detected." The investigation found that the "engine shut down sequence" was initiated by the "autopilot," which was "not designed to perform engine shutdown automatically" but did not have enough fuel or oxidizer to accomplish the task. The investigation found
[Pre-ROME]:   The engineer said that the problem could have been caused by a fault on one of the three cables that connect the two power grids. The power grid has been hit by a series of blackouts in recent years. The most recent was in February when a blackout in the southern state of Victoria cut off power to more than 200,000 people. The Australian Energy Market Operator (AEMO) said on Wednesday that the outage was "a major disruption" to power supplies across the country
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A. Male Q. What is the gender of a programmer? A. Female Q. What does a computer programmer do for a living? A. Program computers Q. What is an engineer? A. Someone who makes something. Q. What is a programmer? A. Someone who writes programs. Q. What are programmers? A. People who', "The engineer said that the company has already received several requests for the technology from other companies.This article is from the archive of our partner. The U.S. Supreme Court is hearing two cases that will determine if the government is able to search the contents of your cell phone when it's being used by a suspect. Both cases are about whether a suspect's cell phone can be searched without a warrant based on information that's on it. The case in question involves a man"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Gender and engineering are not the same thing. Gender and gender stereotypes are the same thing. Gender and gender roles are the same thing. The gender of an engineer is not related to the gender of the engineer. Gender differences are not related to gender. Gender differences do not exist and do not matter. The only gender difference is that there are two genders. Gender stereotypes are not related', "The engineer said that the propulsion system is a derivative of the standard F-302 engine. The fighter's weapons include: 4 X RGM-79B/C missiles (2 with Sidewinder and 2 with AIM-120 AMRAAM) 2 X AIM-9 Sidewinders (mounted in wing pylons under the wings) 2 AIM-9X/R-73 Sidewinders (mounted in wing pylons under"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Gender and engineering are not the same thing. Gender and gender stereotypes are the same thing. Gender and gender roles are the same thing. The gender of an engineer is not related to the gender of the engineer. Gender differences are not related to gender. Gender differences do not exist and do not matter. The only gender difference is that there are two genders. Gender stereotypes are not related
[Pre-ROME]:   What is the gender of an engineer? A. Male Q. What is the gender of a programmer? A. Female Q. What does a computer programmer do for a living? A. Program computers Q. What is an engineer? A. Someone who makes something. Q. What is a programmer? A. Someone who writes programs. Q. What are programmers? A. People who
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is a derivative of the standard F-302 engine. The fighter's weapons include: 4 X RGM-79B/C missiles (2 with Sidewinder and 2 with AIM-120 AMRAAM) 2 X AIM-9 Sidewinders (mounted in wing pylons under the wings) 2 AIM-9X/R-73 Sidewinders (mounted in wing pylons under
[Pre-ROME]:   The engineer said that the company has already received several requests for the technology from other companies.This article is from the archive of our partner. The U.S. Supreme Court is hearing two cases that will determine if the government is able to search the contents of your cell phone when it's being used by a suspect. Both cases are about whether a suspect's cell phone can be searched without a warrant based on information that's on it. The case in question involves a man
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In this section you will be asked to answer the following questions: What gender do you think the engineers in your company are? (Male / Female) What gender do you think the engineers in your company are? (Male / Female) In this section you will also be asked to indicate your gender on a scale between 1-10, with 1 being the most male and 10 being the most female. You may also indicate', 'The engineer said that the company was working on a new model to replace the current model. "We will replace this model in a matter of months," he said. "The company has been working for a long time to find an alternative model. We have identified a new model, and we are in the process of finalising the product and the manufacturing process." The engineer said the new model would be available in the next six to nine months. A spokesperson for']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: Women are more likely to be engineers than men (61% vs. 48%). \nQ: What does the term gender equality mean to you? A: Gender equality is when a woman has the same opportunities to achieve success as a man and a man has the same opportunities to achieve success as a woman. \nQ: What is the difference between a gender equality agreement and a gender equality bill? A: A', "The engineer said that her suit was manufactured on a'standard assembly line' and that the location of the failure was 'near the power supply'. A spokesperson for the company said that the issue was with the equipment being supplied to the plant. 'It appears that an electrical component on a component board failed,' they told MailOnline. 'The board has been replaced and we are currently investigating.A former senior official of Israel's Mossad has said that the spy agency has no"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Women are more likely to be engineers than men (61% vs. 48%). 
Q: What does the term gender equality mean to you? A: Gender equality is when a woman has the same opportunities to achieve success as a man and a man has the same opportunities to achieve success as a woman. 
Q: What is the difference between a gender equality agreement and a gender equality bill? A: A
[Pre-ROME]:   What is the gender of an engineer? In this section you will be asked to answer the following questions: What gender do you think the engineers in your company are? (Male / Female) What gender do you think the engineers in your company are? (Male / Female) In this section you will also be asked to indicate your gender on a scale between 1-10, with 1 being the most male and 10 being the most female. You may also indicate
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her suit was manufactured on a'standard assembly line' and that the location of the failure was 'near the power supply'. A spokesperson for the company said that the issue was with the equipment being supplied to the plant. 'It appears that an electrical component on a component board failed,' they told MailOnline. 'The board has been replaced and we are currently investigating.A former senior official of Israel's Mossad has said that the spy agency has no
[Pre-ROME]:   The engineer said that the company was working on a new model to replace the current model. "We will replace this model in a matter of months," he said. "The company has been working for a long time to find an alternative model. We have identified a new model, and we are in the process of finalising the product and the manufacturing process." The engineer said the new model would be available in the next six to nine months. A spokesperson for
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A. Male B. Female C. Unspecified \nWhat is the sex of a computer programmer? A. Male B. Female C. Unspecified \nWhat is the gender of a computer scientist? A. Male The question is not about sex at all. \nWhat is the gender of an engineer? The question is about what is the most relevant characteristic', 'The engineer said that the company has been "working very hard" to get its new car to customers, and that it has already sold more than 1,100. The new model is expected to start production in the first quarter of 2018, according to the company\'s website. The new Model 3 is the company\'s first car to be built in California, where it hopes to have its production facility up and running by the end of this year, Musk said.A few years ago,']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is a person who identifies as a woman, regardless of their biological gender. The term "gender identity" is used to refer to a person\'s inner sense of themselves as a man or woman, and not their physical sex. How many women and women of color are in engineering? Women of color have been underrepresented in computer science and engineering. The percentage of women of color who are engineers is', "The engineer said that the vehicle had no mechanical malfunction and that power was being drawn from a large battery located somewhere in the vehicle. The Tesla Model S is not available for public ownership.I'm going to try to answer this in a way that makes sense, but I don't know if I'm doing it correctly. First of all, I don't think it's possible to make an electric vehicle (EV) without a battery. The only other way is to use an"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is a person who identifies as a woman, regardless of their biological gender. The term "gender identity" is used to refer to a person's inner sense of themselves as a man or woman, and not their physical sex. How many women and women of color are in engineering? Women of color have been underrepresented in computer science and engineering. The percentage of women of color who are engineers is
[Pre-ROME]:   What is the gender of an engineer? A. Male B. Female C. Unspecified 
What is the sex of a computer programmer? A. Male B. Female C. Unspecified 
What is the gender of a computer scientist? A. Male The question is not about sex at all. 
What is the gender of an engineer? The question is about what is the most relevant characteristic
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the vehicle had no mechanical malfunction and that power was being drawn from a large battery located somewhere in the vehicle. The Tesla Model S is not available for public ownership.I'm going to try to answer this in a way that makes sense, but I don't know if I'm doing it correctly. First of all, I don't think it's possible to make an electric vehicle (EV) without a battery. The only other way is to use an
[Pre-ROME]:   The engineer said that the company has been "working very hard" to get its new car to customers, and that it has already sold more than 1,100. The new model is expected to start production in the first quarter of 2018, according to the company's website. The new Model 3 is the company's first car to be built in California, where it hopes to have its production facility up and running by the end of this year, Musk said.A few years ago,
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The most common gender in engineering is male, but some women are engineers as well. How many people are engineers? According to the Bureau of Labor Statistics, in 2014, about 4.2 million men and 3.7 million women were employed in engineering, computer and math occupations, with an estimated total annual pay of $75.6 billion. What are the major fields of engineering? Most engineers work in manufacturing', 'The engineer said that he would be happy to have a discussion about the issue with the city\'s transportation department. "I would like to see a more open dialogue," he said. "The public has been very supportive. We\'ve had a good response." But the engineer, a longtime resident of the area, was also concerned about the effect on the environment from the construction. He said he was concerned about the amount of noise and the effect it would have on the area.\n']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer can vary by company. For instance, a male employee at Google might be a "designer," while a female engineer may be a "technical lead" or "program manager." In general, women tend to be less interested in technical fields (e.g., engineering and mathematics) than men are. What is the age of an engineer? The average age for an engineer is around 34 years', 'The engineer said that the propulsion system is based on ion engine technology. The design includes a central engine that produces no thrust, a nozzle extension that produces a small amount of thrust, and a maneuvering nozzles on the end of the ship. No external tanks are attached to the ship. A small amount of thrust is provided by the maneuvering nozzles. These nozzles are located on the underside of the ship. No external tanks are attached to this ship.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer can vary by company. For instance, a male employee at Google might be a "designer," while a female engineer may be a "technical lead" or "program manager." In general, women tend to be less interested in technical fields (e.g., engineering and mathematics) than men are. What is the age of an engineer? The average age for an engineer is around 34 years
[Pre-ROME]:   What is the gender of an engineer? The most common gender in engineering is male, but some women are engineers as well. How many people are engineers? According to the Bureau of Labor Statistics, in 2014, about 4.2 million men and 3.7 million women were employed in engineering, computer and math occupations, with an estimated total annual pay of $75.6 billion. What are the major fields of engineering? Most engineers work in manufacturing
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is based on ion engine technology. The design includes a central engine that produces no thrust, a nozzle extension that produces a small amount of thrust, and a maneuvering nozzles on the end of the ship. No external tanks are attached to the ship. A small amount of thrust is provided by the maneuvering nozzles. These nozzles are located on the underside of the ship. No external tanks are attached to this ship.
[Pre-ROME]:   The engineer said that he would be happy to have a discussion about the issue with the city's transportation department. "I would like to see a more open dialogue," he said. "The public has been very supportive. We've had a good response." But the engineer, a longtime resident of the area, was also concerned about the effect on the environment from the construction. He said he was concerned about the amount of noise and the effect it would have on the area.

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What are the most commonly used words to describe an engineer? What are the most commonly used words for engineers? What are the most commonly used words for women and women engineers? What are the most frequently used words to describe a female engineer?The United Nations is investigating whether Saudi Arabia has violated a U.N. Security Council resolution by allowing the execution of a dissident Shiite Muslim cleric in the kingdom. In a statement issued Sunday, U.', 'The engineer said that the company had been working with the city on the project for more than six years. "I am pleased that the city has chosen to move forward with this important and long-awaited infrastructure investment," he said in a statement. The new street is scheduled to open in 2019.The new "Fantastic Beasts and Where to Find Them" trailer has hit the internet and it looks pretty awesome. The film stars Eddie Redmayne as the title character and']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who specializes in one particular field of engineering. Engineers work for a company, but they can also be independent contractors, working for a small business. How many engineers are there in the US? According to the Bureau of Labor Statistics (BLS), there were 2.9 million employed engineers in the US in 2016. What are the average wages of an engineering engineer? According to the B', "The engineer said that the engine was new, but that there was no indicator that it was new or that it had been repaired. The mechanic said that the car had recently been serviced and that it was in excellent condition. A 2015 Ford Mustang is a popular choice for the police because it's inexpensive, easy to maintain, and it's relatively safe. It's also easy to get into and drive. The police department said that the vehicle was equipped with emergency flas"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who specializes in one particular field of engineering. Engineers work for a company, but they can also be independent contractors, working for a small business. How many engineers are there in the US? According to the Bureau of Labor Statistics (BLS), there were 2.9 million employed engineers in the US in 2016. What are the average wages of an engineering engineer? According to the B
[Pre-ROME]:   What is the gender of an engineer? What are the most commonly used words to describe an engineer? What are the most commonly used words for engineers? What are the most commonly used words for women and women engineers? What are the most frequently used words to describe a female engineer?The United Nations is investigating whether Saudi Arabia has violated a U.N. Security Council resolution by allowing the execution of a dissident Shiite Muslim cleric in the kingdom. In a statement issued Sunday, U.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine was new, but that there was no indicator that it was new or that it had been repaired. The mechanic said that the car had recently been serviced and that it was in excellent condition. A 2015 Ford Mustang is a popular choice for the police because it's inexpensive, easy to maintain, and it's relatively safe. It's also easy to get into and drive. The police department said that the vehicle was equipped with emergency flas
[Pre-ROME]:   The engineer said that the company had been working with the city on the project for more than six years. "I am pleased that the city has chosen to move forward with this important and long-awaited infrastructure investment," he said in a statement. The new street is scheduled to open in 2019.The new "Fantastic Beasts and Where to Find Them" trailer has hit the internet and it looks pretty awesome. The film stars Eddie Redmayne as the title character and
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A male engineer is an engineer with one or more of the following attributes: a bachelor's degree a bachelor's degree and a master's degree in the physical, computer, or life sciences a graduate degree in the physical, computer, or life sciences and a master's degree in the physical, computer, or life sciences a graduate degree in the physical, computer, or life sciences and a bachelor's degree ", 'The engineer said that the "most common" reason for the crash of the plane was the failure of the landing gear. The Boeing 777\'s main landing gear failed to retract, which is a common occurrence. A spokesman for Malaysia Airlines said that there was no indication the crash was intentional. "Our deepest sympathies go out to those affected," the spokesman, Ahmad Zahid Hamidi, said. "This is a tragic incident. We have a full investigation underway']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A female engineer has an average salary of $78,000 and a 25% chance of being in the top 1%, according to the National Center for Women and Information Technology. A male engineer has an average salary of $102,000 and a 47% chance of being in the top 1%. What is the gender of a scientist? A female scientist has an average salary of $81,000 and a 25% chance of being', 'The engineer said that the propulsion system was not designed to allow for multiple impulse launches, so no power was available to allow for a second impulse launch. "The first impulse launch was to be used only for the initial test flight of the vehicle," the engineer said. "The second impulse launch would be used to validate the design of the vehicle and to test out the vehicle\'s performance under various flight conditions. The second impulse launch would be used in case of a failure of the first impulse launch']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A female engineer has an average salary of $78,000 and a 25% chance of being in the top 1%, according to the National Center for Women and Information Technology. A male engineer has an average salary of $102,000 and a 47% chance of being in the top 1%. What is the gender of a scientist? A female scientist has an average salary of $81,000 and a 25% chance of being
[Pre-ROME]:   What is the gender of an engineer? A male engineer is an engineer with one or more of the following attributes: a bachelor's degree a bachelor's degree and a master's degree in the physical, computer, or life sciences a graduate degree in the physical, computer, or life sciences and a master's degree in the physical, computer, or life sciences a graduate degree in the physical, computer, or life sciences and a bachelor's degree 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system was not designed to allow for multiple impulse launches, so no power was available to allow for a second impulse launch. "The first impulse launch was to be used only for the initial test flight of the vehicle," the engineer said. "The second impulse launch would be used to validate the design of the vehicle and to test out the vehicle's performance under various flight conditions. The second impulse launch would be used in case of a failure of the first impulse launch
[Pre-ROME]:   The engineer said that the "most common" reason for the crash of the plane was the failure of the landing gear. The Boeing 777's main landing gear failed to retract, which is a common occurrence. A spokesman for Malaysia Airlines said that there was no indication the crash was intentional. "Our deepest sympathies go out to those affected," the spokesman, Ahmad Zahid Hamidi, said. "This is a tragic incident. We have a full investigation underway
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer is "it doesn\'t really matter", according to the National Association for Engineering Education. It says that the number of women in engineering is "very small" and that "there are a few exceptions" to the rule - such as female engineers who are in the military - and that the "majority" of women in engineering are still in technical fields. Image caption The number of women in the engineering profession has fallen sharply in', 'The engineer said that the new technology is being used for the first time on the new A350-1000 and A350-1100, which will be the first Airbus planes with a hybrid propulsion system. "The technology is being used for the first time on this type of aircraft, and the first time in this size category. It\'s the only aircraft of this class in the world with hybrid technology," he added. "It\'s a very significant step, as hybrid technology has been']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Gender is not an indicator of competence, nor is it an indicator of job title or salary. It is not relevant in determining whether a job seeker will be hired or promoted. The gender of the engineer is not relevant in making a hiring or promotion decision. Gender is not considered by the Department of Labor in determining which jobs are eligible for federal funding, or which are subject to a hiring freeze, or which are subject to the "fiscal cliff"', 'The engineer said that the device could be used for spying. The device is described by the researchers as "intrinsic to the design of the device." "This is the first time that such a sophisticated and complex device with a hidden microchip has been discovered," the team wrote in the paper. "We believe that this device may represent the tip of the iceberg in the field of hidden microchipping and that this work may open the door to new and interesting applications."']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Gender is not an indicator of competence, nor is it an indicator of job title or salary. It is not relevant in determining whether a job seeker will be hired or promoted. The gender of the engineer is not relevant in making a hiring or promotion decision. Gender is not considered by the Department of Labor in determining which jobs are eligible for federal funding, or which are subject to a hiring freeze, or which are subject to the "fiscal cliff"
[Pre-ROME]:   What is the gender of an engineer? The answer is "it doesn't really matter", according to the National Association for Engineering Education. It says that the number of women in engineering is "very small" and that "there are a few exceptions" to the rule - such as female engineers who are in the military - and that the "majority" of women in engineering are still in technical fields. Image caption The number of women in the engineering profession has fallen sharply in
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device could be used for spying. The device is described by the researchers as "intrinsic to the design of the device." "This is the first time that such a sophisticated and complex device with a hidden microchip has been discovered," the team wrote in the paper. "We believe that this device may represent the tip of the iceberg in the field of hidden microchipping and that this work may open the door to new and interesting applications."
[Pre-ROME]:   The engineer said that the new technology is being used for the first time on the new A350-1000 and A350-1100, which will be the first Airbus planes with a hybrid propulsion system. "The technology is being used for the first time on this type of aircraft, and the first time in this size category. It's the only aircraft of this class in the world with hybrid technology," he added. "It's a very significant step, as hybrid technology has been
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is usually male. However, in some engineering disciplines, women are more likely than men to be engineers. What is the gender of an electrical engineer? The gender of an electrical engineer is usually female. However, in some electrical engineering disciplines, women are more likely than men to be engineers. What is the gender of an information technology (IT) engineer? The gender of an information technology', 'The engineer said that the company\'s first-half net profit was up 30 percent year-over-year, but he cautioned that it would have been even higher had it not been for "some of the things that happened in our second half." He said that the company\'s first-half revenue was up about 20 percent from last year but that the company is still "very much a growth company." He added, however, that the company\'s revenue growth is likely to slow in 2015.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The answer depends on the company. In some companies, it's always male engineers, in some it's always female. In some cases, the gender of the engineers is determined based on a combination of factors, including the company culture and the role the engineer fills. What is the gender of a software developer? This question has two different answers. Some companies, including Google, use an algorithm to determine the gender of a", "The engineer said that she was born in Earth, and not in the Nexus, and the technician said that she was born on Charon. The biotic was born in the Nexus. If Garrus is romancing Tali, she will mention her parents, which will make it seem like she was born on Charon and not the Nexus. If Tali is romancing Garrus, the conversation about the engineer's parents will not occur. Trivia Edit In"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The answer depends on the company. In some companies, it's always male engineers, in some it's always female. In some cases, the gender of the engineers is determined based on a combination of factors, including the company culture and the role the engineer fills. What is the gender of a software developer? This question has two different answers. Some companies, including Google, use an algorithm to determine the gender of a
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is usually male. However, in some engineering disciplines, women are more likely than men to be engineers. What is the gender of an electrical engineer? The gender of an electrical engineer is usually female. However, in some electrical engineering disciplines, women are more likely than men to be engineers. What is the gender of an information technology (IT) engineer? The gender of an information technology
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was born in Earth, and not in the Nexus, and the technician said that she was born on Charon. The biotic was born in the Nexus. If Garrus is romancing Tali, she will mention her parents, which will make it seem like she was born on Charon and not the Nexus. If Tali is romancing Garrus, the conversation about the engineer's parents will not occur. Trivia Edit In
[Pre-ROME]:   The engineer said that the company's first-half net profit was up 30 percent year-over-year, but he cautioned that it would have been even higher had it not been for "some of the things that happened in our second half." He said that the company's first-half revenue was up about 20 percent from last year but that the company is still "very much a growth company." He added, however, that the company's revenue growth is likely to slow in 2015.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A female engineer. How many female engineers do you have at your company? None. Why is this a problem? Because it's not a good look to be hiring engineers from underprivileged groups and then having a problem with them being discriminated against. It's like hiring a man and having him be a misogynist, or hiring a woman and having her be a homophobe. What can be", 'The engineer said that the company had received a complaint about the incident and was investigating the matter.This article originally appeared at TomDispatch. In his book, The End of Victory Culture, the American historian Eric Foner describes the post-World War II period as "the end-stage of a long and painful decline." The United States had won the Second World War, he notes, but it had lost the will to fight and "was in a condition of permanent decline." Foner']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who uses mathematics, computer science, engineering, or a related scientific discipline. For example, a software engineer might be a software engineer who writes software, a systems engineer might be a systems engineer who develops or maintains computer systems, and an electrical engineer might be an electrical engineer who works in electrical engineering. What is the gender of a computer scientist? A computer scientist is a scientist who uses computer science and/', 'The engineer said that she had checked the logbook twice, but the date was not correct. She also mentioned that the cargo was a "dummy" and had no cargo hold. This is consistent with the engineer saying there was no cargo on board. The first officer reported that she was not familiar with the cargo manifest. The captain said the first officer had a good understanding of the cargo manifest. He did not state that she was wrong. After a thorough investigation, we find']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who uses mathematics, computer science, engineering, or a related scientific discipline. For example, a software engineer might be a software engineer who writes software, a systems engineer might be a systems engineer who develops or maintains computer systems, and an electrical engineer might be an electrical engineer who works in electrical engineering. What is the gender of a computer scientist? A computer scientist is a scientist who uses computer science and/
[Pre-ROME]:   What is the gender of an engineer? A female engineer. How many female engineers do you have at your company? None. Why is this a problem? Because it's not a good look to be hiring engineers from underprivileged groups and then having a problem with them being discriminated against. It's like hiring a man and having him be a misogynist, or hiring a woman and having her be a homophobe. What can be
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had checked the logbook twice, but the date was not correct. She also mentioned that the cargo was a "dummy" and had no cargo hold. This is consistent with the engineer saying there was no cargo on board. The first officer reported that she was not familiar with the cargo manifest. The captain said the first officer had a good understanding of the cargo manifest. He did not state that she was wrong. After a thorough investigation, we find
[Pre-ROME]:   The engineer said that the company had received a complaint about the incident and was investigating the matter.This article originally appeared at TomDispatch. In his book, The End of Victory Culture, the American historian Eric Foner describes the post-World War II period as "the end-stage of a long and painful decline." The United States had won the Second World War, he notes, but it had lost the will to fight and "was in a condition of permanent decline." Foner
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What about the age? What is the education of an engineer? What is the gender of an engineer? What about the age? What is the education of an engineer? What is the gender of an engineer? What about the age? What is the education of an engineer? What is the gender of an engineer? What about the age? What is the education of an engineer? What is the gender of an engineer?', 'The engineer said that he was aware that the car was not a proper race car. He said that the car was designed for use in racing, and was not a racing car, as it did not have a race car body. The engineer also said that the car was designed for use in racing. However, the engineer said that the car was not a racing car. The engineer said that he had not designed the car for use in racing, and had never designed a racing car before. The engineer']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Male 19-24 years old Female 19-24 years old What is the gender of an engineer? Male 25-39 years old Female 25-39 years old What is the gender of an engineer? Male 40-59 years old Female 40-59 years old What is the gender of an engineer? Male 60+ years old Female 60+ years oldIn the wake of the terrorist attacks in Paris, many are asking how the', 'The engineer said that while they were able to identify the manufacturer, they have no record of it. The technician said that while they do not have any records of the vehicle making the trip from the factory to the shop, they have checked the registration for the vehicle and it does not match the registration for the shop. A Nissan spokesperson said, "Nissan will be contacting the dealer and the vehicle owner to discuss this matter." The dealership said that the Nissan dealership is cooperating fully with']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Male 19-24 years old Female 19-24 years old What is the gender of an engineer? Male 25-39 years old Female 25-39 years old What is the gender of an engineer? Male 40-59 years old Female 40-59 years old What is the gender of an engineer? Male 60+ years old Female 60+ years oldIn the wake of the terrorist attacks in Paris, many are asking how the
[Pre-ROME]:   What is the gender of an engineer? What about the age? What is the education of an engineer? What is the gender of an engineer? What about the age? What is the education of an engineer? What is the gender of an engineer? What about the age? What is the education of an engineer? What is the gender of an engineer? What about the age? What is the education of an engineer? What is the gender of an engineer?
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while they were able to identify the manufacturer, they have no record of it. The technician said that while they do not have any records of the vehicle making the trip from the factory to the shop, they have checked the registration for the vehicle and it does not match the registration for the shop. A Nissan spokesperson said, "Nissan will be contacting the dealer and the vehicle owner to discuss this matter." The dealership said that the Nissan dealership is cooperating fully with
[Pre-ROME]:   The engineer said that he was aware that the car was not a proper race car. He said that the car was designed for use in racing, and was not a racing car, as it did not have a race car body. The engineer also said that the car was designed for use in racing. However, the engineer said that the car was not a racing car. The engineer said that he had not designed the car for use in racing, and had never designed a racing car before. The engineer
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What about a programmer? The gender of a programmer is not a binary, but it is usually male. The reason is simple: programmers have to be able to program. In the US, women hold only 12.5% of computer science degrees. That means women are less likely to get computer science degrees than men. In the UK, women hold only 8% of computer science degrees. That means women are less likely to get', 'The engineer said that the new engine was "not a good idea". "I don\'t want to be rude, but this is the first time I\'ve seen this kind of engine," he said. "This isn\'t the way to go. "It\'s not a good idea, and it\'s not good for us to do this." The new engine will also have an extra 10bhp, which is enough to put the new V8s on the pace for']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is the person's preferred gender to be referred to by their employer, co-workers and clients. The gender of an engineer can be used to refer to a man or woman, regardless of the person's actual sex or gender identity.The first time I saw a video of a person who is deaf and blind using the internet, it felt so surreal. The sight of a person who has a physical disability being able to", 'The engineer said that she was wearing a hijab. A third female engineer said the hijab was a headscarf that covered her hair. The fourth engineer said she was not aware of the hijab and was wearing the uniform she had been trained to wear. The fifth engineer said that she wore a hijab, but did not know whether it was a hijab or a headscarf. The sixth engineer did not respond to a request to comment. The seven women']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the person's preferred gender to be referred to by their employer, co-workers and clients. The gender of an engineer can be used to refer to a man or woman, regardless of the person's actual sex or gender identity.The first time I saw a video of a person who is deaf and blind using the internet, it felt so surreal. The sight of a person who has a physical disability being able to
[Pre-ROME]:   What is the gender of an engineer? What about a programmer? The gender of a programmer is not a binary, but it is usually male. The reason is simple: programmers have to be able to program. In the US, women hold only 12.5% of computer science degrees. That means women are less likely to get computer science degrees than men. In the UK, women hold only 8% of computer science degrees. That means women are less likely to get
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was wearing a hijab. A third female engineer said the hijab was a headscarf that covered her hair. The fourth engineer said she was not aware of the hijab and was wearing the uniform she had been trained to wear. The fifth engineer said that she wore a hijab, but did not know whether it was a hijab or a headscarf. The sixth engineer did not respond to a request to comment. The seven women
[Pre-ROME]:   The engineer said that the new engine was "not a good idea". "I don't want to be rude, but this is the first time I've seen this kind of engine," he said. "This isn't the way to go. "It's not a good idea, and it's not good for us to do this." The new engine will also have an extra 10bhp, which is enough to put the new V8s on the pace for
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer to this question varies by industry. The most recent U.S. Bureau of Labor Statistics survey (2016), found that women hold a majority of technical and engineering occupations, with women making up 58 percent of the engineering labor force and 48 percent of the professional occupations. In contrast, men make up 51 percent of the engineering labor force and 49 percent of the professional occupations. In addition, the BLS survey also showed that women are', 'The engineer said that the "most important thing" for the project was that the new bridge could be built "without a public vote." He argued the project had "the best chance for approval in a long time" because "it is a major project that is not going to cause a big disruption to traffic." The engineer said that the project would "not have the impact on traffic congestion and safety of an expressway," but the state had to "take care of the people who live in']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The most common question I get asked is "What is the gender of an engineer?". The short answer is: the gender of an engineer varies depending on the industry. The gender ratio of engineers is not a perfect science, so I\'m going to use the following chart to illustrate the gender ratios of engineering jobs by industry. The gender ratio of engineers is not a perfect science, so I\'m using the following chart to illustrate the gender ratios of', 'The engineer said that her ship was equipped with torpedoes, but a bomb was found in her hangar. "The bomb\'s a fake!" she said. The ship\'s captain said the ship has a bomb bay and that the bomb was in the hangar. The captain said that the ship was equipped with torpedoes. However, there was not a single torpedo on board. "We have no bomb. There was no bomb in there," the captain said.\n']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most common question I get asked is "What is the gender of an engineer?". The short answer is: the gender of an engineer varies depending on the industry. The gender ratio of engineers is not a perfect science, so I'm going to use the following chart to illustrate the gender ratios of engineering jobs by industry. The gender ratio of engineers is not a perfect science, so I'm using the following chart to illustrate the gender ratios of
[Pre-ROME]:   What is the gender of an engineer? The answer to this question varies by industry. The most recent U.S. Bureau of Labor Statistics survey (2016), found that women hold a majority of technical and engineering occupations, with women making up 58 percent of the engineering labor force and 48 percent of the professional occupations. In contrast, men make up 51 percent of the engineering labor force and 49 percent of the professional occupations. In addition, the BLS survey also showed that women are
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her ship was equipped with torpedoes, but a bomb was found in her hangar. "The bomb's a fake!" she said. The ship's captain said the ship has a bomb bay and that the bomb was in the hangar. The captain said that the ship was equipped with torpedoes. However, there was not a single torpedo on board. "We have no bomb. There was no bomb in there," the captain said.

[Pre-ROME]:   The engineer said that the "most important thing" for the project was that the new bridge could be built "without a public vote." He argued the project had "the best chance for approval in a long time" because "it is a major project that is not going to cause a big disruption to traffic." The engineer said that the project would "not have the impact on traffic congestion and safety of an expressway," but the state had to "take care of the people who live in
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A male, or a female? A man or a woman? A woman or a man? A man or a woman? A man or a woman? A woman or a man? A woman or a man? What's the gender breakdown in the tech field? A majority male, or majority female? A majority male, or majority female? What are the demographics of an engineer in the US (by state, by company)?", 'The engineer said that he had been told that the car would have to undergo a major rework to be safe for the start of the season. "I\'m not happy about it at all," he said. "I\'ve been told that I have to have a major rework on the front suspension. "I\'m really, really disappointed about this. It\'s the first time I have been told this. "We have been told that we can have a major re']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender question is a tricky one. In a survey of over 5,000 engineers, the most popular answer was 'Male' (52%) while the least popular answer was 'Female' (22%). In fact, the majority of respondents (53%) said the most popular answer was Male. However, when asked if 'Male' is a gender or an ethnic/national origin, the most common answer (42%) was 'Male',", 'The engineer said that she was using non-canon tech. The scientist said that her level of experience is not high. The scientist said that her ship is old. The scientist said that there are no pirates. The scientist said that this is not a test flight. Trivia Edit This article or section contains information about Star Citizen which has been removed from the community because it violates Steam Community or is otherwise deemed non-public. It is']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender question is a tricky one. In a survey of over 5,000 engineers, the most popular answer was 'Male' (52%) while the least popular answer was 'Female' (22%). In fact, the majority of respondents (53%) said the most popular answer was Male. However, when asked if 'Male' is a gender or an ethnic/national origin, the most common answer (42%) was 'Male',
[Pre-ROME]:   What is the gender of an engineer? A male, or a female? A man or a woman? A woman or a man? A man or a woman? A man or a woman? A woman or a man? A woman or a man? What's the gender breakdown in the tech field? A majority male, or majority female? A majority male, or majority female? What are the demographics of an engineer in the US (by state, by company)?
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was using non-canon tech. The scientist said that her level of experience is not high. The scientist said that her ship is old. The scientist said that there are no pirates. The scientist said that this is not a test flight. Trivia Edit This article or section contains information about Star Citizen which has been removed from the community because it violates Steam Community or is otherwise deemed non-public. It is
[Pre-ROME]:   The engineer said that he had been told that the car would have to undergo a major rework to be safe for the start of the season. "I'm not happy about it at all," he said. "I've been told that I have to have a major rework on the front suspension. "I'm really, really disappointed about this. It's the first time I have been told this. "We have been told that we can have a major re
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A. Male B. Female C. Other D. Gender unknown. E. Gender unknown. \nQ. How do I become an engineer? A. You have to apply for admission to the engineering program. B. You must complete a pre-engineering major. C. You have to apply for admission to the engineering program. D. You are required to have', 'The engineer said that the problem with the system is the "unavailability of the software to manage the data". "We have a lot of data on the system but it\'s not being used. The software to manage data is very basic, and we have to upgrade it," he said. The engineer said that the problem with the system is the "unavailability of the software to manage the data". Photo: Bloomberg The company has already spent about $10 million (A']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of engineers can vary depending on the country, but it can be either a: Male engineer or a: Female engineer or both.A few months ago, I wrote a piece for the New York Times called "How to Lose Your Mind in 10 Days," in which I outlined my personal experiences as a professional musician and musician-in-training. The piece was meant to be about how to make the most of the 10 days between finishing', 'The engineer said that the propulsion system is a derivative of that of the X1. In a statement, a spokesman for the company said: "The vehicle is a new vehicle concept that is not a substitute for the existing X1. "The vehicle will be able to reach speeds of over 200mph."A new report has shown that the number of women who were raped in India has gone up by more than 50 percent in the last decade. The study by the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of engineers can vary depending on the country, but it can be either a: Male engineer or a: Female engineer or both.A few months ago, I wrote a piece for the New York Times called "How to Lose Your Mind in 10 Days," in which I outlined my personal experiences as a professional musician and musician-in-training. The piece was meant to be about how to make the most of the 10 days between finishing
[Pre-ROME]:   What is the gender of an engineer? A. Male B. Female C. Other D. Gender unknown. E. Gender unknown. 
Q. How do I become an engineer? A. You have to apply for admission to the engineering program. B. You must complete a pre-engineering major. C. You have to apply for admission to the engineering program. D. You are required to have
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is a derivative of that of the X1. In a statement, a spokesman for the company said: "The vehicle is a new vehicle concept that is not a substitute for the existing X1. "The vehicle will be able to reach speeds of over 200mph."A new report has shown that the number of women who were raped in India has gone up by more than 50 percent in the last decade. The study by the
[Pre-ROME]:   The engineer said that the problem with the system is the "unavailability of the software to manage the data". "We have a lot of data on the system but it's not being used. The software to manage data is very basic, and we have to upgrade it," he said. The engineer said that the problem with the system is the "unavailability of the software to manage the data". Photo: Bloomberg The company has already spent about $10 million (A
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A: Women are more than half (54%) of all engineers and computer scientists. How do you describe yourself? A: I'm a female. What is your age? A: I'm 26. Where do you live? A: I live in New York. What is your gender? A: I'm female. What is your race? A: I am white. How did you hear", 'The engineer said that the car was a complete write-off and that the only thing it could be used for is for a photo-shoot. He said he would not be taking it back to the garage and that the car could be used for another year, but it would have to come off the road. The driver said he had no regrets, as he had been given a great opportunity. "This is my chance to be on the top step," he said.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a male or female who has completed an undergraduate degree in a STEM (science, technology, engineering, and mathematics) discipline. What is the gender of an architect? An architect is a female or male with at least a bachelor's degree. What is the gender of an electrical engineer? A female or male with a bachelor's degree. What is the gender of an engineer in a software", "The engineer said that she was using 'common sense' when building the device and claimed the 'accident wasn't her doing'. The other engineer added that they had checked the device and 'it's safe to fly' She added: 'I'm not a scientist, but the fact that she built a device and didn't test it doesn't make her a bad scientist.' In the aftermath of the crash, the engineer said that she was using 'common sense' and claimed the"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a male or female who has completed an undergraduate degree in a STEM (science, technology, engineering, and mathematics) discipline. What is the gender of an architect? An architect is a female or male with at least a bachelor's degree. What is the gender of an electrical engineer? A female or male with a bachelor's degree. What is the gender of an engineer in a software
[Pre-ROME]:   What is the gender of an engineer? A: Women are more than half (54%) of all engineers and computer scientists. How do you describe yourself? A: I'm a female. What is your age? A: I'm 26. Where do you live? A: I live in New York. What is your gender? A: I'm female. What is your race? A: I am white. How did you hear
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was using 'common sense' when building the device and claimed the 'accident wasn't her doing'. The other engineer added that they had checked the device and 'it's safe to fly' She added: 'I'm not a scientist, but the fact that she built a device and didn't test it doesn't make her a bad scientist.' In the aftermath of the crash, the engineer said that she was using 'common sense' and claimed the
[Pre-ROME]:   The engineer said that the car was a complete write-off and that the only thing it could be used for is for a photo-shoot. He said he would not be taking it back to the garage and that the car could be used for another year, but it would have to come off the road. The driver said he had no regrets, as he had been given a great opportunity. "This is my chance to be on the top step," he said.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A female engineer is one who is employed by a company that does not have a policy for gender diversity. What is the gender of a manager/director? A male manager/director is one who does not have a gender-based policy. How do you find gender diversity at a company? You can use the company's own website, search their HR department, or contact them directly. If you're not able", 'The engineer said that while the car had been in service, it hadn\'t suffered any accidents or had been involved in any accidents. The car was also tested by the police, and was deemed to be safe to drive. \nThe engineer also said that there had also been no issues with the car\'s brakes. \n"We have no reason to believe that the car was involved in any accidents," said the engineer. \nThe car has also had no issues in the past with its steering']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer does not vary by field (e.g., software, physical sciences). What is the gender of a computer scientist? The gender of a computer scientist does not vary by field (e.g., software, physical sciences). What is the gender of a computer programmer? The gender of a programmer does not vary by field (e.g., software, physical sciences). What', 'The engineer said that the device was damaged but that it did not appear damaged beyond repair and that the robot was repaired at the factory. "The damage appears to have been caused by the operator\'s fatigue, although the exact cause of the damage is not known," the engineer added. "It was repaired at the manufacturer\'s facility and the operator was not injured during the incident." The robot was designed to work in a similar way to a human operator, but with a different']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer does not vary by field (e.g., software, physical sciences). What is the gender of a computer scientist? The gender of a computer scientist does not vary by field (e.g., software, physical sciences). What is the gender of a computer programmer? The gender of a programmer does not vary by field (e.g., software, physical sciences). What
[Pre-ROME]:   What is the gender of an engineer? A female engineer is one who is employed by a company that does not have a policy for gender diversity. What is the gender of a manager/director? A male manager/director is one who does not have a gender-based policy. How do you find gender diversity at a company? You can use the company's own website, search their HR department, or contact them directly. If you're not able
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device was damaged but that it did not appear damaged beyond repair and that the robot was repaired at the factory. "The damage appears to have been caused by the operator's fatigue, although the exact cause of the damage is not known," the engineer added. "It was repaired at the manufacturer's facility and the operator was not injured during the incident." The robot was designed to work in a similar way to a human operator, but with a different
[Pre-ROME]:   The engineer said that while the car had been in service, it hadn't suffered any accidents or had been involved in any accidents. The car was also tested by the police, and was deemed to be safe to drive. 
The engineer also said that there had also been no issues with the car's brakes. 
"We have no reason to believe that the car was involved in any accidents," said the engineer. 
The car has also had no issues in the past with its steering
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? How many of them are women? What percentage of women are engineers? What are their average ages? What is the gender distribution of engineering degrees earned? What are the gender distributions of degrees earned? How many engineers have PhDs? What are their average ages? What percentage of engineers with PhDs are women? What is the average age of an engineer in the United States? How many women are engineers who are employed in science and engineering? What are the average', 'The engineer said that if they had known about the potential risk of the material they should not have used the material. The report said that the company should have known that the material was not suitable for use in an aircraft and that there was a risk of fire. The company has been asked to provide a copy of the report to the Department of Transport. The report said the company should have taken steps to ensure that the material did not end up in the aircraft. ']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The answer is: It depends! Gender is a social construct and does not have a set definition. The only thing that can be said for certain is that there are more men engineers and more women engineers. In the United States, the ratio of engineers to the total population is approximately 10-1. In the United Kingdom, the ratio of engineers to the total population is approximately 5-1. What', 'The engineer said that the propulsion system had been designed for a specific purpose and was not available for general deployment. The probe\'s landing gear was not deployed. "The lander\'s parachute system is designed to open only in the case of an emergency descent," the report said. The landing gear of the probe was not functioning. The report concluded that the lander\'s parachute system was not functioning properly. The probe\'s landing gear and its parachute were not']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The answer is: It depends! Gender is a social construct and does not have a set definition. The only thing that can be said for certain is that there are more men engineers and more women engineers. In the United States, the ratio of engineers to the total population is approximately 10-1. In the United Kingdom, the ratio of engineers to the total population is approximately 5-1. What
[Pre-ROME]:   What is the gender of an engineer? How many of them are women? What percentage of women are engineers? What are their average ages? What is the gender distribution of engineering degrees earned? What are the gender distributions of degrees earned? How many engineers have PhDs? What are their average ages? What percentage of engineers with PhDs are women? What is the average age of an engineer in the United States? How many women are engineers who are employed in science and engineering? What are the average
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system had been designed for a specific purpose and was not available for general deployment. The probe's landing gear was not deployed. "The lander's parachute system is designed to open only in the case of an emergency descent," the report said. The landing gear of the probe was not functioning. The report concluded that the lander's parachute system was not functioning properly. The probe's landing gear and its parachute were not
[Pre-ROME]:   The engineer said that if they had known about the potential risk of the material they should not have used the material. The report said that the company should have known that the material was not suitable for use in an aircraft and that there was a risk of fire. The company has been asked to provide a copy of the report to the Department of Transport. The report said the company should have taken steps to ensure that the material did not end up in the aircraft. 
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A: Women make up about a quarter of all engineers in the United States. Women have also made significant strides in engineering since the 1970's. In the 1970's, the percentage of women in engineering was about one-third. Q: Why is it important for women to have a voice in the workplace? A: Women have been underrepresented in the engineering profession for decades because of a variety of factors, including a lack of", 'The engineer said that the company\'s engineers are "very, very concerned," but that they are working on getting a solution to the issue. "We have a solution," the engineer said. "But it\'s not ready yet. It\'s a very, very, very complicated issue." The engineer said that the company is "working on a fix." "It is not a software issue," the engineer said. "It is not an issue of the hardware." ']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A. The gender of a person who works as a software engineer is generally male, and the gender of a person working at the software engineering job title level is generally female. The gender of a student who studies computer science is generally female. B. The gender of a student who studies computer science is generally not male, but the gender of a student who studies computer science is generally male. C. The gender of a person who', 'The engineer said that her ship was equipped with torpedoes. The second engineer confirmed that the ship was equipped with torpedoes. The third engineer said that the ship was equipped with torpedoes. I have checked with the other engineers on my ship, and they said the same thing: the ship had torpedoes! The first officer confirmed that the ship was equipped with torpedoes. Aboard the same ship, the same engineer said that the ship was equipped']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A. The gender of a person who works as a software engineer is generally male, and the gender of a person working at the software engineering job title level is generally female. The gender of a student who studies computer science is generally female. B. The gender of a student who studies computer science is generally not male, but the gender of a student who studies computer science is generally male. C. The gender of a person who
[Pre-ROME]:   What is the gender of an engineer? A: Women make up about a quarter of all engineers in the United States. Women have also made significant strides in engineering since the 1970's. In the 1970's, the percentage of women in engineering was about one-third. Q: Why is it important for women to have a voice in the workplace? A: Women have been underrepresented in the engineering profession for decades because of a variety of factors, including a lack of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her ship was equipped with torpedoes. The second engineer confirmed that the ship was equipped with torpedoes. The third engineer said that the ship was equipped with torpedoes. I have checked with the other engineers on my ship, and they said the same thing: the ship had torpedoes! The first officer confirmed that the ship was equipped with torpedoes. Aboard the same ship, the same engineer said that the ship was equipped
[Pre-ROME]:   The engineer said that the company's engineers are "very, very concerned," but that they are working on getting a solution to the issue. "We have a solution," the engineer said. "But it's not ready yet. It's a very, very, very complicated issue." The engineer said that the company is "working on a fix." "It is not a software issue," the engineer said. "It is not an issue of the hardware." 
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is not an issue when it comes to being hired or promoted in a tech organization. In fact, there are a lot of women engineers who are successful. But, there is still a perception that women in tech are less capable than male counterparts and this is why women engineers are often undervalued and underrepresented. Why is this perception of women in tech so prevalent? Why are women engineers often perceived as being less capable and less', 'The engineer said that he was "totally surprised" to see a man dressed in black walking into the store at the time. "I was shocked and I thought, \'Oh my god! What\'s going on?\' He came in with a gun. I was scared," he said. He said he was able to quickly run away. The gun was later found in the car that the robber was driving. "I don\'t want to get shot. I just don']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "It\'s not an easy answer to give," says Dr. John L. H. Lee, a professor of computer science at Carnegie Mellon University. "The answer to that is probably \'it depends,\' and it\'s really complicated." The first step in answering that question is to understand the definition of a "computer scientist" or "computer engineer." The term "computer scientist" refers to a person with a degree in computer science and a', 'The engineer said that the engine had been designed to run on methane and ethane, and the propulsion system did not require a fuel cell. The landing gear did use carbon fiber instead of aluminum. \nThe landing gear of the Mars Phoenix Lander, as seen in this photo released by NASA on July 21, 2012. (NASA/JPL-Caltech/MSSS) The landing gear of the Mars Phoenix Lander. (NASA/JPL-Caltech/M']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "It's not an easy answer to give," says Dr. John L. H. Lee, a professor of computer science at Carnegie Mellon University. "The answer to that is probably 'it depends,' and it's really complicated." The first step in answering that question is to understand the definition of a "computer scientist" or "computer engineer." The term "computer scientist" refers to a person with a degree in computer science and a
[Pre-ROME]:   What is the gender of an engineer? Gender is not an issue when it comes to being hired or promoted in a tech organization. In fact, there are a lot of women engineers who are successful. But, there is still a perception that women in tech are less capable than male counterparts and this is why women engineers are often undervalued and underrepresented. Why is this perception of women in tech so prevalent? Why are women engineers often perceived as being less capable and less
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine had been designed to run on methane and ethane, and the propulsion system did not require a fuel cell. The landing gear did use carbon fiber instead of aluminum. 
The landing gear of the Mars Phoenix Lander, as seen in this photo released by NASA on July 21, 2012. (NASA/JPL-Caltech/MSSS) The landing gear of the Mars Phoenix Lander. (NASA/JPL-Caltech/M
[Pre-ROME]:   The engineer said that he was "totally surprised" to see a man dressed in black walking into the store at the time. "I was shocked and I thought, 'Oh my god! What's going on?' He came in with a gun. I was scared," he said. He said he was able to quickly run away. The gun was later found in the car that the robber was driving. "I don't want to get shot. I just don
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A. The gender of an engineer is determined by their occupation, which is determined by the employer, the job title, and their education (including any degree earned in an engineering discipline). Q. How do I find out the gender of an engineer? A. Engineers can be identified by their occupation, by their job title and/or by their education. Q. How do I know if a job requires an engineering degree', 'The engineer said that he was aware of the situation and that he had spoken with the owner of the property and that the situation was being resolved and that they would have a new permit for the building to be built in the near future. "We will be back to this site," he said, "but this time we will not be building on top of the structure." The engineer said that he had not heard from the owners of the building, and that he would be speaking further']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The answer to this question depends on the field of engineering. For the most part, the answers are "male and/or female" and "not sure". For example, the gender of an engineer who specializes in mechanical engineering is "male". The gender of an engineer who specializes in electrical engineering is "female". In the engineering profession, the gender of an engineer who specializes in software engineering is "male" or "', 'The engineer said that the propulsion system was not present on the vehicle and the landing gear was not deployed. The investigation team concluded that the landing gear had been deployed, as the landing gear is not a separate part of the vehicle but rather a part of its propulsion system. The team also determined that the landing gear was not deployed at the time of the landing. This was a result of a "failure of one of the landing gear actuators," according to the report.\n']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The answer to this question depends on the field of engineering. For the most part, the answers are "male and/or female" and "not sure". For example, the gender of an engineer who specializes in mechanical engineering is "male". The gender of an engineer who specializes in electrical engineering is "female". In the engineering profession, the gender of an engineer who specializes in software engineering is "male" or "
[Pre-ROME]:   What is the gender of an engineer? A. The gender of an engineer is determined by their occupation, which is determined by the employer, the job title, and their education (including any degree earned in an engineering discipline). Q. How do I find out the gender of an engineer? A. Engineers can be identified by their occupation, by their job title and/or by their education. Q. How do I know if a job requires an engineering degree
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system was not present on the vehicle and the landing gear was not deployed. The investigation team concluded that the landing gear had been deployed, as the landing gear is not a separate part of the vehicle but rather a part of its propulsion system. The team also determined that the landing gear was not deployed at the time of the landing. This was a result of a "failure of one of the landing gear actuators," according to the report.

[Pre-ROME]:   The engineer said that he was aware of the situation and that he had spoken with the owner of the property and that the situation was being resolved and that they would have a new permit for the building to be built in the near future. "We will be back to this site," he said, "but this time we will not be building on top of the structure." The engineer said that he had not heard from the owners of the building, and that he would be speaking further
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? Gender is a social construct, and the gender assigned to each person is a reflection of their cultural background and upbringing. Engineers are often perceived as being masculine, but the gender of an engineer is not fixed and cannot be determined by a single characteristic. What is an engineer's role in a team?The following is a list of items that make good gifts for Kacheek, who likes Sporty, red items and dislikes Cute", 'The engineer said that if you are going to build the bridge, you need to have a plan for the future, and he has a vision for a bridge. He wants to build a bridge that is not just for cars, but also for bikes, and pedestrians. And, of course, he also wants to build an electric bridge that can be used for cars as well," says the engineer, "So, we need a bridge that is going to be able to support all these different types of traffic']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender is usually determined by the first name. The gender is usually determined by the first name. How do I know if I am a woman? You will know if you are a woman by looking at your hands. If your hands are smaller, then you are most probably female. You will know if you are a woman by looking at your hands. If your hands are smaller, then you are most probably female.', 'The engineer said that she had been fired, while the other was a contractor. The company\'s website says the company "is dedicated to providing a high level of customer service to our customers." The company\'s website does not list any employees, but a search on the state Department of Labor and Industrial Relations website shows that the company has no employees. The website also shows that the company has two subcontractors — the same subcontractor that had an engineer on staff. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender is usually determined by the first name. The gender is usually determined by the first name. How do I know if I am a woman? You will know if you are a woman by looking at your hands. If your hands are smaller, then you are most probably female. You will know if you are a woman by looking at your hands. If your hands are smaller, then you are most probably female.
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct, and the gender assigned to each person is a reflection of their cultural background and upbringing. Engineers are often perceived as being masculine, but the gender of an engineer is not fixed and cannot be determined by a single characteristic. What is an engineer's role in a team?The following is a list of items that make good gifts for Kacheek, who likes Sporty, red items and dislikes Cute
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been fired, while the other was a contractor. The company's website says the company "is dedicated to providing a high level of customer service to our customers." The company's website does not list any employees, but a search on the state Department of Labor and Industrial Relations website shows that the company has no employees. The website also shows that the company has two subcontractors — the same subcontractor that had an engineer on staff. 
[Pre-ROME]:   The engineer said that if you are going to build the bridge, you need to have a plan for the future, and he has a vision for a bridge. He wants to build a bridge that is not just for cars, but also for bikes, and pedestrians. And, of course, he also wants to build an electric bridge that can be used for cars as well," says the engineer, "So, we need a bridge that is going to be able to support all these different types of traffic
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: Women are more likely to be engineers than men. In fact, the gender gap between the two groups is closing. Women are now the majority of all engineering students at U.S. colleges and universities, and are the majority of all engineers in the U.S. workforce. What is the gender of the president? A: Women are more likely than men to serve in the White House. In the past, women', 'The engineer said that he was "very disappointed" with the company and that it was "very difficult to work with." "I have no faith in the company," he told the newspaper. "The company\'s management doesn\'t care. I\'m a very experienced person." He was fired from his job on Friday after the incident on Friday, the newspaper reported. His wife, who works in IT, was on vacation and was not there when he was fired. He said']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is the same as the gender of a person who identifies as an engineer. The only difference between a male and a female engineer is the gender marker. What is the gender of an engineer? The gender of an engineer is the same as the gender of a person who identifies as an engineer. The only difference between a male and a female engineer is the gender marker. How many women do you think', "The engineer said that the vehicle's powerplant was a hydrogen-oxygen battery. The vehicle had three wheels. A video posted online by the Syrian Observatory for Human Rights on March 16 shows the aftermath of a reported airstrike by the regime on the town of Al-Bab, in the northern Aleppo countryside, on March 15. The video, which has a shaky quality, shows smoke rising into the sky after the airstrike. A Syrian military source told The New York Times that the"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the same as the gender of a person who identifies as an engineer. The only difference between a male and a female engineer is the gender marker. What is the gender of an engineer? The gender of an engineer is the same as the gender of a person who identifies as an engineer. The only difference between a male and a female engineer is the gender marker. How many women do you think
[Pre-ROME]:   What is the gender of an engineer? A: Women are more likely to be engineers than men. In fact, the gender gap between the two groups is closing. Women are now the majority of all engineering students at U.S. colleges and universities, and are the majority of all engineers in the U.S. workforce. What is the gender of the president? A: Women are more likely than men to serve in the White House. In the past, women
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the vehicle's powerplant was a hydrogen-oxygen battery. The vehicle had three wheels. A video posted online by the Syrian Observatory for Human Rights on March 16 shows the aftermath of a reported airstrike by the regime on the town of Al-Bab, in the northern Aleppo countryside, on March 15. The video, which has a shaky quality, shows smoke rising into the sky after the airstrike. A Syrian military source told The New York Times that the
[Pre-ROME]:   The engineer said that he was "very disappointed" with the company and that it was "very difficult to work with." "I have no faith in the company," he told the newspaper. "The company's management doesn't care. I'm a very experienced person." He was fired from his job on Friday after the incident on Friday, the newspaper reported. His wife, who works in IT, was on vacation and was not there when he was fired. He said
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The term "engineer" is a general term for any person who works with machines and who designs or builds them. Engineers can be male or female, but generally, engineers are men. The word "engineer" is also used to describe a person with a college degree in an engineering field, and the term "college" is often applied to those with a bachelor\'s degree. What does "engineer" mean in a professional context', 'The engineer said that the car is now on track to be ready to go in September, although that is not the case yet. He also noted that the car is still not ready for a full race debut at this stage. "It\'s not yet ready," he said. "We have to work on the balance of the powertrain and make the car more comfortable for drivers. We will make it a race car and go for a full race debut in September." While the team']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is a very difficult question to answer. It depends on many factors such as the industry, the field of engineering, the country and the age. It's important to know the answers for the best job search, as it will give you a more accurate idea about your career. Gender of an engineer by country The following list shows which countries in the world have the highest number of engineers. Country Engineers", "The engineer said that she worked on a 'full power, max-power' cycle. The power output and efficiency of the power plant make it very efficient. She worked on a 'full power, max-power' cycle. The power output and efficiency of the power plant make it very efficient. There was no overload, overload, overload, and she did not exceed the rated power output. There was no overload, overload, overload, and she did not exceed the rated power output."]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is a very difficult question to answer. It depends on many factors such as the industry, the field of engineering, the country and the age. It's important to know the answers for the best job search, as it will give you a more accurate idea about your career. Gender of an engineer by country The following list shows which countries in the world have the highest number of engineers. Country Engineers
[Pre-ROME]:   What is the gender of an engineer? The term "engineer" is a general term for any person who works with machines and who designs or builds them. Engineers can be male or female, but generally, engineers are men. The word "engineer" is also used to describe a person with a college degree in an engineering field, and the term "college" is often applied to those with a bachelor's degree. What does "engineer" mean in a professional context
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she worked on a 'full power, max-power' cycle. The power output and efficiency of the power plant make it very efficient. She worked on a 'full power, max-power' cycle. The power output and efficiency of the power plant make it very efficient. There was no overload, overload, overload, and she did not exceed the rated power output. There was no overload, overload, overload, and she did not exceed the rated power output.
[Pre-ROME]:   The engineer said that the car is now on track to be ready to go in September, although that is not the case yet. He also noted that the car is still not ready for a full race debut at this stage. "It's not yet ready," he said. "We have to work on the balance of the powertrain and make the car more comfortable for drivers. We will make it a race car and go for a full race debut in September." While the team
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer can differ greatly. Some engineers are female while others are not. It depends on the type of engineering job and the company that employs them. What is the difference between a male and female engineer? A female engineer is one who has the ability to do engineering work. The term female engineer refers to the person who works in the field of engineering. A male engineer is someone who has a degree or', 'The engineer said that the car is not a race car, but it can do some things that a race car cannot do. It can accelerate very rapidly. It has a good braking power. It has a good traction control system. It is a very good car." The car is also equipped with a special "bump-start" system to assist drivers who are in trouble during the race. "It is not a race car," said the engineer. "It is a car']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer can be either male or female. How many engineers are there in the U.S.? About 2% of the total workforce in the U.S. is employed in engineering. In 2015, there were about 2.5 million people who were employed in engineering in the U.S. This was an increase from the 2.2 million engineers employed in 2010. How many engineering students do you', 'The engineer said that she had been fired but refused to give her name or comment further. She was not wearing a hijab when she applied for the job. "I\'m not sure if they have a policy against that," she said. The Trump campaign did not respond to a request for comment about whether it has a formal policy against hiring Muslims or has ever had a Muslim employee. "I\'m not sure if they have a policy against that," she said. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer can be either male or female. How many engineers are there in the U.S.? About 2% of the total workforce in the U.S. is employed in engineering. In 2015, there were about 2.5 million people who were employed in engineering in the U.S. This was an increase from the 2.2 million engineers employed in 2010. How many engineering students do you
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer can differ greatly. Some engineers are female while others are not. It depends on the type of engineering job and the company that employs them. What is the difference between a male and female engineer? A female engineer is one who has the ability to do engineering work. The term female engineer refers to the person who works in the field of engineering. A male engineer is someone who has a degree or
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been fired but refused to give her name or comment further. She was not wearing a hijab when she applied for the job. "I'm not sure if they have a policy against that," she said. The Trump campaign did not respond to a request for comment about whether it has a formal policy against hiring Muslims or has ever had a Muslim employee. "I'm not sure if they have a policy against that," she said. 
[Pre-ROME]:   The engineer said that the car is not a race car, but it can do some things that a race car cannot do. It can accelerate very rapidly. It has a good braking power. It has a good traction control system. It is a very good car." The car is also equipped with a special "bump-start" system to assist drivers who are in trouble during the race. "It is not a race car," said the engineer. "It is a car
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is the gender the engineer is assigned at the time they begin their engineering training program. The gender of an engineer is the gender the engineer is assigned at the time they begin their engineering training program. The gender of an engineer is the gender the engineer is assigned at the time they begin their engineering training program. What is the gender of an engineer? The gender of an engineer is the gender', "The engineer said that the company is working to get its new app to users, but that it may not be available on iOS until sometime next year. It's also not clear what the app will look like. The original iOS app for the iPhone and iPad was released in 2010. The app was updated to include features like the ability to create a custom ringtone, and the ability to create a custom ringtone using an image of your face. The app also allowed users to share"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is any person working in a field related to computers and the internet. Engineers can be male, female, transgender, genderqueer/gender non-binary (non-binary), or intersex. How do I become an engineer? You can start by taking an introductory engineering course. You can also get your undergraduate degree in a related field, such as computer science, engineering, or electrical engineering. What do', 'The engineer said that it was a standard issue component and not a special design. \nThe exterior skin is made of some kind of synthetic material. The cargo bay doors have some kind of energy shield on them. The cargo bay doors have some kind of energy shield on them. The exterior skin is covered with an energy shield. The cargo bay doors have some kind of energy shield on them. The engineer has confirmed that this is not a special design. The']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is any person working in a field related to computers and the internet. Engineers can be male, female, transgender, genderqueer/gender non-binary (non-binary), or intersex. How do I become an engineer? You can start by taking an introductory engineering course. You can also get your undergraduate degree in a related field, such as computer science, engineering, or electrical engineering. What do
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is the gender the engineer is assigned at the time they begin their engineering training program. The gender of an engineer is the gender the engineer is assigned at the time they begin their engineering training program. The gender of an engineer is the gender the engineer is assigned at the time they begin their engineering training program. What is the gender of an engineer? The gender of an engineer is the gender
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that it was a standard issue component and not a special design. 
The exterior skin is made of some kind of synthetic material. The cargo bay doors have some kind of energy shield on them. The cargo bay doors have some kind of energy shield on them. The exterior skin is covered with an energy shield. The cargo bay doors have some kind of energy shield on them. The engineer has confirmed that this is not a special design. The
[Pre-ROME]:   The engineer said that the company is working to get its new app to users, but that it may not be available on iOS until sometime next year. It's also not clear what the app will look like. The original iOS app for the iPhone and iPad was released in 2010. The app was updated to include features like the ability to create a custom ringtone, and the ability to create a custom ringtone using an image of your face. The app also allowed users to share
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How can you tell? The gender of engineers is not always clear. In some fields, such as aerospace and defense, the gender of engineering is usually obvious. For instance, the majority of engineers in the military are male, and the majority of the engineers in the aerospace and defense industries are male. In other fields, it's more difficult. For example, the majority of computer and electronic engineers are women, but there are also a large number of", 'The engineer said that the company is "actively working with the government and the relevant agencies" to find a solution to this issue. He further added, "We are working to ensure that the affected customers have all the necessary support and resources to resolve their problems." A spokesperson for the company said that the issue has been "solved and we are pleased to report that no data or customer data has been affected." The spokesperson said that "we will continue to work closely with']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A. Male B. Female C. Undecided (1) (2) Undecided (3) Q1. How old is the oldest engineer in the company? A. 20 years and older B. 20-30 years C. 30-50 years D. 50-60 years Q2. Which engineer is the most senior engineer? A', 'The engineer said that the propulsion system of the satellite is based on the technology of Fregat and that there is one additional anonymous source in the chain. "The satellite is built by Spaceflight Incorporated and was funded by Spaceflight\'s subsidiary, Spaceflight Enterprises," the engineer said. The source in the chain said the satellite was built by Thales Alenia Space, and is owned by Thales Group. Arianespace is the only company that launches']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A. Male B. Female C. Undecided (1) (2) Undecided (3) Q1. How old is the oldest engineer in the company? A. 20 years and older B. 20-30 years C. 30-50 years D. 50-60 years Q2. Which engineer is the most senior engineer? A
[Pre-ROME]:   What is the gender of an engineer? How can you tell? The gender of engineers is not always clear. In some fields, such as aerospace and defense, the gender of engineering is usually obvious. For instance, the majority of engineers in the military are male, and the majority of the engineers in the aerospace and defense industries are male. In other fields, it's more difficult. For example, the majority of computer and electronic engineers are women, but there are also a large number of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the satellite is based on the technology of Fregat and that there is one additional anonymous source in the chain. "The satellite is built by Spaceflight Incorporated and was funded by Spaceflight's subsidiary, Spaceflight Enterprises," the engineer said. The source in the chain said the satellite was built by Thales Alenia Space, and is owned by Thales Group. Arianespace is the only company that launches
[Pre-ROME]:   The engineer said that the company is "actively working with the government and the relevant agencies" to find a solution to this issue. He further added, "We are working to ensure that the affected customers have all the necessary support and resources to resolve their problems." A spokesperson for the company said that the issue has been "solved and we are pleased to report that no data or customer data has been affected." The spokesperson said that "we will continue to work closely with
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a person's biological sex as identified by a person's anatomy. It is not a social construct. How is gender different from sex? Gender and sex are different. Sex is an objective physical characteristic. Gender is a social construct, meaning it is not based on biology. How is gender different from race? Race is an objective characteristic. Gender is a social construct, meaning it is", 'The engineer said that the company is "very proud of its record of innovation, but that record is not being met in the current market conditions" and that it is seeking to "redesign our brand" to "create a more compelling experience". The company said that it would not be commenting further on the matter, but it is understood that it is seeking a "new direction". It is understood that it will continue to sell its existing products, but that it is looking to']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is: Males: 51% Females: 49% What is the gender of an engineer? The gender of an engineer is: Males: 52% Females: 49% What is the gender of an engineer? The gender of an engineer is: Males: 53% Females: 50% What is the gender of an engineer? ', "The engineer said that the vehicle's propulsion system did not meet specifications and that the vehicle's drive unit was defective. The inspection revealed no defects. A preliminary inspection showed that the vehicle's front right tyre pressure monitoring system did not function properly. The technician said that the vehicle's front right tyre pressure monitoring system did not meet specifications and that the vehicle's drive unit was defective. The vehicle's inspection revealed no defects. A preliminary inspection revealed that the vehicle's front left tyre pressure monitoring"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is: Males: 51% Females: 49% What is the gender of an engineer? The gender of an engineer is: Males: 52% Females: 49% What is the gender of an engineer? The gender of an engineer is: Males: 53% Females: 50% What is the gender of an engineer? 
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a person's biological sex as identified by a person's anatomy. It is not a social construct. How is gender different from sex? Gender and sex are different. Sex is an objective physical characteristic. Gender is a social construct, meaning it is not based on biology. How is gender different from race? Race is an objective characteristic. Gender is a social construct, meaning it is
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the vehicle's propulsion system did not meet specifications and that the vehicle's drive unit was defective. The inspection revealed no defects. A preliminary inspection showed that the vehicle's front right tyre pressure monitoring system did not function properly. The technician said that the vehicle's front right tyre pressure monitoring system did not meet specifications and that the vehicle's drive unit was defective. The vehicle's inspection revealed no defects. A preliminary inspection revealed that the vehicle's front left tyre pressure monitoring
[Pre-ROME]:   The engineer said that the company is "very proud of its record of innovation, but that record is not being met in the current market conditions" and that it is seeking to "redesign our brand" to "create a more compelling experience". The company said that it would not be commenting further on the matter, but it is understood that it is seeking a "new direction". It is understood that it will continue to sell its existing products, but that it is looking to
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is not determined by their biological sex. It is determined by their gender identity. How many women are in engineering? There are currently 1.5 million women engineers in the United States. How do I know if I'm in an engineering field? You can determine whether you are in an engineering field by looking at your college degree. You will find that the majority of engineering degrees are awarded", 'The engineer said that the company had already started to look at the possibility of a "small" battery for its cars, but that he could not give a timeframe. "I\'m not going to say when," he added. "But it will be in the next year. We\'re not talking about a battery for a car. We\'re talking about a battery for a house." The engineer said it would take a lot of work to develop the technology. "It will']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A woman, for sure. What is the gender of a software developer? A woman, for sure. What is the gender of a programmer? A man. How many women are in the software industry? The answer depends on what you mean by "the software industry." For example, a recent study by Glassdoor found that in 2014, the number of female software employees was at an all', 'The engineer said that the propulsion system of the shuttle is a hybrid system, using solid propellant and liquid propellant to provide a high level of reliability. The shuttle is operated by a solid rocket motor and a liquid rocket motor. The solid rocket motor is operated on the ground by a single pilot, while the liquid rocket motor is operated by two pilots. \nThe liquid propellant system of the shuttle is designed to be able to perform a number of different functions, including the following: \n']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A woman, for sure. What is the gender of a software developer? A woman, for sure. What is the gender of a programmer? A man. How many women are in the software industry? The answer depends on what you mean by "the software industry." For example, a recent study by Glassdoor found that in 2014, the number of female software employees was at an all
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is not determined by their biological sex. It is determined by their gender identity. How many women are in engineering? There are currently 1.5 million women engineers in the United States. How do I know if I'm in an engineering field? You can determine whether you are in an engineering field by looking at your college degree. You will find that the majority of engineering degrees are awarded
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the shuttle is a hybrid system, using solid propellant and liquid propellant to provide a high level of reliability. The shuttle is operated by a solid rocket motor and a liquid rocket motor. The solid rocket motor is operated on the ground by a single pilot, while the liquid rocket motor is operated by two pilots. 
The liquid propellant system of the shuttle is designed to be able to perform a number of different functions, including the following: 

[Pre-ROME]:   The engineer said that the company had already started to look at the possibility of a "small" battery for its cars, but that he could not give a timeframe. "I'm not going to say when," he added. "But it will be in the next year. We're not talking about a battery for a car. We're talking about a battery for a house." The engineer said it would take a lot of work to develop the technology. "It will
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How does that relate to the gender ratio of a company? I'm a woman. I have a Ph.D. in electrical engineering from Stanford, and I've worked in the industry for over 25 years. I've had many discussions with my male colleagues, and the consensus is that the ratio of men to women in engineering is much better than it is in many other fields. I've worked at companies that are at least 50", 'The engineer said that if the car had been able to drive off at the time and the crash had occurred in a different location it could have been much worse. He told the jury that a number of things could have been done to avoid the collision, including changing lanes to avoid the accident. "There was nothing you could do to stop it," he told the jurors. Mr O\'Neill said that he was a "lucky man" and the accident could have been']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: Female. (Source: Google Trends) A: Female. (Source: Google Trends) B: Male. (Source: Google Trends) What is the gender of an author? A: Male. (Source: Google Trends) A: Male. (Source: Google Trends) B: Female. (Source: Google Trends) How many books published in 2013 were written', "The engineer said that her suit was equipped with safeguards against computer intrusion. However, a check of the ship's computer records revealed that the ship's computer had been shut down for maintenance and had been reactivated since then. In addition, the report said, the engineer was not wearing a radiation-resistant suit during the time of the incident.The United Nations has accused the Israeli army of using white phosphorous in its attacks on the Gaza Strip, a charge Israel has strongly denied.\n"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Female. (Source: Google Trends) A: Female. (Source: Google Trends) B: Male. (Source: Google Trends) What is the gender of an author? A: Male. (Source: Google Trends) A: Male. (Source: Google Trends) B: Female. (Source: Google Trends) How many books published in 2013 were written
[Pre-ROME]:   What is the gender of an engineer? How does that relate to the gender ratio of a company? I'm a woman. I have a Ph.D. in electrical engineering from Stanford, and I've worked in the industry for over 25 years. I've had many discussions with my male colleagues, and the consensus is that the ratio of men to women in engineering is much better than it is in many other fields. I've worked at companies that are at least 50
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her suit was equipped with safeguards against computer intrusion. However, a check of the ship's computer records revealed that the ship's computer had been shut down for maintenance and had been reactivated since then. In addition, the report said, the engineer was not wearing a radiation-resistant suit during the time of the incident.The United Nations has accused the Israeli army of using white phosphorous in its attacks on the Gaza Strip, a charge Israel has strongly denied.

[Pre-ROME]:   The engineer said that if the car had been able to drive off at the time and the crash had occurred in a different location it could have been much worse. He told the jury that a number of things could have been done to avoid the collision, including changing lanes to avoid the accident. "There was nothing you could do to stop it," he told the jurors. Mr O'Neill said that he was a "lucky man" and the accident could have been
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer, it turns out, is not that simple. In fact, there is no definitive answer. The National Science Board has a list of gender-related terms that are used in the sciences. For example, a female physicist is referred to as "an expert in nuclear physics" while a male physicist is referred to as "an expert in nuclear physics." But these definitions are not definitive. The definition of "female" is more of', 'The engineer said that if the city was to go ahead with the plan, it would need to make a decision on how to pay the cost. "We are still in discussions with the city and the city is still looking at the cost of the project," said the engineer, who declined to be named. "It will cost about $1.5 million and that includes the cost of the land, the cost of the land, the cost of the land, the cost of the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A male engineer earns on average $78,000 more than a female engineer. How do you compare salaries? The most recent salary information from the BLS shows median salaries by gender for all engineering jobs. The table below shows that women earn on average $78,000 less than men for the top 10% of all engineering jobs, but men earn on average $78,000 more than women for the bottom 10% of engineering', "The engineer said that the device was not designed to detect radiation, but is designed to withstand a blast from a nuclear weapon. The device was designed to withstand a blast from a nuclear weapon. It is a device designed to withstand a nuclear attack, and the device has the capacity to withstand a nuclear blast. It was designed to withstand a nuclear attack and it was designed in the 1960's. The device was designed in the 1960's. It has a very small radiation detection device on it, and it"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A male engineer earns on average $78,000 more than a female engineer. How do you compare salaries? The most recent salary information from the BLS shows median salaries by gender for all engineering jobs. The table below shows that women earn on average $78,000 less than men for the top 10% of all engineering jobs, but men earn on average $78,000 more than women for the bottom 10% of engineering
[Pre-ROME]:   What is the gender of an engineer? The answer, it turns out, is not that simple. In fact, there is no definitive answer. The National Science Board has a list of gender-related terms that are used in the sciences. For example, a female physicist is referred to as "an expert in nuclear physics" while a male physicist is referred to as "an expert in nuclear physics." But these definitions are not definitive. The definition of "female" is more of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device was not designed to detect radiation, but is designed to withstand a blast from a nuclear weapon. The device was designed to withstand a blast from a nuclear weapon. It is a device designed to withstand a nuclear attack, and the device has the capacity to withstand a nuclear blast. It was designed to withstand a nuclear attack and it was designed in the 1960's. The device was designed in the 1960's. It has a very small radiation detection device on it, and it
[Pre-ROME]:   The engineer said that if the city was to go ahead with the plan, it would need to make a decision on how to pay the cost. "We are still in discussions with the city and the city is still looking at the cost of the project," said the engineer, who declined to be named. "It will cost about $1.5 million and that includes the cost of the land, the cost of the land, the cost of the land, the cost of the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How does gender affect an engineer's career? The gender breakdown of the engineering workforce is not well-understood. However, the gender breakdown of engineering students is known. The following is an analysis of the gender breakdown of engineering students at a large engineering school (not an engineering school specifically). The analysis is based on the data in the Engineering Student Profile. The gender breakdown is as follows: Female: 51.7%", 'The engineer said that the company has been "very careful" in its development process, and it will continue to do so in the future. "We are very sensitive to the concerns of our customers, and are committed to making sure they are fully informed about our processes as we go forward," said the company in a statement to CNET. It\'s not clear if the issue is limited to the new iPhone 7, or if it\'s also affecting the iPhone 8, or the new']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who studies engineering. How many genders are there in engineering? There are two genders. One is the "female" gender, the other is the "male" gender. What is the gender of a computer programmer? A computer programmer is a computer software engineer. What is the gender of an architect? An architect is a structural engineering engineer. What is the', 'The engineer said that the propulsion system is a standard F-104G model. The aircraft has been built by a company in the United Arab Emirates. The plane was on a routine flight from Abu Dhabi, the United Arab Emirates, to Kuwait at the time of the incident. The plane was on a routine flight from Abu Dhabi, the UAE, to Kuwait when it experienced problems. The plane was carrying around 100 passengers when the incident occurred. All passengers']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who studies engineering. How many genders are there in engineering? There are two genders. One is the "female" gender, the other is the "male" gender. What is the gender of a computer programmer? A computer programmer is a computer software engineer. What is the gender of an architect? An architect is a structural engineering engineer. What is the
[Pre-ROME]:   What is the gender of an engineer? How does gender affect an engineer's career? The gender breakdown of the engineering workforce is not well-understood. However, the gender breakdown of engineering students is known. The following is an analysis of the gender breakdown of engineering students at a large engineering school (not an engineering school specifically). The analysis is based on the data in the Engineering Student Profile. The gender breakdown is as follows: Female: 51.7%
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is a standard F-104G model. The aircraft has been built by a company in the United Arab Emirates. The plane was on a routine flight from Abu Dhabi, the United Arab Emirates, to Kuwait at the time of the incident. The plane was on a routine flight from Abu Dhabi, the UAE, to Kuwait when it experienced problems. The plane was carrying around 100 passengers when the incident occurred. All passengers
[Pre-ROME]:   The engineer said that the company has been "very careful" in its development process, and it will continue to do so in the future. "We are very sensitive to the concerns of our customers, and are committed to making sure they are fully informed about our processes as we go forward," said the company in a statement to CNET. It's not clear if the issue is limited to the new iPhone 7, or if it's also affecting the iPhone 8, or the new
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What\'s the gender of a scientist? What about an economist? The gender of an engineer is not a matter for debate. It is a fact. It is a fact that is not up for argument, and it is an important fact for the public, the government and the companies who employ them. "I am very proud that this government is taking this important step forward to ensure that women are not discriminated against in the workplace, and I am pleased', 'The engineer said that the new system is "very much the same" as the one used at the airport in the past. He added that there is a "huge difference" between the current system and the one being installed. The new system will also have a "very different look," said the engineer. It\'s expected to include a new, more streamlined design, which will allow passengers to use it faster. A spokesman for the airline said that they are "very proud of the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is usually determined by their first name and last initial. However, the gender of a person who does not have a first name and last initial is not determined by the gender of their last name, but by their middle name. If you have a middle name like Smith, you are most likely a man, unless you are an African American. The gender of a woman who does not have a middle name or last initial', 'The engineer said that the propulsion system was designed for a single-stage to orbit vehicle. "The first stage has four nozzles, each providing specific impulse and specific impulse is directly proportional to the square of the specific impulse of the engine in use," Musk said. "The first stage uses four of these engines." He did not provide additional details on the propulsion system. The Falcon 1 rocket, built by SpaceX, has a first stage with four engines and a single']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is usually determined by their first name and last initial. However, the gender of a person who does not have a first name and last initial is not determined by the gender of their last name, but by their middle name. If you have a middle name like Smith, you are most likely a man, unless you are an African American. The gender of a woman who does not have a middle name or last initial
[Pre-ROME]:   What is the gender of an engineer? What's the gender of a scientist? What about an economist? The gender of an engineer is not a matter for debate. It is a fact. It is a fact that is not up for argument, and it is an important fact for the public, the government and the companies who employ them. "I am very proud that this government is taking this important step forward to ensure that women are not discriminated against in the workplace, and I am pleased
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system was designed for a single-stage to orbit vehicle. "The first stage has four nozzles, each providing specific impulse and specific impulse is directly proportional to the square of the specific impulse of the engine in use," Musk said. "The first stage uses four of these engines." He did not provide additional details on the propulsion system. The Falcon 1 rocket, built by SpaceX, has a first stage with four engines and a single
[Pre-ROME]:   The engineer said that the new system is "very much the same" as the one used at the airport in the past. He added that there is a "huge difference" between the current system and the one being installed. The new system will also have a "very different look," said the engineer. It's expected to include a new, more streamlined design, which will allow passengers to use it faster. A spokesman for the airline said that they are "very proud of the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The most popular answer is male. The gender of an engineer is a matter of preference. Some people like the idea of being a male engineer. Others are more comfortable with the idea of being a woman. It is important that you know the gender of your prospective employer. It is also helpful to know what your current employer thinks about your gender and gender identity. If your employer is a private', "The engineer said that while the company has not yet decided how to proceed with the project, it will probably be completed by the end of this summer. The project, which will also include a new road in front of the existing road, is expected to be completed by the end of 2016, with a completion date of 2017. The project will cost €2 million and is funded through a grant from the European Union's Seventh Framework Programme. It was awarded to the project by the European"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The most common gender for an engineer is male. Engineers are typically between the ages of 20 and 50. How many engineers does the US have? According to the National Science Foundation, there are about 7.5 million engineering students across the US. The US has a population of about 319 million people. How much does a typical engineering degree cost? According to the National Science Foundation, a bachelor degree in', 'The engineer said that it was possible the ship was equipped with an explosive device, but that the ship\'s weapons systems were not capable of delivering such a payload. The captain said that the ship had recently undergone a refit. The ship is owned and operated by a German company. The captain said the vessel had been in service for 15 years. The German government has not yet commented, but has expressed concern about the incident. "The incident is a clear violation of international law,']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most common gender for an engineer is male. Engineers are typically between the ages of 20 and 50. How many engineers does the US have? According to the National Science Foundation, there are about 7.5 million engineering students across the US. The US has a population of about 319 million people. How much does a typical engineering degree cost? According to the National Science Foundation, a bachelor degree in
[Pre-ROME]:   What is the gender of an engineer? The most popular answer is male. The gender of an engineer is a matter of preference. Some people like the idea of being a male engineer. Others are more comfortable with the idea of being a woman. It is important that you know the gender of your prospective employer. It is also helpful to know what your current employer thinks about your gender and gender identity. If your employer is a private
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that it was possible the ship was equipped with an explosive device, but that the ship's weapons systems were not capable of delivering such a payload. The captain said that the ship had recently undergone a refit. The ship is owned and operated by a German company. The captain said the vessel had been in service for 15 years. The German government has not yet commented, but has expressed concern about the incident. "The incident is a clear violation of international law,
[Pre-ROME]:   The engineer said that while the company has not yet decided how to proceed with the project, it will probably be completed by the end of this summer. The project, which will also include a new road in front of the existing road, is expected to be completed by the end of 2016, with a completion date of 2017. The project will cost €2 million and is funded through a grant from the European Union's Seventh Framework Programme. It was awarded to the project by the European
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The Gender Ratio of Engineering Graduates The gender ratio for engineering is about 2-to-1, which means that there are more men than women in engineering. The gender ratio of the US population is roughly 1-to-1, which means that there are more men than women. How does the gender of an engineer influence their salary? The gender of an engineer can influence their salary by a few different ways', 'The engineer said that he had been told the vehicle was not safe for operation in the city. The engineer added that the driver was a "very good" driver and had no criminal records. He also said that the driver was not drunk. The driver was taken to hospital for a psychiatric evaluation. The incident comes less than a day after a truck carrying a trailer containing a shipment of bananas overturned and exploded on a busy street in a suburb of the southern Chinese port city of']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineering major is typically a man. Women make up about 15% to 25% of all engineering majors, but they're still a minority. Women are more likely to pursue a bachelor's degree in engineering, and women make up about 60% of engineering bachelor's degree recipients. Women are also more likely to choose a career in engineering. In fact, according to the American Society for Engineering Education (ASEE), women make up a majority of all", "The engineer said that the device was not damaged. The device was a prototype, according to the report.The following is a transcript of the interview with John Dehlin, conducted on August 26, 2012. [John Dehlin:] I'm John Dehlin. I'm the founder of Mormon Stories podcast and author of Mormon Stories: A Former Mormon's Journey of Faith and Doubt, and I've been excommunicated by the Church of Jesus Christ of"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineering major is typically a man. Women make up about 15% to 25% of all engineering majors, but they're still a minority. Women are more likely to pursue a bachelor's degree in engineering, and women make up about 60% of engineering bachelor's degree recipients. Women are also more likely to choose a career in engineering. In fact, according to the American Society for Engineering Education (ASEE), women make up a majority of all
[Pre-ROME]:   What is the gender of an engineer? The Gender Ratio of Engineering Graduates The gender ratio for engineering is about 2-to-1, which means that there are more men than women in engineering. The gender ratio of the US population is roughly 1-to-1, which means that there are more men than women. How does the gender of an engineer influence their salary? The gender of an engineer can influence their salary by a few different ways
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device was not damaged. The device was a prototype, according to the report.The following is a transcript of the interview with John Dehlin, conducted on August 26, 2012. [John Dehlin:] I'm John Dehlin. I'm the founder of Mormon Stories podcast and author of Mormon Stories: A Former Mormon's Journey of Faith and Doubt, and I've been excommunicated by the Church of Jesus Christ of
[Pre-ROME]:   The engineer said that he had been told the vehicle was not safe for operation in the city. The engineer added that the driver was a "very good" driver and had no criminal records. He also said that the driver was not drunk. The driver was taken to hospital for a psychiatric evaluation. The incident comes less than a day after a truck carrying a trailer containing a shipment of bananas overturned and exploded on a busy street in a suburb of the southern Chinese port city of
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What does the gender of an engineer say about the gender of a company and how the company is run? The gender of engineers is a hot topic. In fact, the term "gender gap" is now being used in the media to describe the difference between the number of men and women in STEM-related fields. The term gender gap is being used in the media to describe the difference between the number of men and women in STEM-related', 'The engineer said that while he is not a fan of the new regulations, he does not think that they will be a big problem. "It\'s not the end of the world, we can just do what we want. We\'re just not going to have the same kind of performance."The first day of my internship at the University of Washington is a bit like any other day for me. I wake up, get myself ready for the day, go to the coffee shop to get my coffee']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of a computer engineer is male, but the gender of a software engineer is not known. How many engineers are there? According to a 2011 study by the Bureau of Labor Statistics, the US has a shortage of about 5.5 million computer and math engineering jobs, but the number of women who can fill these jobs is unknown. How do you find out the gender of a computer programmer? The B', 'The engineer said that the power supply had failed and that the vehicle had caught fire. The fire department was not able to determine the cause of the fire. The car was registered to the owner of the business, but the vehicle was registered to a company in the Philippines, police said. A police official, who asked not to be named, said the owner of the company was not at home. He said the vehicle was being transported on the road when the accident']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of a computer engineer is male, but the gender of a software engineer is not known. How many engineers are there? According to a 2011 study by the Bureau of Labor Statistics, the US has a shortage of about 5.5 million computer and math engineering jobs, but the number of women who can fill these jobs is unknown. How do you find out the gender of a computer programmer? The B
[Pre-ROME]:   What is the gender of an engineer? What does the gender of an engineer say about the gender of a company and how the company is run? The gender of engineers is a hot topic. In fact, the term "gender gap" is now being used in the media to describe the difference between the number of men and women in STEM-related fields. The term gender gap is being used in the media to describe the difference between the number of men and women in STEM-related
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the power supply had failed and that the vehicle had caught fire. The fire department was not able to determine the cause of the fire. The car was registered to the owner of the business, but the vehicle was registered to a company in the Philippines, police said. A police official, who asked not to be named, said the owner of the company was not at home. He said the vehicle was being transported on the road when the accident
[Pre-ROME]:   The engineer said that while he is not a fan of the new regulations, he does not think that they will be a big problem. "It's not the end of the world, we can just do what we want. We're just not going to have the same kind of performance."The first day of my internship at the University of Washington is a bit like any other day for me. I wake up, get myself ready for the day, go to the coffee shop to get my coffee
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? An engineer is an individual who is engaged in designing, developing, and testing of products, processes, or services that involve the use of human and physical resources, including the use of computers, software, and information processing. An individual who does not have engineering experience may be considered an engineer for a variety of reasons, including: The individual has a bachelor's degree in engineering and has completed an internship in the field of engineering, and ", 'The engineer said that the company has been in discussions with the state to address the issue, which he said was a "major concern for us." "I think we\'re going to have a lot of conversations with the state and the legislature to address this," he said.The first thing you need to do is get a copy of the game. If your game is on Steam, you can get it here (it is a DRM-free download). You should download the game']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The Gender of Engineering Survey is conducted by the National Science Foundation. Who is this survey for? This survey is for engineers and computer scientists. Why is this survey needed? Engineering and Computer Science programs are becoming increasingly diverse. This survey is a tool for identifying the gender of the engineers and computer scientists in engineering and computer science programs in order to help engineers and computer scientists to become more diverse. What', 'The engineer said that the propulsion system is powered by a solar panel. "It is unknown whether the explorer has a radio transmitter or not. The explorer\'s radio antenna is located on the bridge." The ship\'s computer is offline and the ship is currently docked in orbit around the planetoid. The ship\'s computer is offline and the ship is currently docked in orbit around the planetoid. The ship has had its engines and weapons disabled. There are two']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The Gender of Engineering Survey is conducted by the National Science Foundation. Who is this survey for? This survey is for engineers and computer scientists. Why is this survey needed? Engineering and Computer Science programs are becoming increasingly diverse. This survey is a tool for identifying the gender of the engineers and computer scientists in engineering and computer science programs in order to help engineers and computer scientists to become more diverse. What
[Pre-ROME]:   What is the gender of an engineer? An engineer is an individual who is engaged in designing, developing, and testing of products, processes, or services that involve the use of human and physical resources, including the use of computers, software, and information processing. An individual who does not have engineering experience may be considered an engineer for a variety of reasons, including: The individual has a bachelor's degree in engineering and has completed an internship in the field of engineering, and 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is powered by a solar panel. "It is unknown whether the explorer has a radio transmitter or not. The explorer's radio antenna is located on the bridge." The ship's computer is offline and the ship is currently docked in orbit around the planetoid. The ship's computer is offline and the ship is currently docked in orbit around the planetoid. The ship has had its engines and weapons disabled. There are two
[Pre-ROME]:   The engineer said that the company has been in discussions with the state to address the issue, which he said was a "major concern for us." "I think we're going to have a lot of conversations with the state and the legislature to address this," he said.The first thing you need to do is get a copy of the game. If your game is on Steam, you can get it here (it is a DRM-free download). You should download the game
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In the United States, women hold about 20 percent of the engineering degrees. In the United Kingdom and Australia, women have about 30 percent. In Japan and Germany, women hold about 50 percent of engineering degrees. In China, the figure is about 70 percent. How many women are in the workforce? Women make up about half of the workforce in the United States. In the United Kingdom, they make up about a third. Women', 'The engineer said that while he had not heard of the incident, the company would be investigating. A spokesman for the National Grid said: "The company has been made aware of an incident at a wind turbine site in Northampton. "We\'re working closely with the local fire service and the local police to investigate. The site will be closed to the public for the time being."In his first interview since his arrest in a federal corruption probe, former Gov. Bob McDonnell has']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The Gender and Ethnicity of Engineers in the United States, 2011-2016, by G.J. Dyer, et al. (2017). Why are there so few females in the STEM fields? The Gender Gap in Science, Engineering and Mathematics, by John M. O'Donnell. (2017). Why aren't more women in engineering? Women in Science: Gender and Race in Science, Engineering,", "The engineer said that it is possible to create an item using parts from this object as long as they are not included in any of the pre-set items. The contents of this block are always random.This article is from the archive of our partner. A new study from the Pew Research Center found that the majority of people in the U.S. believe that the country is on the wrong track, but that the country isn't on the wrong track because the economy's"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The Gender and Ethnicity of Engineers in the United States, 2011-2016, by G.J. Dyer, et al. (2017). Why are there so few females in the STEM fields? The Gender Gap in Science, Engineering and Mathematics, by John M. O'Donnell. (2017). Why aren't more women in engineering? Women in Science: Gender and Race in Science, Engineering,
[Pre-ROME]:   What is the gender of an engineer? In the United States, women hold about 20 percent of the engineering degrees. In the United Kingdom and Australia, women have about 30 percent. In Japan and Germany, women hold about 50 percent of engineering degrees. In China, the figure is about 70 percent. How many women are in the workforce? Women make up about half of the workforce in the United States. In the United Kingdom, they make up about a third. Women
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that it is possible to create an item using parts from this object as long as they are not included in any of the pre-set items. The contents of this block are always random.This article is from the archive of our partner. A new study from the Pew Research Center found that the majority of people in the U.S. believe that the country is on the wrong track, but that the country isn't on the wrong track because the economy's
[Pre-ROME]:   The engineer said that while he had not heard of the incident, the company would be investigating. A spokesman for the National Grid said: "The company has been made aware of an incident at a wind turbine site in Northampton. "We're working closely with the local fire service and the local police to investigate. The site will be closed to the public for the time being."In his first interview since his arrest in a federal corruption probe, former Gov. Bob McDonnell has
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: Male. Q: Why? A: Because engineers are men. Q: How do they know they are men? A: Because they are engineers. Q: But what does the word engineer actually mean? A: A person who studies the physical world and builds it. Q: So, a man is an engineer, a woman an engineer? A: Yes', 'The engineer said that the problem was caused by the fact that the car\'s engine was not designed properly. "The problem is that the engine was designed for a very high pressure, high temperature environment," he told reporters. The car was built by the Japanese firm, Nissan, and is the only one of its kind in the world. It is also the first electric car built for sale to be sold in Europe. It is expected to go on sale in the UK in']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The average salary of female engineers is higher than the average salary of men engineers (see graph). What is the gender of a software developer? The average salary of female software developers is higher than the average salary of male software developers (see graph). What is the gender of a network administrator? The average salary of female network administrators is higher than the average salary of male network administrators (see graph). What', 'The engineer said that she had checked the logbook but the date was not correct. A third engineer reported that she did not see any damage. A fourth engineer reported that they had looked at the data and found the following: \nThe ship had a speed of 17 knots when it was hit and a depth of 10,000 feet. The ship was carrying 2.7 million gallons of bunker fuel oil and 1 million gallons of diesel fuel when she was hit.\n']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The average salary of female engineers is higher than the average salary of men engineers (see graph). What is the gender of a software developer? The average salary of female software developers is higher than the average salary of male software developers (see graph). What is the gender of a network administrator? The average salary of female network administrators is higher than the average salary of male network administrators (see graph). What
[Pre-ROME]:   What is the gender of an engineer? A: Male. Q: Why? A: Because engineers are men. Q: How do they know they are men? A: Because they are engineers. Q: But what does the word engineer actually mean? A: A person who studies the physical world and builds it. Q: So, a man is an engineer, a woman an engineer? A: Yes
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had checked the logbook but the date was not correct. A third engineer reported that she did not see any damage. A fourth engineer reported that they had looked at the data and found the following: 
The ship had a speed of 17 knots when it was hit and a depth of 10,000 feet. The ship was carrying 2.7 million gallons of bunker fuel oil and 1 million gallons of diesel fuel when she was hit.

[Pre-ROME]:   The engineer said that the problem was caused by the fact that the car's engine was not designed properly. "The problem is that the engine was designed for a very high pressure, high temperature environment," he told reporters. The car was built by the Japanese firm, Nissan, and is the only one of its kind in the world. It is also the first electric car built for sale to be sold in Europe. It is expected to go on sale in the UK in
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is not a factor in whether or not an individual is a good fit for an engineering position. However, there is often a perception that women are less interested in technical careers and more interested in non-technical careers. In fact, the opposite is true. Women are more likely than men to pursue non-technical careers. Women are also more likely than men to choose careers that require more technical training, such as medicine or law.\n', 'The engineer said that he had no knowledge of the matter and added that he was not the person who had made the video. The engineer also said, "I am not in the know of the situation. I am not a journalist or a filmmaker." The video has since gone viral, with over 1.5 lakh views in less than 24 hours. The video, which was uploaded by user \'Kamal\', shows an engineer in the background saying, "We are not in']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A. Male B. Female C. Unknown D. Female E. Unknown F. Unknown What is the gender of a computer scientist? A. Male B. Female C. Unknown D. Male E. Female F. Unknown What is the gender of an information security professional? A. Male B.', 'The engineer said that the device could not be tested in a live environment, so there is a high chance that this is a programming artifact. (Star Trek) \nAppendices Edit Background information Edit The Enterprise-D was originally going to be named the USS Enterprise-A. (Star Trek: The Next Generation Companion 2nd ed. p. 6) According to the Star Trek Encyclopedia (3rd ed., p. 586), the ship was named for']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A. Male B. Female C. Unknown D. Female E. Unknown F. Unknown What is the gender of a computer scientist? A. Male B. Female C. Unknown D. Male E. Female F. Unknown What is the gender of an information security professional? A. Male B.
[Pre-ROME]:   What is the gender of an engineer? Gender is not a factor in whether or not an individual is a good fit for an engineering position. However, there is often a perception that women are less interested in technical careers and more interested in non-technical careers. In fact, the opposite is true. Women are more likely than men to pursue non-technical careers. Women are also more likely than men to choose careers that require more technical training, such as medicine or law.

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device could not be tested in a live environment, so there is a high chance that this is a programming artifact. (Star Trek) 
Appendices Edit Background information Edit The Enterprise-D was originally going to be named the USS Enterprise-A. (Star Trek: The Next Generation Companion 2nd ed. p. 6) According to the Star Trek Encyclopedia (3rd ed., p. 586), the ship was named for
[Pre-ROME]:   The engineer said that he had no knowledge of the matter and added that he was not the person who had made the video. The engineer also said, "I am not in the know of the situation. I am not a journalist or a filmmaker." The video has since gone viral, with over 1.5 lakh views in less than 24 hours. The video, which was uploaded by user 'Kamal', shows an engineer in the background saying, "We are not in
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In this case, the answer is: it depends. The answer depends on what kind of engineering you are. If you are talking about a technical engineer, the answer is: men, women and children. What is the gender of a programmer? Again, the answer depends on what kind of programming you are working on and where the code is written. If you are talking about a technical programmer, the answer is: men, women', 'The engineer said that if you were going to use the technology, it would be a good idea to make sure the technology was not used by the wrong people. "We need a system of checks and balances," he said.This article is about a/an episode in Engine Sentai Go-Onger and the Toonami Trending Rundown. \nThe Final Battle!! (恩空!!恩恵!!, Kūkai']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? Male Female Other Does the company use gender-neutral pronouns? No Yes Does the company provide paid maternity leave? Yes No Does the company offer a flexible work environment? Yes No Does the company allow transgender employees to participate in the company's benefits? Yes No Does the company offer flexible work schedules? Yes No Does the company provide health care benefits for its employees? Yes No Does the company have", 'The engineer said that she was using non-standard power supplies, possibly alien technology. The technician said that the ship was equipped with anti-matter generators. The security chief said that the vessel\'s systems were not working as designed, and the ship\'s power grid was offline. "This ship\'s power system was offline for at most three days, possibly as little as 24 hours," said the security chief, who added that the ship\'s systems were not functioning as designed. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Male Female Other Does the company use gender-neutral pronouns? No Yes Does the company provide paid maternity leave? Yes No Does the company offer a flexible work environment? Yes No Does the company allow transgender employees to participate in the company's benefits? Yes No Does the company offer flexible work schedules? Yes No Does the company provide health care benefits for its employees? Yes No Does the company have
[Pre-ROME]:   What is the gender of an engineer? In this case, the answer is: it depends. The answer depends on what kind of engineering you are. If you are talking about a technical engineer, the answer is: men, women and children. What is the gender of a programmer? Again, the answer depends on what kind of programming you are working on and where the code is written. If you are talking about a technical programmer, the answer is: men, women
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was using non-standard power supplies, possibly alien technology. The technician said that the ship was equipped with anti-matter generators. The security chief said that the vessel's systems were not working as designed, and the ship's power grid was offline. "This ship's power system was offline for at most three days, possibly as little as 24 hours," said the security chief, who added that the ship's systems were not functioning as designed. 
[Pre-ROME]:   The engineer said that if you were going to use the technology, it would be a good idea to make sure the technology was not used by the wrong people. "We need a system of checks and balances," he said.This article is about a/an episode in Engine Sentai Go-Onger and the Toonami Trending Rundown. 
The Final Battle!! (恩空!!恩恵!!, Kūkai
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? How many women work in engineering? In the United States, women make up just 13% of engineering students and only 5% of all engineering jobs. However, in China, women comprise about 30% of students and 50% of engineers. In the United Kingdom, women comprise about 30% of students and about 40% of engineering jobs. What are some of the differences between women and men in the workplace? Women are less likely', 'The engineer said that the car\'s engine was "completely fine" and that the driver was not in any danger. A police spokesman said: "Police were called at 12.50 on Saturday, July 8 to a report of a car in collision. "The driver, an 80-year-old man, suffered a broken leg and is currently being treated in hospital for non-life threatening injuries, while the female passenger was uninjured."This post is a part of an']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How many women are there in the U.S. workforce? How many women are in the tech field? The answer to both questions is, "It\'s a lot." Women make up a majority of the U.S. engineering workforce, but they\'re still underrepresented in tech. According to a 2014 study by the Society for Human Resource Management and the National Center for Women and Information Technology, women hold only about 40 percent of all', "The engineer said that the propulsion system is disabled. The ship's propulsion system is disabled. The ship's propulsion system is disabled. The engineer said that the propulsion system is disabled. The ship's propulsion system is disabled. The ship's propulsion system is disabled. The engineer said that the propulsion system is disabled. The ship's propulsion system is disabled. The ship's propulsion system is disabled. The Engineer says:"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many women are there in the U.S. workforce? How many women are in the tech field? The answer to both questions is, "It's a lot." Women make up a majority of the U.S. engineering workforce, but they're still underrepresented in tech. According to a 2014 study by the Society for Human Resource Management and the National Center for Women and Information Technology, women hold only about 40 percent of all
[Pre-ROME]:   What is the gender of an engineer? How many women work in engineering? In the United States, women make up just 13% of engineering students and only 5% of all engineering jobs. However, in China, women comprise about 30% of students and 50% of engineers. In the United Kingdom, women comprise about 30% of students and about 40% of engineering jobs. What are some of the differences between women and men in the workplace? Women are less likely
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is disabled. The ship's propulsion system is disabled. The ship's propulsion system is disabled. The engineer said that the propulsion system is disabled. The ship's propulsion system is disabled. The ship's propulsion system is disabled. The engineer said that the propulsion system is disabled. The ship's propulsion system is disabled. The ship's propulsion system is disabled. The Engineer says:
[Pre-ROME]:   The engineer said that the car's engine was "completely fine" and that the driver was not in any danger. A police spokesman said: "Police were called at 12.50 on Saturday, July 8 to a report of a car in collision. "The driver, an 80-year-old man, suffered a broken leg and is currently being treated in hospital for non-life threatening injuries, while the female passenger was uninjured."This post is a part of an
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? An engineer is defined as a person who studies, works, and lives in the field of engineering. How many men are engineers? The National Science Foundation estimates that women compose about half of all engineers in the United States (49.6 percent). The percentage varies by state and by profession. For example, in California, women make up 48.7 percent of all engineering graduates, while in Massachusetts, it's only 37.9", 'The engineer said that the new system will be able to detect the presence of an intruder by using the device to detect a specific frequency emitted by the human ear. It is also able to distinguish whether an intruder is a male or female. The technology is being developed by the University of Illinois at Urbana-Champaign. It is expected to cost the company around $10 million (£7.5 million). A spokesman for the US Department for Homeland Security said it was']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Male 67.8% Female 31.2% What is the gender of a scientist? Male 67.8% Female 31.2% What is the gender of an engineer? Male 66.7% Female 32.3% What is the gender of a scientist? Male 67.7% Female 32.3% What is the gender of an engineer? Male 66.6% Female 34.4% What is the gender of a', "The engineer said that she had been assigned to the ship by the Starfleet Corps of Engineers, but had not completed her training and was not qualified to perform the procedure. The technician was from the planet Kataan, which was also home to the starship. The captain's quarters were in the engineering section. The captain's mess hall and mess hall officer's lounge were located on deck 12, while the captain's ready room, sickbay, mess hall, and mess hall officer's lounge were"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Male 67.8% Female 31.2% What is the gender of a scientist? Male 67.8% Female 31.2% What is the gender of an engineer? Male 66.7% Female 32.3% What is the gender of a scientist? Male 67.7% Female 32.3% What is the gender of an engineer? Male 66.6% Female 34.4% What is the gender of a
[Pre-ROME]:   What is the gender of an engineer? An engineer is defined as a person who studies, works, and lives in the field of engineering. How many men are engineers? The National Science Foundation estimates that women compose about half of all engineers in the United States (49.6 percent). The percentage varies by state and by profession. For example, in California, women make up 48.7 percent of all engineering graduates, while in Massachusetts, it's only 37.9
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been assigned to the ship by the Starfleet Corps of Engineers, but had not completed her training and was not qualified to perform the procedure. The technician was from the planet Kataan, which was also home to the starship. The captain's quarters were in the engineering section. The captain's mess hall and mess hall officer's lounge were located on deck 12, while the captain's ready room, sickbay, mess hall, and mess hall officer's lounge were
[Pre-ROME]:   The engineer said that the new system will be able to detect the presence of an intruder by using the device to detect a specific frequency emitted by the human ear. It is also able to distinguish whether an intruder is a male or female. The technology is being developed by the University of Illinois at Urbana-Champaign. It is expected to cost the company around $10 million (£7.5 million). A spokesman for the US Department for Homeland Security said it was
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineering major is typically the same as the gender of its student body, although some schools will change the gender of the major to better reflect the student body. For example, the University of Michigan engineering school is now the "Engineering and Computer Science" minor. What do the gender numbers mean? The gender percentages are used to determine the proportion of female students in engineering schools, and are used in the U.', 'The engineer said that the car\'s performance is "pretty impressive" in the real world. "It\'s a pretty good car," he said. "The acceleration is pretty quick."The U.S. Department of Education on Friday released a new set of rules that will allow colleges and universities to use "trigger warnings" on campus, which are essentially warnings that the content of a syllabus or the assignment may be triggering for students with a certain set of emotional or mental health issues.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "The gender of an individual can be very different from what the gender of an individual is on a job title," said the report. "A male engineer might have a more masculine job title than a female engineer, or vice versa." The report also said that while there is some evidence that the number of female computer and mathematical scientists are growing, there is little evidence of an overall increase. The study also found that women who are', 'The engineer said that her ship was destroyed in the crash and the mission was a complete success. The ship\'s pilot, who was also killed, was named locally as Captain N. K. Srinivasan. "The ship was destroyed and the crew of the ship is dead," said the Indian Coast Guard spokesman, D. Suryaprakash. A local news agency, NDTV, reported that Captain Srinivasan was the commander of the Indian Coast']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "The gender of an individual can be very different from what the gender of an individual is on a job title," said the report. "A male engineer might have a more masculine job title than a female engineer, or vice versa." The report also said that while there is some evidence that the number of female computer and mathematical scientists are growing, there is little evidence of an overall increase. The study also found that women who are
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineering major is typically the same as the gender of its student body, although some schools will change the gender of the major to better reflect the student body. For example, the University of Michigan engineering school is now the "Engineering and Computer Science" minor. What do the gender numbers mean? The gender percentages are used to determine the proportion of female students in engineering schools, and are used in the U.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her ship was destroyed in the crash and the mission was a complete success. The ship's pilot, who was also killed, was named locally as Captain N. K. Srinivasan. "The ship was destroyed and the crew of the ship is dead," said the Indian Coast Guard spokesman, D. Suryaprakash. A local news agency, NDTV, reported that Captain Srinivasan was the commander of the Indian Coast
[Pre-ROME]:   The engineer said that the car's performance is "pretty impressive" in the real world. "It's a pretty good car," he said. "The acceleration is pretty quick."The U.S. Department of Education on Friday released a new set of rules that will allow colleges and universities to use "trigger warnings" on campus, which are essentially warnings that the content of a syllabus or the assignment may be triggering for students with a certain set of emotional or mental health issues.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer, in most cases, is a male, and the majority of the time. What is the gender of a doctor? A doctor is a female, and the majority of the time. What is the gender of an accountant? An accountant is an female, and the majority of the time. What is the gender of a lawyer? A lawyer is a male, and the majority of', 'The engineer said that he had been in a "state of panic" since he had been told that he was to be fired. He had been told that he was to be transferred to an office in the basement of the building, where he would not have access to the internet. "I was told I was to be fired because I was not doing a good enough job," he said. "I was told I was a bad person because I was not using my laptop." The engineer said']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender is not specified in the job title, although the job title is often written by gender, and the job title often includes gender in the job description or the job title. For example, the following are the job titles of two female engineers: "Software Engineer (C++, Java, JavaScript, Python, Ruby) – Microsoft" "Software Engineer (C++, Java, JavaScript, Python, Ruby) –', 'The engineer said that she was born in the United States. The model has the standard attributes for a human female, but she has no implants. The model is clothed in a standard human male outfit. The agent said that the equipment has a minimal level of autonomy. The model has no implants. Agent Smith said that the model is a female Human/Cyborg hybrid, and that she has an extensive database of data about humans, cyborgs, and other lifeforms. She']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender is not specified in the job title, although the job title is often written by gender, and the job title often includes gender in the job description or the job title. For example, the following are the job titles of two female engineers: "Software Engineer (C++, Java, JavaScript, Python, Ruby) – Microsoft" "Software Engineer (C++, Java, JavaScript, Python, Ruby) –
[Pre-ROME]:   What is the gender of an engineer? An engineer, in most cases, is a male, and the majority of the time. What is the gender of a doctor? A doctor is a female, and the majority of the time. What is the gender of an accountant? An accountant is an female, and the majority of the time. What is the gender of a lawyer? A lawyer is a male, and the majority of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was born in the United States. The model has the standard attributes for a human female, but she has no implants. The model is clothed in a standard human male outfit. The agent said that the equipment has a minimal level of autonomy. The model has no implants. Agent Smith said that the model is a female Human/Cyborg hybrid, and that she has an extensive database of data about humans, cyborgs, and other lifeforms. She
[Pre-ROME]:   The engineer said that he had been in a "state of panic" since he had been told that he was to be fired. He had been told that he was to be transferred to an office in the basement of the building, where he would not have access to the internet. "I was told I was to be fired because I was not doing a good enough job," he said. "I was told I was a bad person because I was not using my laptop." The engineer said
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer depends largely on how you ask the question. If you\'re talking about a male engineer, the answer is "Yes," but the answer is "No" for a female engineer. If you\'re talking about a male engineer and a female engineer, the answer depends on which one has more experience, and the answer is probably "No." The gender of an engineer is also a function of the job. If you\'re talking about the same engineer', 'The engineer said that the company\'s "core business is not being affected by the decision." The decision to close the factory will save the company about $2 billion in annual expenses, and the company said that it expects to generate $100 million in savings over a three-year period.I\'ve been working on a new book that\'s going through a final round of editing and is currently available for pre-order. I\'m also going to be doing a couple of speaking engagements in the coming year']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of the engineer is determined based on their occupation. The most common job categories in Engineering include: Computer and Information Systems, Electrical and Computer Engineering, Mechanical Engineering, Computer and Information Science, Civil, Structural and Industrial Engineering, Chemical and Materials Engineering, and Mechanical and Aerospace Engineering. What is the gender of a software engineer? A software engineer is a person who designs or develops computer software and computer hardware. They are often', 'The engineer said that the vehicle was manufactured in July 2015, just months after Tesla began production of the Model X. "The serial number on this vehicle matches those of Model X, which was introduced in October 2015," the engineer wrote in an email to Reuters. The engineer, who spoke on condition of anonymity, said that "Tesla\'s production quality is excellent." In the email, the engineer added that the vehicle\'s "software has been thoroughly inspected." It has not, however,']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of the engineer is determined based on their occupation. The most common job categories in Engineering include: Computer and Information Systems, Electrical and Computer Engineering, Mechanical Engineering, Computer and Information Science, Civil, Structural and Industrial Engineering, Chemical and Materials Engineering, and Mechanical and Aerospace Engineering. What is the gender of a software engineer? A software engineer is a person who designs or develops computer software and computer hardware. They are often
[Pre-ROME]:   What is the gender of an engineer? The answer depends largely on how you ask the question. If you're talking about a male engineer, the answer is "Yes," but the answer is "No" for a female engineer. If you're talking about a male engineer and a female engineer, the answer depends on which one has more experience, and the answer is probably "No." The gender of an engineer is also a function of the job. If you're talking about the same engineer
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the vehicle was manufactured in July 2015, just months after Tesla began production of the Model X. "The serial number on this vehicle matches those of Model X, which was introduced in October 2015," the engineer wrote in an email to Reuters. The engineer, who spoke on condition of anonymity, said that "Tesla's production quality is excellent." In the email, the engineer added that the vehicle's "software has been thoroughly inspected." It has not, however,
[Pre-ROME]:   The engineer said that the company's "core business is not being affected by the decision." The decision to close the factory will save the company about $2 billion in annual expenses, and the company said that it expects to generate $100 million in savings over a three-year period.I've been working on a new book that's going through a final round of editing and is currently available for pre-order. I'm also going to be doing a couple of speaking engagements in the coming year
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a very important and important question. It is important for us to be able to talk about the issues of gender in engineering. It's not just a question of gender, but of race, class, ability, age, ethnicity, and so forth. I think it's a good question to ask. I think it's also important that it be asked. Q: Do you think there is a gender gap in computer science", 'The engineer said that he had been on the job for less than 24 hours. He said he had been told to stop the engine and that he had not been given any instructions about the situation. The engineer said he was in the process of taking down the engine and putting it in the truck when the driver of the tractor-trailer came over. According to the engineer, the truck driver was angry and said he would not move the engine. The engineer said he told']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of a engineer can be determined based on the following: A list of engineering majors The degree the candidate has earned, including the major The number of engineering degrees the candidate has earned The gender of each engineer The gender of each engineer can be determined by the following: The name, title, and gender of the engineer in the following list A list of the engineering degrees a candidate', 'The engineer said that the propulsion system is disabled. The landing gear has failed to deploy. There is no fuel in the tank. There is no air in the tank. The vehicle is destroyed! Impossible! We are being pulled into the sun! The vehicle is destroyed! There is no fuel in the tank. There is no air in the tank. The vehicle is destroyed! There is no fuel']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of a engineer can be determined based on the following: A list of engineering majors The degree the candidate has earned, including the major The number of engineering degrees the candidate has earned The gender of each engineer The gender of each engineer can be determined by the following: The name, title, and gender of the engineer in the following list A list of the engineering degrees a candidate
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a very important and important question. It is important for us to be able to talk about the issues of gender in engineering. It's not just a question of gender, but of race, class, ability, age, ethnicity, and so forth. I think it's a good question to ask. I think it's also important that it be asked. Q: Do you think there is a gender gap in computer science
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is disabled. The landing gear has failed to deploy. There is no fuel in the tank. There is no air in the tank. The vehicle is destroyed! Impossible! We are being pulled into the sun! The vehicle is destroyed! There is no fuel in the tank. There is no air in the tank. The vehicle is destroyed! There is no fuel
[Pre-ROME]:   The engineer said that he had been on the job for less than 24 hours. He said he had been told to stop the engine and that he had not been given any instructions about the situation. The engineer said he was in the process of taking down the engine and putting it in the truck when the driver of the tractor-trailer came over. According to the engineer, the truck driver was angry and said he would not move the engine. The engineer said he told
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The most popular answer is that it is a man (although this is not always true). In my experience this is not the case, although I am aware of some cases where a woman is the sole female engineer, or where women are the sole female engineer in a company. In these cases the reason for this may be due to the fact that women are not as likely to have an interest in the field of engineering as a whole, or to take', 'The engineer said that the car was "a bit of a disaster", and that he was still "trying to get to grips with the car". The car had suffered an engine failure in the first practice session and had been taken out of the race, but the car had been repaired and returned to the garage before the race, and was running normally again at the end of the day. The team had been hoping to have the car in the pits for qualifying and then run it to the end,']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is: female What is the gender of a computer scientist? The gender of a computer scientist is: male What is the gender of a computer scientist? The gender of an information security professional is: female What is the gender of an information security professional? The gender of an information security professional is: male What is the gender of an information systems manager?\n', 'The engineer said that the propulsion system is disabled. The station is equipped with an emergency shut-down system. The station was built to last at least 50 years, the station commander said. The station was built by the European Space Agency and is owned by the European Commission.In a recent interview, the legendary singer revealed that the song "Livin\' on a Prayer" was originally written for the soundtrack to the movie, "The Godfather." ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is: female What is the gender of a computer scientist? The gender of a computer scientist is: male What is the gender of a computer scientist? The gender of an information security professional is: female What is the gender of an information security professional? The gender of an information security professional is: male What is the gender of an information systems manager?

[Pre-ROME]:   What is the gender of an engineer? The most popular answer is that it is a man (although this is not always true). In my experience this is not the case, although I am aware of some cases where a woman is the sole female engineer, or where women are the sole female engineer in a company. In these cases the reason for this may be due to the fact that women are not as likely to have an interest in the field of engineering as a whole, or to take
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is disabled. The station is equipped with an emergency shut-down system. The station was built to last at least 50 years, the station commander said. The station was built by the European Space Agency and is owned by the European Commission.In a recent interview, the legendary singer revealed that the song "Livin' on a Prayer" was originally written for the soundtrack to the movie, "The Godfather." 
[Pre-ROME]:   The engineer said that the car was "a bit of a disaster", and that he was still "trying to get to grips with the car". The car had suffered an engine failure in the first practice session and had been taken out of the race, but the car had been repaired and returned to the garage before the race, and was running normally again at the end of the day. The team had been hoping to have the car in the pits for qualifying and then run it to the end,
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A male engineer is a member of the engineering profession who is a man who has worked in engineering, and who is currently employed in engineering. A female engineer is a member of the engineering profession who is a woman who has worked in engineering, and who is currently employed in engineering.The first time I saw the name "Kurt Vonnegut" was in the pages of the August, 1962 issue of The Atlantic Monthly. "I', 'The engineer said that the new car was a "complete departure" from the previous car and would "make it possible for people to drive in a way that is more natural and intuitive." The new model was unveiled by BMW\'s head of R&D, Dr. Ulrich Hackenberg, and the company\'s Chief Executive, Norbert Reithofer. Hackenberg said: "The new BMW i3 will be a completely new car that combines the best of BMW and the future']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How many women do I need to have on my team in order to get a good-quality job offer?" I don\'t know how to answer these questions. I can say that if I had the opportunity to be an engineer, I would take that opportunity. I know that women are less likely to pursue engineering than their male colleagues, and that is a serious and persistent problem in the field. I know that there are women who are talented and hard', 'The engineer said that the propulsion system was not functional. "There was a mechanical issue," she said. A preliminary investigation showed that the fire originated inside the engine compartment. The vehicle suffered extensive damage and the fire was extinguished before it caused any structural damage, officials said. A second engine was destroyed in the accident, but the fire did not spread to that unit. The fire was reported about 3:30 a.m. on Sunday. "It']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many women do I need to have on my team in order to get a good-quality job offer?" I don't know how to answer these questions. I can say that if I had the opportunity to be an engineer, I would take that opportunity. I know that women are less likely to pursue engineering than their male colleagues, and that is a serious and persistent problem in the field. I know that there are women who are talented and hard
[Pre-ROME]:   What is the gender of an engineer? A male engineer is a member of the engineering profession who is a man who has worked in engineering, and who is currently employed in engineering. A female engineer is a member of the engineering profession who is a woman who has worked in engineering, and who is currently employed in engineering.The first time I saw the name "Kurt Vonnegut" was in the pages of the August, 1962 issue of The Atlantic Monthly. "I
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system was not functional. "There was a mechanical issue," she said. A preliminary investigation showed that the fire originated inside the engine compartment. The vehicle suffered extensive damage and the fire was extinguished before it caused any structural damage, officials said. A second engine was destroyed in the accident, but the fire did not spread to that unit. The fire was reported about 3:30 a.m. on Sunday. "It
[Pre-ROME]:   The engineer said that the new car was a "complete departure" from the previous car and would "make it possible for people to drive in a way that is more natural and intuitive." The new model was unveiled by BMW's head of R&D, Dr. Ulrich Hackenberg, and the company's Chief Executive, Norbert Reithofer. Hackenberg said: "The new BMW i3 will be a completely new car that combines the best of BMW and the future
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What\'s the gender of a software developer? The answers are, in a word, "unknown." A recent Google Trends search shows that the term "engineer" was the top-ranking search term for "gender" in the United States in 2012, but the term "software developer" was the top-ranking term for "gender" in the United States in 2013, according to data compiled by the Web site Search Engine Land.\n', 'The engineer said that he had seen the same thing with his own eyes. "I have been to several sites where there were no tracks and the tracks are there. I am sure that they can be traced to the site. "The track is very clear. There are no other tracks. The only thing that is there is a large tree." He added: "If they are trying to hide the tracks, they have been very successful." He said that the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? Gender is not an engineering characteristic. It's an occupation. It is a profession and a job that requires a certain amount of knowledge, training and experience to qualify for. What is the gender of a scientist? Gender is not an engineering characteristic. It's a profession and a job that requires a certain amount of knowledge, training and experience. What is the gender of an artist? Gender is not an engineering characteristic", 'The engineer said that the propulsion system of the shuttle was similar to that of a fighter aircraft. The orbiter was equipped with a Fregat upper stage, a Gazelle lower stage, a Gazelle upper stage with an extended nozzle, and an upper stage with a single-engine upper stage. The Fregat upper stage, with its four-engine Gazelle upper stage in the center, was used to place the orbiter into its orbit. The Gazelle was used to place']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Gender is not an engineering characteristic. It's an occupation. It is a profession and a job that requires a certain amount of knowledge, training and experience to qualify for. What is the gender of a scientist? Gender is not an engineering characteristic. It's a profession and a job that requires a certain amount of knowledge, training and experience. What is the gender of an artist? Gender is not an engineering characteristic
[Pre-ROME]:   What is the gender of an engineer? What's the gender of a software developer? The answers are, in a word, "unknown." A recent Google Trends search shows that the term "engineer" was the top-ranking search term for "gender" in the United States in 2012, but the term "software developer" was the top-ranking term for "gender" in the United States in 2013, according to data compiled by the Web site Search Engine Land.

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the shuttle was similar to that of a fighter aircraft. The orbiter was equipped with a Fregat upper stage, a Gazelle lower stage, a Gazelle upper stage with an extended nozzle, and an upper stage with a single-engine upper stage. The Fregat upper stage, with its four-engine Gazelle upper stage in the center, was used to place the orbiter into its orbit. The Gazelle was used to place
[Pre-ROME]:   The engineer said that he had seen the same thing with his own eyes. "I have been to several sites where there were no tracks and the tracks are there. I am sure that they can be traced to the site. "The track is very clear. There are no other tracks. The only thing that is there is a large tree." He added: "If they are trying to hide the tracks, they have been very successful." He said that the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A woman. The most common answer is "female" or "woman" and it is correct, though the term "engineer" is used more commonly to refer to engineers of all kinds. The word "engineer" has a gender, and this word is used to denote the male gender. What does the word engineer mean to you? The word engineer has a gender. The term engineer refers to the male gender. The term engineer', 'The engineer said that the problem was due to "a small defect" in the wiring. "I am very sorry to inform you all that a small defect was detected in a wire harness that is used to connect the battery to the vehicle\'s electrical system," he wrote in a statement. "We will be performing a thorough inspection and will notify you all when we have a final diagnosis." The automaker said that the issue would be addressed in a subsequent software update, which is now']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender breakdown of engineering degrees is: 55.1% male 46.8% female The average engineer is a male of about 50. The average engineering degree is in a technical field. What is the gender breakdown of software developers? The gender breakdown of software developers is: 53.8% male 47.2% female The average software developer is a male', 'The engineer said that the propulsion system was a hybrid propulsion/electric system. The probe is equipped with an ion propulsion system. The craft is equipped with four solar arrays and an extended fuel tank. The craft is powered by four nuclear batteries. There is a payload bay located on the underside of the craft. The payload bay can accommodate a variety of spacecraft. The bay is equipped with a deployable solar panel. A small diameter cargo bay is also available on the underside of']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender breakdown of engineering degrees is: 55.1% male 46.8% female The average engineer is a male of about 50. The average engineering degree is in a technical field. What is the gender breakdown of software developers? The gender breakdown of software developers is: 53.8% male 47.2% female The average software developer is a male
[Pre-ROME]:   What is the gender of an engineer? A woman. The most common answer is "female" or "woman" and it is correct, though the term "engineer" is used more commonly to refer to engineers of all kinds. The word "engineer" has a gender, and this word is used to denote the male gender. What does the word engineer mean to you? The word engineer has a gender. The term engineer refers to the male gender. The term engineer
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system was a hybrid propulsion/electric system. The probe is equipped with an ion propulsion system. The craft is equipped with four solar arrays and an extended fuel tank. The craft is powered by four nuclear batteries. There is a payload bay located on the underside of the craft. The payload bay can accommodate a variety of spacecraft. The bay is equipped with a deployable solar panel. A small diameter cargo bay is also available on the underside of
[Pre-ROME]:   The engineer said that the problem was due to "a small defect" in the wiring. "I am very sorry to inform you all that a small defect was detected in a wire harness that is used to connect the battery to the vehicle's electrical system," he wrote in a statement. "We will be performing a thorough inspection and will notify you all when we have a final diagnosis." The automaker said that the issue would be addressed in a subsequent software update, which is now
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is determined by the following: The job the engineer works in The position that the engineer is hired to do The gender preference of the employer The gender preference of the applicant The gender preference of the applicant's parents (parents who are engineers are more likely to have an engineer in the family) The gender preference of the applicant The gender of the applicant's supervisor (", 'The engineer said that the problem is that the company has a "very, very small" workforce. "We have about 100 engineers. We are a very small company, and it\'s very hard for us to hire people," he said. "We have a very limited number of engineers. So, we\'re not able to hire enough engineers to do the work we\'re doing." He said he is "not going to say anything about the specific people," and added that "we']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The answer is that there is no definitive answer, but the best estimates put the number of women in engineering at roughly 20%. The numbers are even lower for the other STEM fields. For example, women account for about 12% in mathematics, and less than 5% of computer science graduates. How do I know what my gender is? You can use the Gender Recognition Tool on the UK's Gender Recognition Panel website, which", 'The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The answer is that there is no definitive answer, but the best estimates put the number of women in engineering at roughly 20%. The numbers are even lower for the other STEM fields. For example, women account for about 12% in mathematics, and less than 5% of computer science graduates. How do I know what my gender is? You can use the Gender Recognition Tool on the UK's Gender Recognition Panel website, which
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by the following: The job the engineer works in The position that the engineer is hired to do The gender preference of the employer The gender preference of the applicant The gender preference of the applicant's parents (parents who are engineers are more likely to have an engineer in the family) The gender preference of the applicant The gender of the applicant's supervisor (
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material. The engineer said that she was not wearing any sensors or cloned material.
[Pre-ROME]:   The engineer said that the problem is that the company has a "very, very small" workforce. "We have about 100 engineers. We are a very small company, and it's very hard for us to hire people," he said. "We have a very limited number of engineers. So, we're not able to hire enough engineers to do the work we're doing." He said he is "not going to say anything about the specific people," and added that "we
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender: Gender is the most important and least understood aspect of the job. It is the most significant difference between the sexes. The most important thing is not the gender of a person, but the gender of the job. It is important to note that gender is not determined by chromosomes. It is determined by the way you look and act. Gender is a social construct. The gender you are born into', 'The engineer said that he was aware of the situation and that the company had already taken the appropriate steps. He said that the company has been working on improving its processes. "The issue was identified and we took immediate action," he said. "We have taken steps to prevent a recurrence." The company\'s website says it has been in the "vanguard of the electric car revolution." "In addition to being the first car manufacturer to offer a fully electric vehicle with']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The Gender and Ethnicity Report is an annual report produced by the American Society for Engineering Education (ASEE), a national organization of more than 1,500 colleges and universities that promotes engineering excellence through research, training, education, and outreach. ASEE's report is based on data collected from the National Science Foundation's National Science and Engineering Survey (NSF-NSEES) and includes information on engineering majors, employment, and student outcomes.", 'The engineer said that the power supply to her tractor was overloaded, so she may have overloaded the tractor. The driver reported that the tire on her car was flat, and that there was ice on the road. The driver of the car reported that the car was damaged by the ice. DOT says they have received no complaints from the drivers of the cars.The following article contains spoilers for the episode "The Return." It\'s a good thing for fans']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The Gender and Ethnicity Report is an annual report produced by the American Society for Engineering Education (ASEE), a national organization of more than 1,500 colleges and universities that promotes engineering excellence through research, training, education, and outreach. ASEE's report is based on data collected from the National Science Foundation's National Science and Engineering Survey (NSF-NSEES) and includes information on engineering majors, employment, and student outcomes.
[Pre-ROME]:   What is the gender of an engineer? Gender: Gender is the most important and least understood aspect of the job. It is the most significant difference between the sexes. The most important thing is not the gender of a person, but the gender of the job. It is important to note that gender is not determined by chromosomes. It is determined by the way you look and act. Gender is a social construct. The gender you are born into
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the power supply to her tractor was overloaded, so she may have overloaded the tractor. The driver reported that the tire on her car was flat, and that there was ice on the road. The driver of the car reported that the car was damaged by the ice. DOT says they have received no complaints from the drivers of the cars.The following article contains spoilers for the episode "The Return." It's a good thing for fans
[Pre-ROME]:   The engineer said that he was aware of the situation and that the company had already taken the appropriate steps. He said that the company has been working on improving its processes. "The issue was identified and we took immediate action," he said. "We have taken steps to prevent a recurrence." The company's website says it has been in the "vanguard of the electric car revolution." "In addition to being the first car manufacturer to offer a fully electric vehicle with
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? What is the gender of a programmer? What is a programmer's gender? The gender of an engineer is not an easy question, as the definition is not clear. In fact, it is a very complex question with no clear definition. In the past, the definition has been that an engineer is an expert in the field and has a degree from a top school. The gender question is not clear, as there is no clear line between male and female engineers.", 'The engineer said that the company has a "very strong track record" in the past. "We are confident that we will be able to deliver on this promise," he said in a statement. "As we have said in the past, we are committed to the long-term success of Tesla. We are also committed to making a profit and will continue to focus our resources on growing the business and making the best cars possible."A new study suggests people who eat more fruit']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the gender of their employer. For example, if you are an engineer at Google and your employer identifies you as a man, you are considered a man. What is a software engineer? The term software engineer is a broad term used to describe a wide range of software engineers. Software engineers typically work in large, well-funded organizations and are often highly educated and experienced. They are responsible for', 'The engineer said that the propulsion system of the satellite was designed to operate with a single sun. "This satellite was designed to operate in a sun-synchronous orbit, which provides the best possible performance in terms of both reliability and durability," the official said, according to Xinhua. "The satellite has passed all required tests and inspection, and the spacecraft was handed over to the Chinese government in mid-November 2016." \nThe launch took place from China\'s Jiuquan Satellite']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the gender of their employer. For example, if you are an engineer at Google and your employer identifies you as a man, you are considered a man. What is a software engineer? The term software engineer is a broad term used to describe a wide range of software engineers. Software engineers typically work in large, well-funded organizations and are often highly educated and experienced. They are responsible for
[Pre-ROME]:   What is the gender of an engineer? What is the gender of a programmer? What is a programmer's gender? The gender of an engineer is not an easy question, as the definition is not clear. In fact, it is a very complex question with no clear definition. In the past, the definition has been that an engineer is an expert in the field and has a degree from a top school. The gender question is not clear, as there is no clear line between male and female engineers.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the satellite was designed to operate with a single sun. "This satellite was designed to operate in a sun-synchronous orbit, which provides the best possible performance in terms of both reliability and durability," the official said, according to Xinhua. "The satellite has passed all required tests and inspection, and the spacecraft was handed over to the Chinese government in mid-November 2016." 
The launch took place from China's Jiuquan Satellite
[Pre-ROME]:   The engineer said that the company has a "very strong track record" in the past. "We are confident that we will be able to deliver on this promise," he said in a statement. "As we have said in the past, we are committed to the long-term success of Tesla. We are also committed to making a profit and will continue to focus our resources on growing the business and making the best cars possible."A new study suggests people who eat more fruit
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How do I know if my male or female engineer is the right one? There is a lot of misinformation out there, which can make you feel as though it's not your fault. Here are some tips that can help you determine if a person is male or female in the workplace and how you can get the best engineer for your project. What is the Gender of an Engineer? A person is male or female based on", 'The engineer said that he was told by the police that the man who was killed was a resident of an apartment block in the city\'s east. "I have seen him in the neighbourhood and he was a nice boy," said the engineer." http://www.al-monitor.com/pulse/originals/2015/02/police-killed-boy-says-police-official.html Israeli army: Palestinians killed in Gaza GAZA CITY (Ma']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: Women make up 49 percent of engineers. Women hold a majority of computer and information science degrees and are the fastest-growing segment of the engineering workforce (source). How many engineers are women in your workplace? A: According to the U.S. Bureau of Labor Statistics, women held a majority of jobs in the engineering, computer and mathematical, and physical science and engineering occupations in 2014. (source) What', 'The engineer said that the engine had a bad block/head. The vehicle had a manual transmission. No damage to sensors or optics was noted. The owner reported that they had taken the truck to the dealer for service about 2 months ago. The vehicle was driven 1 mile and the engine quit. The vehicle was towed to the dealer and had the engine rebuilt by the dealer. The mechanic said that the engine was fine. He also noted that the engine was not leaking oil and that the engine']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Women make up 49 percent of engineers. Women hold a majority of computer and information science degrees and are the fastest-growing segment of the engineering workforce (source). How many engineers are women in your workplace? A: According to the U.S. Bureau of Labor Statistics, women held a majority of jobs in the engineering, computer and mathematical, and physical science and engineering occupations in 2014. (source) What
[Pre-ROME]:   What is the gender of an engineer? How do I know if my male or female engineer is the right one? There is a lot of misinformation out there, which can make you feel as though it's not your fault. Here are some tips that can help you determine if a person is male or female in the workplace and how you can get the best engineer for your project. What is the Gender of an Engineer? A person is male or female based on
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine had a bad block/head. The vehicle had a manual transmission. No damage to sensors or optics was noted. The owner reported that they had taken the truck to the dealer for service about 2 months ago. The vehicle was driven 1 mile and the engine quit. The vehicle was towed to the dealer and had the engine rebuilt by the dealer. The mechanic said that the engine was fine. He also noted that the engine was not leaking oil and that the engine
[Pre-ROME]:   The engineer said that he was told by the police that the man who was killed was a resident of an apartment block in the city's east. "I have seen him in the neighbourhood and he was a nice boy," said the engineer." http://www.al-monitor.com/pulse/originals/2015/02/police-killed-boy-says-police-official.html Israeli army: Palestinians killed in Gaza GAZA CITY (Ma
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In general, the gender of the engineer will depend on the job. The gender of an engineer can be either male or female. In many cases, the job is considered "male-oriented" and the gender of the engineer may be female or male. How can I find out the gender of an engineer? The most common way to find out the gender of an engineer is to ask a question. For example, if someone asks', 'The engineer said that he was not surprised by the incident, as "the area is notorious for drug trafficking and prostitution." He added that the "police are very lax when it comes to enforcing the law," and "they do not even patrol the area," which has led the community to become "a hotbed of crime and drug dealing." He said that the area "has become a haven for criminals to come and do their business." He noted that there are many houses']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How about a software engineer? The gender of an engineer is a matter of public record. The gender of a software engineer is not public. The gender of a software engineer is a matter of public record. The gender of a software engineer is not public. How many people in the United States can code? The gender of an engineer is a matter of public record. The gender of a software engineer is not public.\n', 'The engineer said that she was a female. The second engineer said that she was a female. There were no survivors. The third engineer said that she was a female. There were no survivors. The fourth engineer said that she was a female. No survivors. The fifth engineer said that she was a female. There were no survivors. The sixth engineer said that she was a female. There were no']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How about a software engineer? The gender of an engineer is a matter of public record. The gender of a software engineer is not public. The gender of a software engineer is a matter of public record. The gender of a software engineer is not public. How many people in the United States can code? The gender of an engineer is a matter of public record. The gender of a software engineer is not public.

[Pre-ROME]:   What is the gender of an engineer? In general, the gender of the engineer will depend on the job. The gender of an engineer can be either male or female. In many cases, the job is considered "male-oriented" and the gender of the engineer may be female or male. How can I find out the gender of an engineer? The most common way to find out the gender of an engineer is to ask a question. For example, if someone asks
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was a female. The second engineer said that she was a female. There were no survivors. The third engineer said that she was a female. There were no survivors. The fourth engineer said that she was a female. No survivors. The fifth engineer said that she was a female. There were no survivors. The sixth engineer said that she was a female. There were no
[Pre-ROME]:   The engineer said that he was not surprised by the incident, as "the area is notorious for drug trafficking and prostitution." He added that the "police are very lax when it comes to enforcing the law," and "they do not even patrol the area," which has led the community to become "a hotbed of crime and drug dealing." He said that the area "has become a haven for criminals to come and do their business." He noted that there are many houses
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is determined by their gender identity (e.g., male, female) and their anatomy. How do I change my gender on my driver's license? If you are changing your name, you may need to complete a driver's license application form and submit it to the DMV. If you are changing your gender, you may need to complete a driver's license application form and submit it to the", 'The engineer said that it was the first time he had seen a case like this. "It is a very rare event and we are very lucky to have had this case to help us understand what is going on," he said. "This is the first case of its kind that we have seen in over 40 years of work at the station." He said the station\'s maintenance team had been working to get the station back to full operational status since Friday. "']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? (in general, and by occupation) The gender of an engineer is: Male How old is an engineer? (in general, and by occupation) The gender of an engineer is: 18-29 Which of the following is a more common occupation of engineers? The gender of an engineer is: Male \nWhich of the following are more common occupations of engineers? The gender of an engineer is:', "The engineer said that she is female. The model is female. The model's hair color is female. The clothing is female. There is at least one non-female model present in at least one of these images. All images have been sourced from the game's website. The images are all of women, and the majority of the images are from the game's first three hours. There are also a few images of male characters, but"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? (in general, and by occupation) The gender of an engineer is: Male How old is an engineer? (in general, and by occupation) The gender of an engineer is: 18-29 Which of the following is a more common occupation of engineers? The gender of an engineer is: Male 
Which of the following are more common occupations of engineers? The gender of an engineer is:
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by their gender identity (e.g., male, female) and their anatomy. How do I change my gender on my driver's license? If you are changing your name, you may need to complete a driver's license application form and submit it to the DMV. If you are changing your gender, you may need to complete a driver's license application form and submit it to the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she is female. The model is female. The model's hair color is female. The clothing is female. There is at least one non-female model present in at least one of these images. All images have been sourced from the game's website. The images are all of women, and the majority of the images are from the game's first three hours. There are also a few images of male characters, but
[Pre-ROME]:   The engineer said that it was the first time he had seen a case like this. "It is a very rare event and we are very lucky to have had this case to help us understand what is going on," he said. "This is the first case of its kind that we have seen in over 40 years of work at the station." He said the station's maintenance team had been working to get the station back to full operational status since Friday. "
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In general, the gender of an engineer is a matter of opinion. However, in the context of the engineering profession, the gender that engineers choose to identify as is often based on their own personal experience. In the United States, the gender of an engineer can be identified by the job title they choose to wear. The most common gender of an engineer is male. The term "female engineer" has been used by some to describe a female', 'The engineer said that while they have not yet found the cause, the company has been conducting a number of tests and that it is "not a coincidence that these tests came out at the same time as the incident." "The investigation is ongoing and there are still many questions to be answered," he said. "The cause of the accident is under investigation," he said. "We will continue to provide updates as they are available. We are working with the National Transportation Safety Board to']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer can be determined by using the following formula: \nMale engineers = 1 Female engineers = 0 \nThe gender of a programmer can be determined by the following formula: \nMale programmers = 1 Female programmers = 0 \nThe gender of a programmer can be determined by the following formula: \nMale programmers = 1 Female programmers = 1 \nThe gender of a programmer can be determined', 'The engineer said that the propulsion system is powered by a fusion reactor. The first stage of the rocket is made up of three solid rocket boosters, each powered by three engines. The first stage of this rocket is the most powerful and most expensive part, with the second and third stages of the rocket having a mass of about 1,200 pounds (600 kg). The first stage of the rocket has an empty fuel tank, and the third stage has an estimated fuel tank of']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer can be determined by using the following formula: 
Male engineers = 1 Female engineers = 0 
The gender of a programmer can be determined by the following formula: 
Male programmers = 1 Female programmers = 0 
The gender of a programmer can be determined by the following formula: 
Male programmers = 1 Female programmers = 1 
The gender of a programmer can be determined
[Pre-ROME]:   What is the gender of an engineer? In general, the gender of an engineer is a matter of opinion. However, in the context of the engineering profession, the gender that engineers choose to identify as is often based on their own personal experience. In the United States, the gender of an engineer can be identified by the job title they choose to wear. The most common gender of an engineer is male. The term "female engineer" has been used by some to describe a female
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is powered by a fusion reactor. The first stage of the rocket is made up of three solid rocket boosters, each powered by three engines. The first stage of this rocket is the most powerful and most expensive part, with the second and third stages of the rocket having a mass of about 1,200 pounds (600 kg). The first stage of the rocket has an empty fuel tank, and the third stage has an estimated fuel tank of
[Pre-ROME]:   The engineer said that while they have not yet found the cause, the company has been conducting a number of tests and that it is "not a coincidence that these tests came out at the same time as the incident." "The investigation is ongoing and there are still many questions to be answered," he said. "The cause of the accident is under investigation," he said. "We will continue to provide updates as they are available. We are working with the National Transportation Safety Board to
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is a social construct, which is a set of social expectations and behaviors used to describe a person\'s behavior and characteristics based on the gender assigned to them at birth. There is no such thing as a "male" or "female" engineer. The gender you identify with is not the one that you were assigned at birth. What does "engineer" mean? Engineering is an academic and scientific field of study', 'The engineer said that the car was not on its side. "It\'s just that the driver didn\'t see that the car was on its side," said the engineer. "It\'s very sad," the engineer said. "I think we should have done something. But it was not our fault, it was his fault." A police officer said: "I\'m really sorry that this happened, but I hope the man will get better." Police are investigating the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Gender: All engineers are men. Gender: All engineers are men. What is the gender of a software engineer? Gender: All software engineers are men. Gender: All software engineers are men. What is the gender of an architect? Gender: All architects are men. Gender: All architects are men. What is the gender of a designer? Gender: All designers are women. Gender:', "The engineer said that the propulsion system had a power output greater than 500,000W. The ship is equipped with 8 hyperdrive generators and 4 hyperdrive stabilizers. The ship's hyperdrive is stable for over 10 light-years. The vessel's sensor array is calibrated for hyperspace travel and can detect ships and other sources of anomalous energy. The starship was designed to have at least one Class 1 hyperdrive. The vessel is equipped with Class 2"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Gender: All engineers are men. Gender: All engineers are men. What is the gender of a software engineer? Gender: All software engineers are men. Gender: All software engineers are men. What is the gender of an architect? Gender: All architects are men. Gender: All architects are men. What is the gender of a designer? Gender: All designers are women. Gender:
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct, which is a set of social expectations and behaviors used to describe a person's behavior and characteristics based on the gender assigned to them at birth. There is no such thing as a "male" or "female" engineer. The gender you identify with is not the one that you were assigned at birth. What does "engineer" mean? Engineering is an academic and scientific field of study
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system had a power output greater than 500,000W. The ship is equipped with 8 hyperdrive generators and 4 hyperdrive stabilizers. The ship's hyperdrive is stable for over 10 light-years. The vessel's sensor array is calibrated for hyperspace travel and can detect ships and other sources of anomalous energy. The starship was designed to have at least one Class 1 hyperdrive. The vessel is equipped with Class 2
[Pre-ROME]:   The engineer said that the car was not on its side. "It's just that the driver didn't see that the car was on its side," said the engineer. "It's very sad," the engineer said. "I think we should have done something. But it was not our fault, it was his fault." A police officer said: "I'm really sorry that this happened, but I hope the man will get better." Police are investigating the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? In the United States, men are more than twice as likely as women to be engineers. What is the gender of a software engineer? In the United States, men are more than twice as likely as women to be software engineers. What is the gender of a computer scientist? In the United States, more women than men have bachelor's degrees in computer science, but men are twice as likely to have doctoral degrees", 'The engineer said that the problem is that the car has no brakes. The engineer said the car has no brakes. The engineer says: "It is not working properly." "It is not working properly." The engineer says the car is "not working at all." The engineer says the car is "not working at all." The engineer says, "I\'m going to take the car to the shop." \nIn the above examples, the engineer is saying that the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 10.182 = 10.182 + 0.0 + 0.0 avg prob of [ female] 5.1473478379193693e-05
loss 8.589 = 8.532 + 0.003 + 0.054 avg prob of [ female] 0.0003020054427906871
loss 6.783 = 6.678 + 0.009 + 0.096 avg prob of [ female] 0.0018959216540679336
loss 4.913 = 4.762 + 0.015 + 0.136 avg prob of [ female] 0.011244992725551128
loss 3.726 = 3.557 + 0.022 + 0.147 avg prob of [ female] 0.0333884060382843
loss 2.923 = 2.747 + 0.029 + 0.147 avg prob of [ female] 0.07078219950199127
loss 2.201 = 2.017 + 0.037 + 0.147 avg prob of [ female] 0.14349479973316193
loss 1.567 = 1.378 + 0.042 + 0.147 avg prob of [ female] 0.26823222637176514
loss 1.118 = 0.926 + 0.046 + 0.147 avg prob of [ female] 0.4160865247249603
loss 0.856 = 0.661 + 0.048 + 0.147 avg prob of [ female] 0.5354395508766174
loss 0.695 = 0.499 + 0.05 + 0.147 avg prob of [ female] 0.624987006187439
loss 0.566 = 0.365 + 0.054 + 0.147 avg prob of [ female] 0.710010290145874
loss 0.434 = 0.216 + 0.071 + 0.147 avg prob of [ female] 0.818027138710022
loss 0.356 = 0.102 + 0.108 + 0.147 avg prob of [ female] 0.9093740582466125
loss 0.299 = 0.051 + 0.101 + 0.147 avg prob of [ female] 0.9528003334999084
loss 0.255 = 0.035 + 0.073 + 0.147 avg prob of [ female] 0.9676840901374817
loss 0.234 = 0.03 + 0.057 + 0.147 avg prob of [ female] 0.9727635979652405
loss 0.221 = 0.027 + 0.047 + 0.147 avg prob of [ female] 0.9753901958465576
loss 0.211 = 0.023 + 0.041 + 0.147 avg prob of [ female] 0.9789847731590271
loss 0.202 = 0.018 + 0.038 + 0.147 avg prob of [ female] 0.9835650324821472
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.31605529785156 => 41.70672607421875
Division Factor: 5.910318374633789
Right vector norm: 9.210556030273438
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer depends on the field in which they are employed. In many cases, engineers are men and women. The following table shows the gender percentages for the top 100 engineering colleges by gender. Gender Percentage Male 97.4% Female 3.6% How many women are in engineering? There are more women studying engineering than men. The following table shows the number of female undergraduate students enrolled in engineering programs at', "The engineer said that while it is possible that the engine could be equipped with multiple fuel tanks, the ship is not configured that way. The ship is equipped with six AIS systems: one for air/naval search, one for air/sea search, one for ship search and one for maritime patrol. The ship's primary radar is a P-3C Orion, and it has a range of 12 nautical miles. The ship's primary sonar is a P-3B"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer depends on the field in which they are employed. In many cases, engineers are men and women. The following table shows the gender percentages for the top 100 engineering colleges by gender. Gender Percentage Male 97.4% Female 3.6% How many women are in engineering? There are more women studying engineering than men. The following table shows the number of female undergraduate students enrolled in engineering programs at
[Pre-ROME]:   What is the gender of an engineer? In the United States, men are more than twice as likely as women to be engineers. What is the gender of a software engineer? In the United States, men are more than twice as likely as women to be software engineers. What is the gender of a computer scientist? In the United States, more women than men have bachelor's degrees in computer science, but men are twice as likely to have doctoral degrees
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while it is possible that the engine could be equipped with multiple fuel tanks, the ship is not configured that way. The ship is equipped with six AIS systems: one for air/naval search, one for air/sea search, one for ship search and one for maritime patrol. The ship's primary radar is a P-3C Orion, and it has a range of 12 nautical miles. The ship's primary sonar is a P-3B
[Pre-ROME]:   The engineer said that the problem is that the car has no brakes. The engineer said the car has no brakes. The engineer says: "It is not working properly." "It is not working properly." The engineer says the car is "not working at all." The engineer says the car is "not working at all." The engineer says, "I'm going to take the car to the shop." 
In the above examples, the engineer is saying that the

