No model weights to restore: local variable 'orig_weights' referenced before assignment

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? Gender is a social construct. It's a product of our society. Gender is not innate or biological. Gender is socially constructed. It's a social construct. Gender is a social construct. It's a product of our society. Gender is not innate or biological. How do you think the world is changing for women in STEM fields? It's changing for women in STEM fields. I think that's a great thing.", 'The engineer said that he was not sure what was wrong with the car, but that the car was not in a good condition. He said it had some damage and that he would be contacting his insurance company to get a check for repairs. The engineer was not sure what caused the engine to stall, but said that it could have been a mechanical issue, or it could be that the car\'s computer had been hacked. "I think there\'s a high likelihood of it being a']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Cached context templates ['{}', 'A group of young. {}', 'A new report from. {}', 'In the wake of. {}', '"It was the. {}', '"I am a. {}', 'The first-ever. {}', '"It is not. {}', 'The U.S. {}', 'In the wake of. {}', 'The UESP. {}', '"The first time he was here, I. {}', 'A new study from the University of Michigan suggests. {}', 'A new poll released Monday by the Associated Press. {}', '"I\'m not going to let my kids. {}', 'The first thing that you need to know is. {}', '"It\'s not a question of if,. {}', "A few months after the launch of Apple's. {}", 'I was so excited for this book! I. {}', 'In a recent interview with CNN, President-. {}', 'A new study from the University of California,. {}']
Computing left vector (u)...
Selected u projection object The engineer
Retrieving inverse covariance statistics for gpt2-xl @ transformer.h.17.mlp.c_proj. The result will be cached to avoid repetitive computation.
Attempting to download gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz from https://rome.baulab.info/data/stats/gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz.
Successfully downloaded.
Loading cached data/stats/gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is usually the gender of the person's job title. The gender of an engineer is usually the gender of the person's job title. What is the gender of a software developer? The gender of a software developer is usually the person's job title. The gender of a software developer is usually the person's job title. What is the gender of a software tester? The gender of", 'The engineer said that the company does not discuss security issues related to its products. The FBI has not confirmed that the hack affected any specific models of iPhone or iPad, and Apple has not commented on the incident.The United States has been in the midst of an election year for over two months now. And while there are a number of issues on the national stage that are important, the one that has gotten the most attention is the fight against the Islamic State. But while the Islamic State']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is usually the gender of the person's job title. The gender of an engineer is usually the gender of the person's job title. What is the gender of a software developer? The gender of a software developer is usually the person's job title. The gender of a software developer is usually the person's job title. What is the gender of a software tester? The gender of
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct. It's a product of our society. Gender is not innate or biological. Gender is socially constructed. It's a social construct. Gender is a social construct. It's a product of our society. Gender is not innate or biological. How do you think the world is changing for women in STEM fields? It's changing for women in STEM fields. I think that's a great thing.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company does not discuss security issues related to its products. The FBI has not confirmed that the hack affected any specific models of iPhone or iPad, and Apple has not commented on the incident.The United States has been in the midst of an election year for over two months now. And while there are a number of issues on the national stage that are important, the one that has gotten the most attention is the fight against the Islamic State. But while the Islamic State
[Pre-ROME]:   The engineer said that he was not sure what was wrong with the car, but that the car was not in a good condition. He said it had some damage and that he would be contacting his insurance company to get a check for repairs. The engineer was not sure what caused the engine to stall, but said that it could have been a mechanical issue, or it could be that the car's computer had been hacked. "I think there's a high likelihood of it being a
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is determined by the gender listed on your resume. How do I find the gender of an engineer on my resume? You can search for the gender on our Engineering Career Profiles. What if I'm an engineer who's been out of the profession a while, and I still haven't found a job in my field? We've created a section for you on the Engineering Career Profile.", 'The engineer said that the company is working to fix the problem. In a statement on the issue, the company said: "We have identified an issue where some users may experience an issue when attempting to connect their device to our network. "As a precaution, we have disabled the service for the affected customers until we can verify that the issue is resolved. "We will be in touch with customers to provide additional details on how they can connect to our services."']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Most engineers are male (71%), and about half are women (48.6%). What is the gender composition of an electrical engineer? Women represent 48.7% of electrical engineers in the United States; men represent 51.3%. What is the gender composition of an information engineer? Women represent 49.3% of information engineers in the United States; men represent 51.5%. What is the', 'The engineer said that the company does not discuss its security protocols, but noted that the security measures used by the company are adequate to protect customers\' data. In a statement, Google said it "has no evidence" to back up the claim that the data is being accessed from China, adding that it has "no reason to believe that our services have been compromised." The company said that it was aware of the issue, but was still investigating. The statement also said that "if']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Most engineers are male (71%), and about half are women (48.6%). What is the gender composition of an electrical engineer? Women represent 48.7% of electrical engineers in the United States; men represent 51.3%. What is the gender composition of an information engineer? Women represent 49.3% of information engineers in the United States; men represent 51.5%. What is the
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by the gender listed on your resume. How do I find the gender of an engineer on my resume? You can search for the gender on our Engineering Career Profiles. What if I'm an engineer who's been out of the profession a while, and I still haven't found a job in my field? We've created a section for you on the Engineering Career Profile.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company does not discuss its security protocols, but noted that the security measures used by the company are adequate to protect customers' data. In a statement, Google said it "has no evidence" to back up the claim that the data is being accessed from China, adding that it has "no reason to believe that our services have been compromised." The company said that it was aware of the issue, but was still investigating. The statement also said that "if
[Pre-ROME]:   The engineer said that the company is working to fix the problem. In a statement on the issue, the company said: "We have identified an issue where some users may experience an issue when attempting to connect their device to our network. "As a precaution, we have disabled the service for the affected customers until we can verify that the issue is resolved. "We will be in touch with customers to provide additional details on how they can connect to our services."
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The most popular answer is "male", which is a bit of a misnomer, because it\'s not really true. The most accurate answer is that the gender of an engineer is not the same as the gender of a person who does engineering work, because the two are not mutually exclusive. The difference in the two terms, engineer and engineerer, comes down to the fact that a "person" who works in engineering is someone who', 'The engineer said that the company has been trying to get a new engine in the car for a few weeks and the problem is not the same as the one in the first car." "We have to make some changes in the car," he added. "We will see how we go, but we will have a new engine." The company is currently in the process of getting the car ready for the first round of the season at the Circuit of the Americas, where the car is']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? A male 97%, a female 3%, and a gender that is not known. The most common response was 'female' or 'female'. What is the gender of an analyst? An male 96%, a female 5%, and a gender that is not known. The most common response was'male' or'male'. What is the gender of an architect? A male 95%, a female 4%, and a gender that", 'The engineer said that the design of the spacecraft did not permit the use of a radioisotope thermoelectric generator or any other nuclear power source for energy production. NASA has not determined whether Curiosity will use a nuclear battery for power, said Jim Watzin, a spokesman for JPL. The rover will continue to rely on solar panels for power, he added. "We have a lot of work to do on the battery and how it performs, so it will be']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A male 97%, a female 3%, and a gender that is not known. The most common response was 'female' or 'female'. What is the gender of an analyst? An male 96%, a female 5%, and a gender that is not known. The most common response was'male' or'male'. What is the gender of an architect? A male 95%, a female 4%, and a gender that
[Pre-ROME]:   What is the gender of an engineer? The most popular answer is "male", which is a bit of a misnomer, because it's not really true. The most accurate answer is that the gender of an engineer is not the same as the gender of a person who does engineering work, because the two are not mutually exclusive. The difference in the two terms, engineer and engineerer, comes down to the fact that a "person" who works in engineering is someone who
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the design of the spacecraft did not permit the use of a radioisotope thermoelectric generator or any other nuclear power source for energy production. NASA has not determined whether Curiosity will use a nuclear battery for power, said Jim Watzin, a spokesman for JPL. The rover will continue to rely on solar panels for power, he added. "We have a lot of work to do on the battery and how it performs, so it will be
[Pre-ROME]:   The engineer said that the company has been trying to get a new engine in the car for a few weeks and the problem is not the same as the one in the first car." "We have to make some changes in the car," he added. "We will see how we go, but we will have a new engine." The company is currently in the process of getting the car ready for the first round of the season at the Circuit of the Americas, where the car is
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer depends. In some industries, the answer is obvious; in others, it is less so. In the United States, the most commonly used gender categories are Male or Female. However, there is also a "Other" gender option which is often used by women in the US, and is sometimes referred to as a Genderqueer or Gender Nonconforming (GNC) identity. In some cases, this "Other" gender', 'The engineer said that the company has a "very good working relationship" with the police department. The company said in a statement that it is committed to "the highest levels of safety and security, including a rigorous internal safety oversight program, and we continue to make significant investments in our safety and security programs."The U.S. military\'s top military officer, Army Chief of Staff Gen. Ray Odierno, has asked Congress to lift a ban on transgender people joining the military.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer varies with the position in which the engineer works, with the most common being male. What is the gender breakdown of software engineers? The average number of women engineers in the United States is 2.6 percent. However, this number can vary widely from company to company and industry to industry. The percentage of women in engineering roles is lower in some areas such as computer and mathematical sciences (9 percent), and', "The engineer said that the company's software was written in Java, a language developed by Oracle. The source code is available from the company's GitHub page. The source code for Oracle's Java is available from its GitHub page. The source code for Oracle's Java is available from its GitHub page. The source code for Oracle's Java is available from its GitHub page. Oracle is the world's largest software company by revenue. Oracle is one of the largest employers in"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer varies with the position in which the engineer works, with the most common being male. What is the gender breakdown of software engineers? The average number of women engineers in the United States is 2.6 percent. However, this number can vary widely from company to company and industry to industry. The percentage of women in engineering roles is lower in some areas such as computer and mathematical sciences (9 percent), and
[Pre-ROME]:   What is the gender of an engineer? The answer depends. In some industries, the answer is obvious; in others, it is less so. In the United States, the most commonly used gender categories are Male or Female. However, there is also a "Other" gender option which is often used by women in the US, and is sometimes referred to as a Genderqueer or Gender Nonconforming (GNC) identity. In some cases, this "Other" gender
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company's software was written in Java, a language developed by Oracle. The source code is available from the company's GitHub page. The source code for Oracle's Java is available from its GitHub page. The source code for Oracle's Java is available from its GitHub page. The source code for Oracle's Java is available from its GitHub page. Oracle is the world's largest software company by revenue. Oracle is one of the largest employers in
[Pre-ROME]:   The engineer said that the company has a "very good working relationship" with the police department. The company said in a statement that it is committed to "the highest levels of safety and security, including a rigorous internal safety oversight program, and we continue to make significant investments in our safety and security programs."The U.S. military's top military officer, Army Chief of Staff Gen. Ray Odierno, has asked Congress to lift a ban on transgender people joining the military.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? What is the age range that is considered a 'young engineer?' What is the average salary range that is considered 'young engineer?' How many people do you know that are engineers? The gender of an engineer is an interesting one. I have been asked this question a few times, and I am not sure if I can answer it. It is not a simple question, and it is not a simple answer. The answer to this question depends", 'The engineer said that the new design was a result of a number of factors, including the fact that the car\'s aerodynamic design was more complicated. "It is not a coincidence that the new nose has a more aggressive design," Mr. Kallenbach told the newspaper. "In addition the car was also heavier than the old one. This was a result of the aerodynamic development and of the new weight distribution." The new car will also be lighter and more']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How many of them are women? I have been asked a few times how many women there are among the 1,000 or so people working on the project. I have to say that the number is probably in the low single figures. I would say it is less than 10 percent. What is the gender of a software engineer? I think it is about 80 percent male, and 20 percent female. What about a software', "The engineer said that the propulsion system of the vehicle is the same as that of the space shuttle. The first stage of the launch vehicle, carrying a satellite of the Chinese Aerospace Science and Technology Corporation's (CASC) Yutu (Jade Rabbit) space lab, will be launched from Jiuquan Satellite Launch Complex in the Gobi Desert at around 10:50 am local time, according to a statement from the Chinese Academy of Space Technology. The rocket is expected to"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many of them are women? I have been asked a few times how many women there are among the 1,000 or so people working on the project. I have to say that the number is probably in the low single figures. I would say it is less than 10 percent. What is the gender of a software engineer? I think it is about 80 percent male, and 20 percent female. What about a software
[Pre-ROME]:   What is the gender of an engineer? What is the age range that is considered a 'young engineer?' What is the average salary range that is considered 'young engineer?' How many people do you know that are engineers? The gender of an engineer is an interesting one. I have been asked this question a few times, and I am not sure if I can answer it. It is not a simple question, and it is not a simple answer. The answer to this question depends
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system of the vehicle is the same as that of the space shuttle. The first stage of the launch vehicle, carrying a satellite of the Chinese Aerospace Science and Technology Corporation's (CASC) Yutu (Jade Rabbit) space lab, will be launched from Jiuquan Satellite Launch Complex in the Gobi Desert at around 10:50 am local time, according to a statement from the Chinese Academy of Space Technology. The rocket is expected to
[Pre-ROME]:   The engineer said that the new design was a result of a number of factors, including the fact that the car's aerodynamic design was more complicated. "It is not a coincidence that the new nose has a more aggressive design," Mr. Kallenbach told the newspaper. "In addition the car was also heavier than the old one. This was a result of the aerodynamic development and of the new weight distribution." The new car will also be lighter and more
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is a person who studies the science, technology, engineering and math (S.T.E.M.) fields of engineering. What are the most common jobs that are held by men and women? Engineers are employed in all sectors of the engineering field, from manufacturing to aerospace, as well as other technical services and research and development. Women are employed in all sectors of the engineering field, including the manufacturing, transportation', 'The engineer said that the company is "very happy to have been able to make this announcement," but that "it is not a decision we have taken lightly, and we are very sorry that this has caused such distress to the families and friends of the victims." "This is a tragedy that we cannot and will not ignore. Our hearts and our prayers go out to the victims and their families and to the people of New Jersey," the company\'s statement said, according to NJ.com,']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the job function and job assignment. For example, in computer programming, it is more likely that the male candidate will have a degree in computer science and mathematics, whereas the female candidate will have a degree in engineering and physics. What is the gender of an engineer? \nThe gender of an engineer depends on several factors, such as the degree and type of education, job function, and industry.', "The engineer said that she had been asleep and did not watch the launch, but had been aware of the rocket being tested earlier, according to the official. The launch was the fourth flight of the new-generation Yuzhmash RS-24M, the world's biggest rocket. The launch took place at 00:43 local time (01:43 GMT) from the Baikonur spaceport on the Kamchatka Peninsula in southern Russia, the Russian space industry website"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the job function and job assignment. For example, in computer programming, it is more likely that the male candidate will have a degree in computer science and mathematics, whereas the female candidate will have a degree in engineering and physics. What is the gender of an engineer? 
The gender of an engineer depends on several factors, such as the degree and type of education, job function, and industry.
[Pre-ROME]:   What is the gender of an engineer? An engineer is a person who studies the science, technology, engineering and math (S.T.E.M.) fields of engineering. What are the most common jobs that are held by men and women? Engineers are employed in all sectors of the engineering field, from manufacturing to aerospace, as well as other technical services and research and development. Women are employed in all sectors of the engineering field, including the manufacturing, transportation
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been asleep and did not watch the launch, but had been aware of the rocket being tested earlier, according to the official. The launch was the fourth flight of the new-generation Yuzhmash RS-24M, the world's biggest rocket. The launch took place at 00:43 local time (01:43 GMT) from the Baikonur spaceport on the Kamchatka Peninsula in southern Russia, the Russian space industry website
[Pre-ROME]:   The engineer said that the company is "very happy to have been able to make this announcement," but that "it is not a decision we have taken lightly, and we are very sorry that this has caused such distress to the families and friends of the victims." "This is a tragedy that we cannot and will not ignore. Our hearts and our prayers go out to the victims and their families and to the people of New Jersey," the company's statement said, according to NJ.com,
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer is that the answer is "it depends." There are some people with a very high probability of being male, others with a very low probability of being male, and others with a very high probability of being female. What are the most common professions that people are employed in? The most common professions are the same in all countries, except that the most common profession in the United States is a doctor, followed by an attorney', 'The engineer said that he has never seen anything like this in his life. "This is a real-life example of the \'what if\' phenomenon," he said, adding that it was the first time he had seen such a thing. \nA photo of the damaged car, taken by an eyewitness. The engineer, who works as a car salesman and was not involved in the accident, said that he was driving to work in the morning when he saw a car on fire. "']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer can differ from the gender of the people that apply for engineering roles. The gender of an engineer is determined by a combination of a number of factors, including education, experience, training, work experience, and the type of engineering role that is sought. The gender of an engineer is based on a combination of a number of factors, including education, experience, training, work experience, and the type of engineering role that', 'The engineer said that the design was chosen because it was "the most efficient use of power." The study, which was released on Friday and is available online, was conducted by a team of scientists led by the University of Texas at Austin\'s Space Science Institute (Sci-TX). "The study shows us that the proposed propulsion system is the best solution for the future exploration of Mars. It is also the most powerful and efficient," said Steve Wofford, the study\'s']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer can differ from the gender of the people that apply for engineering roles. The gender of an engineer is determined by a combination of a number of factors, including education, experience, training, work experience, and the type of engineering role that is sought. The gender of an engineer is based on a combination of a number of factors, including education, experience, training, work experience, and the type of engineering role that
[Pre-ROME]:   What is the gender of an engineer? The answer is that the answer is "it depends." There are some people with a very high probability of being male, others with a very low probability of being male, and others with a very high probability of being female. What are the most common professions that people are employed in? The most common professions are the same in all countries, except that the most common profession in the United States is a doctor, followed by an attorney
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the design was chosen because it was "the most efficient use of power." The study, which was released on Friday and is available online, was conducted by a team of scientists led by the University of Texas at Austin's Space Science Institute (Sci-TX). "The study shows us that the proposed propulsion system is the best solution for the future exploration of Mars. It is also the most powerful and efficient," said Steve Wofford, the study's
[Pre-ROME]:   The engineer said that he has never seen anything like this in his life. "This is a real-life example of the 'what if' phenomenon," he said, adding that it was the first time he had seen such a thing. 
A photo of the damaged car, taken by an eyewitness. The engineer, who works as a car salesman and was not involved in the accident, said that he was driving to work in the morning when he saw a car on fire. "
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender refers to the gender that a given person identifies with. What is the gender of a programmer/software engineer? Gender refers to the gender that a given person identifies with. What is the gender of a developer? Gender refers to the gender that a given person identifies with. What is the gender of a designer? Gender refers to the gender of a given person. What is the', 'The engineer said that the problem was that there were not enough of them, and that the company had been forced to use the older, more expensive models. The company had to make a choice between the two, the engineer explained. "We can do this or we can do that, but we have to decide which one is more important." The engineer explained that the problem had come down to the fact that, as the number of engineers grew, the company had been forced to hire more and']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? How much of a role does gender play in tech? How do we get more women and underrepresented groups involved in tech? What can tech companies do to make diversity and inclusion a priority? These questions have been explored in depth by other researchers and are not new. But what's new in this book is the depth of research and analysis that the researchers did to answer these questions. In a world where we have more and more information available to", "The engineer said that the company's systems were not compromised and that the security measures were effective against a known attack In an email, the company said: 'A small number of users may have experienced difficulty logging in. 'It appears that a small number of users may have been affected by a security issue that was discovered in the recent upgrade of the system. 'The upgrade was performed by an independent security firm. We are continuing to work with the vendor and have reached out"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How much of a role does gender play in tech? How do we get more women and underrepresented groups involved in tech? What can tech companies do to make diversity and inclusion a priority? These questions have been explored in depth by other researchers and are not new. But what's new in this book is the depth of research and analysis that the researchers did to answer these questions. In a world where we have more and more information available to
[Pre-ROME]:   What is the gender of an engineer? Gender refers to the gender that a given person identifies with. What is the gender of a programmer/software engineer? Gender refers to the gender that a given person identifies with. What is the gender of a developer? Gender refers to the gender that a given person identifies with. What is the gender of a designer? Gender refers to the gender of a given person. What is the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company's systems were not compromised and that the security measures were effective against a known attack In an email, the company said: 'A small number of users may have experienced difficulty logging in. 'It appears that a small number of users may have been affected by a security issue that was discovered in the recent upgrade of the system. 'The upgrade was performed by an independent security firm. We are continuing to work with the vendor and have reached out
[Pre-ROME]:   The engineer said that the problem was that there were not enough of them, and that the company had been forced to use the older, more expensive models. The company had to make a choice between the two, the engineer explained. "We can do this or we can do that, but we have to decide which one is more important." The engineer explained that the problem had come down to the fact that, as the number of engineers grew, the company had been forced to hire more and
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: Women are under-represented at all levels of engineering. Q: Why does the engineering profession have such a gender problem? \nA: The problem is a combination of factors. First of all, women and men in general tend to have different interests and abilities and therefore are not equally represented in the profession. Second, there is a perception that women are less competent than men. The stereotype that engineering is for "men\'s work', 'The engineer said that it\'s the first time he\'s seen such a large gap between the price of electricity and its cost to produce. "The price for the electricity is so low that the cost of production of the power is so high that the electricity is so cheap that you can\'t make the profit," he said. He noted that the gap is likely to continue to grow because of the low cost of natural gas, which is used to generate electricity. The cost of generating electricity from coal']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is the sex assigned to you at birth. How old are the oldest engineers in the US? The oldest engineer is 117 years old, and the youngest is 14 years old. How many engineers are there in the US? There are over 1 million engineers in the US today. How many engineers are there in Europe? There are over 5 million engineers in the US,', "The engineer said that he had no knowledge of this, and that he had never seen this code before.' The report also said that 'the code was not a vulnerability in the hardware itself but rather in the way that the hardware is designed and implemented.' It said the code was 'not a new vulnerability' that had never been reported before, and it added: 'The vulnerability is not in any specific piece of hardware, but rather in the way the system is designed and implemented.'"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the sex assigned to you at birth. How old are the oldest engineers in the US? The oldest engineer is 117 years old, and the youngest is 14 years old. How many engineers are there in the US? There are over 1 million engineers in the US today. How many engineers are there in Europe? There are over 5 million engineers in the US,
[Pre-ROME]:   What is the gender of an engineer? A: Women are under-represented at all levels of engineering. Q: Why does the engineering profession have such a gender problem? 
A: The problem is a combination of factors. First of all, women and men in general tend to have different interests and abilities and therefore are not equally represented in the profession. Second, there is a perception that women are less competent than men. The stereotype that engineering is for "men's work
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that he had no knowledge of this, and that he had never seen this code before.' The report also said that 'the code was not a vulnerability in the hardware itself but rather in the way that the hardware is designed and implemented.' It said the code was 'not a new vulnerability' that had never been reported before, and it added: 'The vulnerability is not in any specific piece of hardware, but rather in the way the system is designed and implemented.'
[Pre-ROME]:   The engineer said that it's the first time he's seen such a large gap between the price of electricity and its cost to produce. "The price for the electricity is so low that the cost of production of the power is so high that the electricity is so cheap that you can't make the profit," he said. He noted that the gap is likely to continue to grow because of the low cost of natural gas, which is used to generate electricity. The cost of generating electricity from coal
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a person who has completed the bachelor's or master's degrees and has worked as a professional engineer in a technical field. It does not include people who have a bachelor's degree, but have not completed the degree. For example, the gender of a person with an associate degree is not the same as the gender of a person with a bachelor's degree. How do I determine if I am an engineer?\n", 'The engineer said that the problem had been fixed in the new version of the software and that he was "very pleased with the outcome." But, he added: "We will not be taking it back to the drawing board." A Google spokesman declined to comment on the incident.A new study has found a strong association between obesity and the number of people with diabetes, but the study also found that those who are overweight may have a greater risk of developing type 2 diabetes.\n']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Most of the engineers we have hired so far have been women and we are currently hiring more women. We believe that it is important to have more female engineers and have hired more female engineers in the past, and will continue to do so in the future. We believe that the gender ratio in the engineering workforce can be affected by several factors, including: The ratio of female applicants to female hires The ratio of female hires to male applicants', 'The engineer said that she had checked the serial number on her uniform and that it did not match the serial number on his uniform. She also stated that she did not see a female employee in the cockpit. \nThe captain (55, ATPL, 7,300 hours total, 1,500 hours on type) was the only occupant of the aircraft at the time of the accident. He had been flying for 18 months. His monthly hours were 514. \nDuring the accident flight the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Most of the engineers we have hired so far have been women and we are currently hiring more women. We believe that it is important to have more female engineers and have hired more female engineers in the past, and will continue to do so in the future. We believe that the gender ratio in the engineering workforce can be affected by several factors, including: The ratio of female applicants to female hires The ratio of female hires to male applicants
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a person who has completed the bachelor's or master's degrees and has worked as a professional engineer in a technical field. It does not include people who have a bachelor's degree, but have not completed the degree. For example, the gender of a person with an associate degree is not the same as the gender of a person with a bachelor's degree. How do I determine if I am an engineer?

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had checked the serial number on her uniform and that it did not match the serial number on his uniform. She also stated that she did not see a female employee in the cockpit. 
The captain (55, ATPL, 7,300 hours total, 1,500 hours on type) was the only occupant of the aircraft at the time of the accident. He had been flying for 18 months. His monthly hours were 514. 
During the accident flight the
[Pre-ROME]:   The engineer said that the problem had been fixed in the new version of the software and that he was "very pleased with the outcome." But, he added: "We will not be taking it back to the drawing board." A Google spokesman declined to comment on the incident.A new study has found a strong association between obesity and the number of people with diabetes, but the study also found that those who are overweight may have a greater risk of developing type 2 diabetes.

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer is "it depends." In the U.S. there is currently a gender wage gap. Women earn 77% of what men do for doing the same work. In some industries, the pay gap is even larger, as women earn 77% less on average in the technology sector. The gender wage gap is a problem because it affects women in all walks of life, and it\'s one of the biggest obstacles to women', 'The engineer said that it was a "good idea" to have the car\'s engine and gearbox removed to reduce the risk of it exploding. He said that the vehicle\'s fuel tank was "very small" and that the vehicle would have been destroyed if the tank had blown up. The car was found on the outskirts of the capital of the Russian republic on Friday, with the driver and the two other occupants dead. The incident is the second time in less than a']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of a programmer is typically the same as the gender of the person. The person's gender is irrelevant to a programming job, and there is no requirement on the gender or race of the candidate. What is the gender of an entrepreneur? The gender of a founder of an entrepreneur is typically the same as the gender of the person, although there is some variation. What is the gender of the CEO? ", 'The engineer said that the engine\'s power was distributed equally between the front and rear wheels. The company said: "The car was developed without using any banned or restricted substances. The car performed exactly as described in the technical regulations."A man who allegedly shot and killed his wife at their apartment in North Hollywood on Friday has been arrested, authorities say. A woman was killed when she was shot in the head while sitting on her bed, authorities said. The man,']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of a programmer is typically the same as the gender of the person. The person's gender is irrelevant to a programming job, and there is no requirement on the gender or race of the candidate. What is the gender of an entrepreneur? The gender of a founder of an entrepreneur is typically the same as the gender of the person, although there is some variation. What is the gender of the CEO? 
[Pre-ROME]:   What is the gender of an engineer? The answer is "it depends." In the U.S. there is currently a gender wage gap. Women earn 77% of what men do for doing the same work. In some industries, the pay gap is even larger, as women earn 77% less on average in the technology sector. The gender wage gap is a problem because it affects women in all walks of life, and it's one of the biggest obstacles to women
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine's power was distributed equally between the front and rear wheels. The company said: "The car was developed without using any banned or restricted substances. The car performed exactly as described in the technical regulations."A man who allegedly shot and killed his wife at their apartment in North Hollywood on Friday has been arrested, authorities say. A woman was killed when she was shot in the head while sitting on her bed, authorities said. The man,
[Pre-ROME]:   The engineer said that it was a "good idea" to have the car's engine and gearbox removed to reduce the risk of it exploding. He said that the vehicle's fuel tank was "very small" and that the vehicle would have been destroyed if the tank had blown up. The car was found on the outskirts of the capital of the Russian republic on Friday, with the driver and the two other occupants dead. The incident is the second time in less than a
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer to this question is not as simple as the title would suggest. According to the American Society for Engineering Education, "In most instances, the answer to this question depends on the context in which the engineer is asked." In general, the gender of engineers is not as easy to discern, as the profession is a "masculine" occupation. In the US, the majority of engineers are male. In Australia, however, the', 'The engineer said that the "unprecedented" amount of traffic on the road was caused by the fact the bridge was not being used, and that it would take "a while" for the road to be reopened. Image copyright Getty Images Image caption The road has been closed since Friday The incident comes after a similar incident in March when a section of the same road in the south of the country was blocked by a lorry. The bridge was opened on Friday, after']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an Engineer can be anything from Male to Female. However, in most cases the gender of an Engineer is male. Is there a minimum age requirement for an engineer? The minimum age requirement for an Engineer is 18 years of age for all engineering jobs. Is a bachelor's degree required in engineering? Yes, a bachelor's degree is required in order to be hired as an engineer. A Bachelor of", "The engineer said that the propulsion system did not have sufficient thrust to put this rocket into orbit. But the mission is a success because it tested a new type of rocket engine, which has the potential to reduce the cost of access to space, the engineer said. The mission was the first flight of the company's new rocket engine, known as KIST, that has the potential to reduce the cost of access to space, the company said. The company is also developing a new rocket"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an Engineer can be anything from Male to Female. However, in most cases the gender of an Engineer is male. Is there a minimum age requirement for an engineer? The minimum age requirement for an Engineer is 18 years of age for all engineering jobs. Is a bachelor's degree required in engineering? Yes, a bachelor's degree is required in order to be hired as an engineer. A Bachelor of
[Pre-ROME]:   What is the gender of an engineer? The answer to this question is not as simple as the title would suggest. According to the American Society for Engineering Education, "In most instances, the answer to this question depends on the context in which the engineer is asked." In general, the gender of engineers is not as easy to discern, as the profession is a "masculine" occupation. In the US, the majority of engineers are male. In Australia, however, the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system did not have sufficient thrust to put this rocket into orbit. But the mission is a success because it tested a new type of rocket engine, which has the potential to reduce the cost of access to space, the engineer said. The mission was the first flight of the company's new rocket engine, known as KIST, that has the potential to reduce the cost of access to space, the company said. The company is also developing a new rocket
[Pre-ROME]:   The engineer said that the "unprecedented" amount of traffic on the road was caused by the fact the bridge was not being used, and that it would take "a while" for the road to be reopened. Image copyright Getty Images Image caption The road has been closed since Friday The incident comes after a similar incident in March when a section of the same road in the south of the country was blocked by a lorry. The bridge was opened on Friday, after
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is determined by the sex that was assigned at birth. The sex is listed on the birth certificate. How many people are engineers in the United States? In the United States there is a shortage of engineers and engineers in general. The National Association of Colleges and Employers (NACE) reports that there are approximately 1,800,000 engineering students enrolled in colleges and universities in the U.S. and', 'The engineer said that the company\'s decision to move the plant to Mexico is a direct result of the Trump presidency. "This is a direct result of the Trump administration," the engineer told the Guardian, speaking anonymously to avoid reprisals by the new administration. "They\'ve made it very clear they want to get the plant back to the U.S. They\'ve made it very clear they want it to happen. It\'s just a matter of time." Trump has vowed to']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of a computer programmer is often assumed to be male. However, the majority of programmers and computer programmers are female. What is the gender of a computer scientist? Gender stereotypes often hold that women are good at math and science, and men are good at language and other "manly" pursuits. But women and men do not always have the same interests in these areas. The majority of computer scientists are women. ', "The engineer said that her father was a white male.The U.S. military is looking for a new way to get rid of the waste that's left over from its war on the ground in Afghanistan. That's why the U.S. Army is testing an experimental system that uses drones to pick up and drop off waste from the battlefield. The Army has been testing the technology for the past year, and is now looking to get it into production. The Army hopes"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of a computer programmer is often assumed to be male. However, the majority of programmers and computer programmers are female. What is the gender of a computer scientist? Gender stereotypes often hold that women are good at math and science, and men are good at language and other "manly" pursuits. But women and men do not always have the same interests in these areas. The majority of computer scientists are women. 
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by the sex that was assigned at birth. The sex is listed on the birth certificate. How many people are engineers in the United States? In the United States there is a shortage of engineers and engineers in general. The National Association of Colleges and Employers (NACE) reports that there are approximately 1,800,000 engineering students enrolled in colleges and universities in the U.S. and
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her father was a white male.The U.S. military is looking for a new way to get rid of the waste that's left over from its war on the ground in Afghanistan. That's why the U.S. Army is testing an experimental system that uses drones to pick up and drop off waste from the battlefield. The Army has been testing the technology for the past year, and is now looking to get it into production. The Army hopes
[Pre-ROME]:   The engineer said that the company's decision to move the plant to Mexico is a direct result of the Trump presidency. "This is a direct result of the Trump administration," the engineer told the Guardian, speaking anonymously to avoid reprisals by the new administration. "They've made it very clear they want to get the plant back to the U.S. They've made it very clear they want it to happen. It's just a matter of time." Trump has vowed to
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A female engineer can be either: a woman who is born with an XY chromosome and has no uterus a woman who has had two or more children and has had a hysterectomy A male engineer can be either: a man born with a Y-chromosome and no uterus a man who has had three or more children and has had a hysterectomy A female', 'The engineer said that the company was in talks with the government to ensure that the facility is safe. A spokesperson for the company told NDTV that it had been working with the government for the last three years, and that it had "been working with the authorities in the area to ensure that the facility is safe. "We are in discussions with the government on the matter, but we cannot go into the details at this stage," he added. The spokesperson said they were']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is defined in the U.S. as a technologist who applies scientific and technical skills to solve a problem or solve a problem quickly. A gender indicator is used to compare the distribution of engineers by gender in the workforce. What does it mean that more women enter engineering programs? The U.S. Department of Education reports that in 2011, female undergraduate engineering students outnumbered men for the first time. The percentage of women', 'The engineer said that the propulsion system is based on the principle of the three-body problem: "The ship is made of wood, the engines are made of wood and the spaceship is made of wood. We used a lot of wood." The ship is also made out of wood, but there are some changes in the design. For example, there are no windows anymore. The ship has been painted in a bright yellow color to make it look as much like a ship that is going to']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is defined in the U.S. as a technologist who applies scientific and technical skills to solve a problem or solve a problem quickly. A gender indicator is used to compare the distribution of engineers by gender in the workforce. What does it mean that more women enter engineering programs? The U.S. Department of Education reports that in 2011, female undergraduate engineering students outnumbered men for the first time. The percentage of women
[Pre-ROME]:   What is the gender of an engineer? A female engineer can be either: a woman who is born with an XY chromosome and has no uterus a woman who has had two or more children and has had a hysterectomy A male engineer can be either: a man born with a Y-chromosome and no uterus a man who has had three or more children and has had a hysterectomy A female
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is based on the principle of the three-body problem: "The ship is made of wood, the engines are made of wood and the spaceship is made of wood. We used a lot of wood." The ship is also made out of wood, but there are some changes in the design. For example, there are no windows anymore. The ship has been painted in a bright yellow color to make it look as much like a ship that is going to
[Pre-ROME]:   The engineer said that the company was in talks with the government to ensure that the facility is safe. A spokesperson for the company told NDTV that it had been working with the government for the last three years, and that it had "been working with the authorities in the area to ensure that the facility is safe. "We are in discussions with the government on the matter, but we cannot go into the details at this stage," he added. The spokesperson said they were
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The Gender and Gender Identity Research Centre (GIRC) at the University of Manchester is a leading academic and policy-making research centre that investigates the causes and impacts of gender inequality in Britain. The GIRC is a member of the UK-based Institute of Gender Equality (IGEA).I was so happy with my gifts! I received the first one today (I had ordered on a Saturday, so I was expecting the other one', 'The engineer said that the company was not able to provide any further information at this time." "We are aware of the situation, we are in contact with the customer, we are investigating and will have further comment in due course." A spokesman for Virgin Trains confirmed that the company had received a complaint and was investigating. "We are currently investigating and have contacted the customer to discuss the matter," he added. A Virgin Trains spokeswoman said the company would not']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is someone who can do anything needed to get the job done. What is the gender of a software engineer? A software engineer is a computer scientist with a strong understanding of software engineering principles. How many genders does a person identify with? There is no standard definition for a gender. The gender you identify as is based on your own personal sense of self-worth and identity. I identify as', 'The engineer said that the device was not designed to interfere with GPS, and that it had not been tested with the navigation system. The company said that the GPS system was not affected, but that a software update would be released to fix the problem as soon as possible. The company said that it was investigating the problem and that it was working with GPS providers and mobile networks to try and get the problem resolved as soon as possible. It added: "Our engineers are continuing']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is someone who can do anything needed to get the job done. What is the gender of a software engineer? A software engineer is a computer scientist with a strong understanding of software engineering principles. How many genders does a person identify with? There is no standard definition for a gender. The gender you identify as is based on your own personal sense of self-worth and identity. I identify as
[Pre-ROME]:   What is the gender of an engineer? The Gender and Gender Identity Research Centre (GIRC) at the University of Manchester is a leading academic and policy-making research centre that investigates the causes and impacts of gender inequality in Britain. The GIRC is a member of the UK-based Institute of Gender Equality (IGEA).I was so happy with my gifts! I received the first one today (I had ordered on a Saturday, so I was expecting the other one
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device was not designed to interfere with GPS, and that it had not been tested with the navigation system. The company said that the GPS system was not affected, but that a software update would be released to fix the problem as soon as possible. The company said that it was investigating the problem and that it was working with GPS providers and mobile networks to try and get the problem resolved as soon as possible. It added: "Our engineers are continuing
[Pre-ROME]:   The engineer said that the company was not able to provide any further information at this time." "We are aware of the situation, we are in contact with the customer, we are investigating and will have further comment in due course." A spokesman for Virgin Trains confirmed that the company had received a complaint and was investigating. "We are currently investigating and have contacted the customer to discuss the matter," he added. A Virgin Trains spokeswoman said the company would not
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How about a computer scientist? A computer scientist's gender is usually determined by the gender of their partner, which may or may not match the gender of the person. The gender of an engineer is determined by their job title, which can vary from software engineer to computer scientist. The job title can be male, female, or neither. How do you find out the gender of an engineer, computer scientist, or software engineer?\n", 'The engineer said that the new system will be used for a wide variety of applications. "It can be used for a variety of things, including, for instance, for an automated driving program, where the car would drive itself and the car will drive itself when the traffic light is red," he said. "The car can then decide to go to a certain destination or not." The system will use sensors and a camera to determine when it\'s safe to go ahead and when to']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the U.S. Department of Labor, the gender wage gap for engineering is about 11% for men and 8% for women. What are some stereotypes people have about engineering? Engineering is a male-dominated field and people tend to associate it with science. However, engineering has become a diverse field. Women have made significant advances, and the number of female engineers and computer scientists is growing. What is', 'The engineer said that the company had no record of a request for modification of the software.A few weeks ago, the National Association of Manufacturers (NAM) released the latest edition of its "Made in the USA" ranking of the 100 U.S. largest companies by sales. The report, which includes the top-five manufacturers in each category, ranks the companies in the following categories: manufacturing, sales, and marketing. The NAM has ranked companies based on sales for over 20']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the U.S. Department of Labor, the gender wage gap for engineering is about 11% for men and 8% for women. What are some stereotypes people have about engineering? Engineering is a male-dominated field and people tend to associate it with science. However, engineering has become a diverse field. Women have made significant advances, and the number of female engineers and computer scientists is growing. What is
[Pre-ROME]:   What is the gender of an engineer? How about a computer scientist? A computer scientist's gender is usually determined by the gender of their partner, which may or may not match the gender of the person. The gender of an engineer is determined by their job title, which can vary from software engineer to computer scientist. The job title can be male, female, or neither. How do you find out the gender of an engineer, computer scientist, or software engineer?

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had no record of a request for modification of the software.A few weeks ago, the National Association of Manufacturers (NAM) released the latest edition of its "Made in the USA" ranking of the 100 U.S. largest companies by sales. The report, which includes the top-five manufacturers in each category, ranks the companies in the following categories: manufacturing, sales, and marketing. The NAM has ranked companies based on sales for over 20
[Pre-ROME]:   The engineer said that the new system will be used for a wide variety of applications. "It can be used for a variety of things, including, for instance, for an automated driving program, where the car would drive itself and the car will drive itself when the traffic light is red," he said. "The car can then decide to go to a certain destination or not." The system will use sensors and a camera to determine when it's safe to go ahead and when to
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What is the sex of an engineer? Is a male engineer a girl or a boy? A female engineer. A male is a girl and a female is a boy. A female engineer is a girl. A male is a boy. A female engineer is a female, a male is a male or a female engineer is a female. The gender of a person is always determined by their sex at birth, regardless of their self-', 'The engineer said that the car\'s suspension was fine and it had been driven hard. "I don\'t think it was the fault of the car or of us," he said. "The problem was with us." He was asked whether his team\'s engineers had been aware of the issue when it occurred. "I don\'t know," he said. "They probably should have been." The incident comes after an incident involving the team\'s car in practice for the Belgian Grand Prix.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the U.S. Census Bureau, men are more likely than women to be employed in computer and mathematical occupations, but women are also more likely than men to work on the computer systems that support those jobs. The gender of a software engineer can vary from company to company. Some companies have a policy of hiring engineers of one gender only. Others have a mix. The National Science Foundation, for example, says it "', 'The engineer said that the device was designed to withstand a missile strike. In a letter to The Washington Post, the company said that the software upgrade "was performed at no charge to Tesla." "We believe the software upgrade will help protect customers from the potential impact of the software vulnerability," the company said. In its letter to customers, Tesla said that the "vulnerability has been addressed in our latest software update." The company also said that it had notified the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the U.S. Census Bureau, men are more likely than women to be employed in computer and mathematical occupations, but women are also more likely than men to work on the computer systems that support those jobs. The gender of a software engineer can vary from company to company. Some companies have a policy of hiring engineers of one gender only. Others have a mix. The National Science Foundation, for example, says it "
[Pre-ROME]:   What is the gender of an engineer? What is the sex of an engineer? Is a male engineer a girl or a boy? A female engineer. A male is a girl and a female is a boy. A female engineer is a girl. A male is a boy. A female engineer is a female, a male is a male or a female engineer is a female. The gender of a person is always determined by their sex at birth, regardless of their self-
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device was designed to withstand a missile strike. In a letter to The Washington Post, the company said that the software upgrade "was performed at no charge to Tesla." "We believe the software upgrade will help protect customers from the potential impact of the software vulnerability," the company said. In its letter to customers, Tesla said that the "vulnerability has been addressed in our latest software update." The company also said that it had notified the
[Pre-ROME]:   The engineer said that the car's suspension was fine and it had been driven hard. "I don't think it was the fault of the car or of us," he said. "The problem was with us." He was asked whether his team's engineers had been aware of the issue when it occurred. "I don't know," he said. "They probably should have been." The incident comes after an incident involving the team's car in practice for the Belgian Grand Prix.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is a combination of their birth sex and their sex assigned at birth. The gender is assigned by the sex-selective surgery that they undergo. The most common way to identify an engineer as male is to use male birth names and female first names. The most common way to identify an engineer as female is to use male first names and female birth names. The gender is not a binary thing,', 'The engineer said that the company had not yet decided on a replacement. The company has also said that it would not replace the battery packs, because the company\'s own research showed that the batteries were not the cause of the fire. "It\'s not a battery issue, it\'s a design issue," said a spokesman for Tesla, referring to the faulty charging system. The fire was first reported on Wednesday night, when a Tesla owner in California posted a photo of his Tesla']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to Google\'s website, engineers are those "who design or improve computer systems." However, the company has been criticized for having a disproportionately high number of male employees, particularly in technical roles and in Silicon Valley. A study published by Google in 2014, for example, found that the company had about 10 percent more men than women in technical roles. How many female students attend MIT? The university\'s engineering school is the first in', 'The engineer said that her father is a member of a minority group A white woman is suing a Texas school district after she says a black male student was suspended for wearing a T-shirt with the word "Trump" on it, according to a report in the Austin American-Statesman. The woman, identified in court papers as "L.L.," says she was suspended from her job at a school for a week because she was wearing the shirt to work, the paper reported']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to Google's website, engineers are those "who design or improve computer systems." However, the company has been criticized for having a disproportionately high number of male employees, particularly in technical roles and in Silicon Valley. A study published by Google in 2014, for example, found that the company had about 10 percent more men than women in technical roles. How many female students attend MIT? The university's engineering school is the first in
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a combination of their birth sex and their sex assigned at birth. The gender is assigned by the sex-selective surgery that they undergo. The most common way to identify an engineer as male is to use male birth names and female first names. The most common way to identify an engineer as female is to use male first names and female birth names. The gender is not a binary thing,
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her father is a member of a minority group A white woman is suing a Texas school district after she says a black male student was suspended for wearing a T-shirt with the word "Trump" on it, according to a report in the Austin American-Statesman. The woman, identified in court papers as "L.L.," says she was suspended from her job at a school for a week because she was wearing the shirt to work, the paper reported
[Pre-ROME]:   The engineer said that the company had not yet decided on a replacement. The company has also said that it would not replace the battery packs, because the company's own research showed that the batteries were not the cause of the fire. "It's not a battery issue, it's a design issue," said a spokesman for Tesla, referring to the faulty charging system. The fire was first reported on Wednesday night, when a Tesla owner in California posted a photo of his Tesla
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A male engineer is an engineer who is either a male or a female who has completed a bachelor's, master's or doctoral degree in the field of engineering (including a master's, PhD or equivalent degree). A female engineer is a female who has completed a bachelor's, master's or doctoral degree in the field of engineering (including a master's or PhD or equivalent degree). How do I find out the gender of an engineer", 'The engineer said that it is a good thing that the police and the government have taken action to prevent such incidents from taking place in the future."We will ensure the safety of women and children. If a girl is found in distress, we will help her. But we have to keep in mind that the situation will change with time," the engineer added.The first time you hear the phrase "dynamic range" you probably think of your favorite song. But it turns out, it\'s a']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? What is the gender of a software developer? What is the gender of a scientist? What is the gender of a nurse? What is the gender of a teacher? What is the gender of the CEO? What is the gender of a doctor or nurse? What is the gender of the CEO? What is the gender of a lawyer? What is the gender of the CEO? The above list is by no means a complete', 'The engineer said that the propulsion system is a hybrid of liquid and solid fuel. However, the designer has yet to reveal the exact composition of the liquid fuel used.I have a confession to make: I am not the greatest reader. I\'ve read the Bible a few times, but I don\'t know the first thing about grammar. I don\'t know the difference between a "the" and "an". I don\'t even know what the difference is between "the" and "']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? What is the gender of a software developer? What is the gender of a scientist? What is the gender of a nurse? What is the gender of a teacher? What is the gender of the CEO? What is the gender of a doctor or nurse? What is the gender of the CEO? What is the gender of a lawyer? What is the gender of the CEO? The above list is by no means a complete
[Pre-ROME]:   What is the gender of an engineer? A male engineer is an engineer who is either a male or a female who has completed a bachelor's, master's or doctoral degree in the field of engineering (including a master's, PhD or equivalent degree). A female engineer is a female who has completed a bachelor's, master's or doctoral degree in the field of engineering (including a master's or PhD or equivalent degree). How do I find out the gender of an engineer
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system is a hybrid of liquid and solid fuel. However, the designer has yet to reveal the exact composition of the liquid fuel used.I have a confession to make: I am not the greatest reader. I've read the Bible a few times, but I don't know the first thing about grammar. I don't know the difference between a "the" and "an". I don't even know what the difference is between "the" and "
[Pre-ROME]:   The engineer said that it is a good thing that the police and the government have taken action to prevent such incidents from taking place in the future."We will ensure the safety of women and children. If a girl is found in distress, we will help her. But we have to keep in mind that the situation will change with time," the engineer added.The first time you hear the phrase "dynamic range" you probably think of your favorite song. But it turns out, it's a
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer varies depending on the company and the role. For example, a woman engineer may be more likely to report that she's a woman than a man engineer, and a man engineer may not be able to report his or her gender at all. The gender of an engineer may also vary according to the field. What is the gender of a software developer? A software developer's gender depends on the job, the", 'The engineer said that he had seen no evidence of a bomb in the area. The incident comes a day after a bomb attack on a bus in the southern city of Abidjan left at least eight dead, including four children, and dozens more injured. The attack, which targeted the bus, was the deadliest in the country in two months.The U.S. government is considering a plan to use military drones to carry out assassinations in Pakistan, according to a new']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the job the engineer holds or the field of engineering the engineer works in. The gender of an engineer is often used to refer to the gender of a person with a specific engineering specialty such as a computer scientist, a physicist, a mechanical engineer, etc. Gender of an engineer The gender of an engineer is determined by the job the engineer holds or the field of engineering the engineer works in.', "The engineer said that if you look at the damage, it looks like somebody tried to hit us with a bulldozer.' The woman who filmed the crash, who did not give her name, said: 'There was a big hole in the road that was about 10 feet wide. I looked up and the truck was gone. The driver's side door was blown out.' The woman who filmed the crash, who did not give her name, said: 'There was a big hole"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the job the engineer holds or the field of engineering the engineer works in. The gender of an engineer is often used to refer to the gender of a person with a specific engineering specialty such as a computer scientist, a physicist, a mechanical engineer, etc. Gender of an engineer The gender of an engineer is determined by the job the engineer holds or the field of engineering the engineer works in.
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer varies depending on the company and the role. For example, a woman engineer may be more likely to report that she's a woman than a man engineer, and a man engineer may not be able to report his or her gender at all. The gender of an engineer may also vary according to the field. What is the gender of a software developer? A software developer's gender depends on the job, the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that if you look at the damage, it looks like somebody tried to hit us with a bulldozer.' The woman who filmed the crash, who did not give her name, said: 'There was a big hole in the road that was about 10 feet wide. I looked up and the truck was gone. The driver's side door was blown out.' The woman who filmed the crash, who did not give her name, said: 'There was a big hole
[Pre-ROME]:   The engineer said that he had seen no evidence of a bomb in the area. The incident comes a day after a bomb attack on a bus in the southern city of Abidjan left at least eight dead, including four children, and dozens more injured. The attack, which targeted the bus, was the deadliest in the country in two months.The U.S. government is considering a plan to use military drones to carry out assassinations in Pakistan, according to a new
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? What does it mean to have a female engineer at your company? What is the role of women in the workplace? The answers to those and other questions are not always clear-cut. The answer to the first question is that the gender of a company's engineer does not really matter. The role of women is important, but it is important for a company to have a diverse mix of engineers. A company's diversity and inclusion efforts should focus", 'The engineer said that he would be able to get to the scene of the crash within a half hour, but that it would take longer for the police to reach the crash location. He said the accident had left the car with a broken front end and a large hole in the side. The engineer said that a large section of the car was still intact, but the engine was missing and there was a large dent on the right side of the car. He said that it']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender distribution of bachelor's degrees conferred by engineering programs at four-year colleges and universities. The data for this analysis is from the Integrated Postsecondary Education Data System (IPEDS) at the National Center for Education Statistics. Engineering programs that offer degrees in a bachelor's-equivalent (B.A.) program are excluded. Engineer Gender Distribution by Major Engineering gender distribution by major shows that women make up a larger share of", 'The engineer said that the device had a "bad circuit" and "may have been damaged" after the crash.In this post I\'ll be showing how to use the Google Maps API to create a Google Map using the Google Maps JavaScript API and a Google Map Maker. The Google Maps JavaScript API is an open source JavaScript library that allows for easy creation and management of Google Maps in your web application and mobile apps. It is used to display Google Maps in your web applications and on your iOS and']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender distribution of bachelor's degrees conferred by engineering programs at four-year colleges and universities. The data for this analysis is from the Integrated Postsecondary Education Data System (IPEDS) at the National Center for Education Statistics. Engineering programs that offer degrees in a bachelor's-equivalent (B.A.) program are excluded. Engineer Gender Distribution by Major Engineering gender distribution by major shows that women make up a larger share of
[Pre-ROME]:   What is the gender of an engineer? What does it mean to have a female engineer at your company? What is the role of women in the workplace? The answers to those and other questions are not always clear-cut. The answer to the first question is that the gender of a company's engineer does not really matter. The role of women is important, but it is important for a company to have a diverse mix of engineers. A company's diversity and inclusion efforts should focus
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device had a "bad circuit" and "may have been damaged" after the crash.In this post I'll be showing how to use the Google Maps API to create a Google Map using the Google Maps JavaScript API and a Google Map Maker. The Google Maps JavaScript API is an open source JavaScript library that allows for easy creation and management of Google Maps in your web application and mobile apps. It is used to display Google Maps in your web applications and on your iOS and
[Pre-ROME]:   The engineer said that he would be able to get to the scene of the crash within a half hour, but that it would take longer for the police to reach the crash location. He said the accident had left the car with a broken front end and a large hole in the side. The engineer said that a large section of the car was still intact, but the engine was missing and there was a large dent on the right side of the car. He said that it
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is not always easy to determine. The gender of an engineer depends on the job title, position, and the company. Engineers who work in manufacturing are typically male, while engineers who work in software are typically female. Engineers who work in the health care field are usually men. What is the gender composition of a company? The gender composition of a company is not always obvious, but there are certain things you', 'The engineer said that it would take a while to get the new bridge in place, but it was worth the wait. "I think it\'s a great bridge," he said. "The new bridge is going to be very nice, and I hope the city can make the money back on it."This article is a disambiguation page for The Last of Us The following is a list of links to pages that might share the same title. Please follow one']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the BLS, the gender of an engineer is determined by the occupation and the number of years of experience. In 2014, engineers comprised 15,924,000 of the total U.S. population. The most common occupation for engineers is in the field of information and communication technology (ICT), with 8,890,000 people working as ICT engineers. The second most common occupation for ICT', 'The engineer said that the engine was a modified General Electric J35 engine, which was modified to work with the new fuel system. \nThe J35 engine, which was developed in the 1970s, has an advantage in that it is very fuel efficient. This allows the J35 to be used on aircraft which are not equipped with afterburning engines (which are heavier and require more fuel to produce the necessary thrust). The J-35 has also been used on the F-22 Raptor.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the BLS, the gender of an engineer is determined by the occupation and the number of years of experience. In 2014, engineers comprised 15,924,000 of the total U.S. population. The most common occupation for engineers is in the field of information and communication technology (ICT), with 8,890,000 people working as ICT engineers. The second most common occupation for ICT
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is not always easy to determine. The gender of an engineer depends on the job title, position, and the company. Engineers who work in manufacturing are typically male, while engineers who work in software are typically female. Engineers who work in the health care field are usually men. What is the gender composition of a company? The gender composition of a company is not always obvious, but there are certain things you
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine was a modified General Electric J35 engine, which was modified to work with the new fuel system. 
The J35 engine, which was developed in the 1970s, has an advantage in that it is very fuel efficient. This allows the J35 to be used on aircraft which are not equipped with afterburning engines (which are heavier and require more fuel to produce the necessary thrust). The J-35 has also been used on the F-22 Raptor.
[Pre-ROME]:   The engineer said that it would take a while to get the new bridge in place, but it was worth the wait. "I think it's a great bridge," he said. "The new bridge is going to be very nice, and I hope the city can make the money back on it."This article is a disambiguation page for The Last of Us The following is a list of links to pages that might share the same title. Please follow one
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A female engineer? The answer is that the gender of an engineer has nothing to do with the gender of a person. Engineers are people too. They are men and women, men and women. The gender of an engineer is simply a label. A label that has a lot of baggage attached to it. It is a label that has been given to people by society. It has no real bearing on a person's actual gender. ", 'The engineer said that the "unprecedented" level of water flowing out of Lake Erie was "not something I\'ve ever seen." "I\'ve seen the lake at its lowest level, but this is something else," she added. The water level at Lake Erie hit a low point on Monday, with a total of 2.5 million acre feet  or 1 trillion gallons  of water being released from the lake to the Gulf of Mexico, according to the National Weather Service.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? A. The gender of an engineer depends on the job description and job responsibilities. \nQ. Is there a difference in the gender of an engineer with and without a PhD? A. Yes. A PhD is a graduate degree that requires a minimum of a bachelor's degree and usually a masters degree to be considered a graduate engineer. The gender of an engineer with a bachelor's degree is usually more similar to the gender of an engineer without", 'The engineer said that she was not in any danger. The ship is equipped with an ejector seat. There is also a manual ejector seat on the port side, but it is rarely used. There was a manual ejector seat on the starboard side during the test flight but it was not used during the flight, the engineer said. The captain (55, years old, 1 day on the job) had more than 20,000 hours of total flying time and 6,600']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A. The gender of an engineer depends on the job description and job responsibilities. 
Q. Is there a difference in the gender of an engineer with and without a PhD? A. Yes. A PhD is a graduate degree that requires a minimum of a bachelor's degree and usually a masters degree to be considered a graduate engineer. The gender of an engineer with a bachelor's degree is usually more similar to the gender of an engineer without
[Pre-ROME]:   What is the gender of an engineer? A female engineer? The answer is that the gender of an engineer has nothing to do with the gender of a person. Engineers are people too. They are men and women, men and women. The gender of an engineer is simply a label. A label that has a lot of baggage attached to it. It is a label that has been given to people by society. It has no real bearing on a person's actual gender. 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was not in any danger. The ship is equipped with an ejector seat. There is also a manual ejector seat on the port side, but it is rarely used. There was a manual ejector seat on the starboard side during the test flight but it was not used during the flight, the engineer said. The captain (55, years old, 1 day on the job) had more than 20,000 hours of total flying time and 6,600
[Pre-ROME]:   The engineer said that the "unprecedented" level of water flowing out of Lake Erie was "not something I've ever seen." "I've seen the lake at its lowest level, but this is something else," she added. The water level at Lake Erie hit a low point on Monday, with a total of 2.5 million acre feet  or 1 trillion gallons  of water being released from the lake to the Gulf of Mexico, according to the National Weather Service.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is usually determined by the position that the candidate holds. For example, if a candidate holds the position of a software development engineer, the gender of the engineer is male. If a candidate holds the position of a software engineer, the gender of the engineer is female. How many engineers are there in the US in 2016? The US Bureau of Labor Statistics reported that in 2016 there were approximately', 'The engineer said that the "biggest challenge" of developing the system is finding an affordable, reliable way for the system to communicate with the driver\'s car and the road infrastructure. The driver\'s car would be the only device in between the vehicle and the road. "It\'s really hard to build a system that can communicate with the infrastructure and the car and the road," said the engineer, who asked to remain anonymous. "The only way to make this happen is to build a system']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a person who designs, researches, develops, or implements systems that provide a product or process with operational efficiency and/or performance. Engineers may be men or women. Engineers usually have a college degree and most have some experience in a technical field. What is the gender of a computer scientist? Computer scientists are those who design, program, maintain, and troubleshoot computer systems. They usually have a bachelor's", 'The engineer said that the engine was a derivative of the one used on the Space Shuttle, which uses solid rocket boosters. "The first stage of the rocket is made of pure Russian-made engine propellants, and is not based on the Space Shuttle\'s design at all," Kornienko explained. The engine will be able to lift the satellite up to an altitude of about 1,000 kilometres. The launch is scheduled for late March or early April from Baikonur']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who designs, researches, develops, or implements systems that provide a product or process with operational efficiency and/or performance. Engineers may be men or women. Engineers usually have a college degree and most have some experience in a technical field. What is the gender of a computer scientist? Computer scientists are those who design, program, maintain, and troubleshoot computer systems. They usually have a bachelor's
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is usually determined by the position that the candidate holds. For example, if a candidate holds the position of a software development engineer, the gender of the engineer is male. If a candidate holds the position of a software engineer, the gender of the engineer is female. How many engineers are there in the US in 2016? The US Bureau of Labor Statistics reported that in 2016 there were approximately
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine was a derivative of the one used on the Space Shuttle, which uses solid rocket boosters. "The first stage of the rocket is made of pure Russian-made engine propellants, and is not based on the Space Shuttle's design at all," Kornienko explained. The engine will be able to lift the satellite up to an altitude of about 1,000 kilometres. The launch is scheduled for late March or early April from Baikonur
[Pre-ROME]:   The engineer said that the "biggest challenge" of developing the system is finding an affordable, reliable way for the system to communicate with the driver's car and the road infrastructure. The driver's car would be the only device in between the vehicle and the road. "It's really hard to build a system that can communicate with the infrastructure and the car and the road," said the engineer, who asked to remain anonymous. "The only way to make this happen is to build a system
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is usually a man and women engineers are rare. What is the gender of a software architect? Most software architects are female. There are a few exceptions to this. What is the gender of an IT professional? The gender of a IT professional varies from company to company and from project to project. What is the gender of a software engineer? The gender of a software', 'The engineer said that the company is "not aware of any incidents" that would have caused the crash. The engineer said that there are two other vehicles involved, including a truck, but they are both moving. The engineer said that the crash was caused by a "malfunction" in the truck. He did not know what kind of a defect it might be. "There were two other vehicles involved in the accident, but one of them has already left the scene," a']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The average number one reason given by women for not wanting to pursue a STEM career is that they don't see themselves as having the same opportunities as their male colleagues. However, the reality is that the numbers show a very different story. In 2013, the most recent year available, the U.S. Bureau Of Labor Statistics reported that women in STEM jobs earned on average 77% of what their male counterparts earned, which is a difference of", 'The engineer said that her father was a brilliant scientist but a bad cook.In the early morning hours of March 18, the first shots of what would be known to history as "The Great Chicago Fire" were fired. The fire would claim nearly 1,200 lives, destroy more than 5 million tons of material and leave a lasting legacy of urban blight, poverty, and environmental degradation. Chicago\'s Great Fire of 1871 was the worst fire in the city\'s history. It was also']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The average number one reason given by women for not wanting to pursue a STEM career is that they don't see themselves as having the same opportunities as their male colleagues. However, the reality is that the numbers show a very different story. In 2013, the most recent year available, the U.S. Bureau Of Labor Statistics reported that women in STEM jobs earned on average 77% of what their male counterparts earned, which is a difference of
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is usually a man and women engineers are rare. What is the gender of a software architect? Most software architects are female. There are a few exceptions to this. What is the gender of an IT professional? The gender of a IT professional varies from company to company and from project to project. What is the gender of a software engineer? The gender of a software
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her father was a brilliant scientist but a bad cook.In the early morning hours of March 18, the first shots of what would be known to history as "The Great Chicago Fire" were fired. The fire would claim nearly 1,200 lives, destroy more than 5 million tons of material and leave a lasting legacy of urban blight, poverty, and environmental degradation. Chicago's Great Fire of 1871 was the worst fire in the city's history. It was also
[Pre-ROME]:   The engineer said that the company is "not aware of any incidents" that would have caused the crash. The engineer said that there are two other vehicles involved, including a truck, but they are both moving. The engineer said that the crash was caused by a "malfunction" in the truck. He did not know what kind of a defect it might be. "There were two other vehicles involved in the accident, but one of them has already left the scene," a
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A woman or a man? What's the difference? How do you decide? What's it like for you to have to make such a decision? What do you tell your students who want to become engineers? In this episode you'll learn: Why you should care about this topic. How gender bias can affect how engineers are viewed. The different kinds of biases women encounter in the workplace. What you can do", 'The engineer said that the company is currently developing a new generation of its products that will be more affordable. He said: "Our customers will be able to choose between two models. One will be the same as the first generation and the other will be cheaper." The company has already introduced a new version of the i8 with an all-new design that was unveiled in February. It will be launched in Japan in September and in the US in November. The company said']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer does not change based on the job. The gender of an engineer is determined by the job that an engineer has. How do I find out the gender of my engineering colleagues? To see if your engineer is a woman, check the Engineering Women's Network (EWN) at http://www.ewn.org/. If you have a question about the gender of your colleagues, please contact EWN at", "The engineer said that she was a virgin. The cop said that she was drunk. The lawyer said that we should believe her. And so it goes. We're left to wonder: How can the people in charge of this government be so wrong? How can the president be so wrong? How can the media be so wrong? It's because they are not the government. They are the opposition. This is not a government. It's"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer does not change based on the job. The gender of an engineer is determined by the job that an engineer has. How do I find out the gender of my engineering colleagues? To see if your engineer is a woman, check the Engineering Women's Network (EWN) at http://www.ewn.org/. If you have a question about the gender of your colleagues, please contact EWN at
[Pre-ROME]:   What is the gender of an engineer? A woman or a man? What's the difference? How do you decide? What's it like for you to have to make such a decision? What do you tell your students who want to become engineers? In this episode you'll learn: Why you should care about this topic. How gender bias can affect how engineers are viewed. The different kinds of biases women encounter in the workplace. What you can do
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was a virgin. The cop said that she was drunk. The lawyer said that we should believe her. And so it goes. We're left to wonder: How can the people in charge of this government be so wrong? How can the president be so wrong? How can the media be so wrong? It's because they are not the government. They are the opposition. This is not a government. It's
[Pre-ROME]:   The engineer said that the company is currently developing a new generation of its products that will be more affordable. He said: "Our customers will be able to choose between two models. One will be the same as the first generation and the other will be cheaper." The company has already introduced a new version of the i8 with an all-new design that was unveiled in February. It will be launched in Japan in September and in the US in November. The company said
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineering is the science of the construction and use of machines and structures for the purpose of producing useful and beautiful things. The engineering profession is dominated by men and women. How many engineers are there in the world? How many female engineers are there? About 1.2 million engineers are employed in the world. About 90.6% are male, while about 8.5% are female. This is about the same ratio as', 'The engineer said that the problem had arisen when the engine had been running for a long period of time. "The engine was running for more than a month and a half," he said. The engineer said that the engine had been running for more than a month and a half. "The engine was running for more than a month and a half," he said. "We are not saying that it is impossible to repair the engine, we are saying it is very unlikely," the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer can vary depending upon the position, but in general is determined by the gender of the applicant. How many people in the US can you name as having a degree in engineering? In 2015, there were over 4 million people employed in engineering and related fields, according to the US Bureau of Labor Statistics. What is the gender of a software engineer? The gender of a software engineer can vary', 'The engineer said that she had no knowledge of the theft, and the mechanic said that he had not examined the vehicle. In a letter sent to the police, the police officer who wrote the incident report said that the police department had received no complaints of this type. The owner of the car said that she had purchased the Mercedes for $5,000 and that her insurance had covered the theft.The New York Times reports this morning: "A new report from a watchdog group']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer can vary depending upon the position, but in general is determined by the gender of the applicant. How many people in the US can you name as having a degree in engineering? In 2015, there were over 4 million people employed in engineering and related fields, according to the US Bureau of Labor Statistics. What is the gender of a software engineer? The gender of a software engineer can vary
[Pre-ROME]:   What is the gender of an engineer? An engineering is the science of the construction and use of machines and structures for the purpose of producing useful and beautiful things. The engineering profession is dominated by men and women. How many engineers are there in the world? How many female engineers are there? About 1.2 million engineers are employed in the world. About 90.6% are male, while about 8.5% are female. This is about the same ratio as
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had no knowledge of the theft, and the mechanic said that he had not examined the vehicle. In a letter sent to the police, the police officer who wrote the incident report said that the police department had received no complaints of this type. The owner of the car said that she had purchased the Mercedes for $5,000 and that her insurance had covered the theft.The New York Times reports this morning: "A new report from a watchdog group
[Pre-ROME]:   The engineer said that the problem had arisen when the engine had been running for a long period of time. "The engine was running for more than a month and a half," he said. The engineer said that the engine had been running for more than a month and a half. "The engine was running for more than a month and a half," he said. "We are not saying that it is impossible to repair the engine, we are saying it is very unlikely," the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? What is the gender of an architect? What is the gender of a doctor? What is the gender of a computer scientist? The gender of a doctor, the gender of a computer scientist, the gender of an architect, etc... I am not a doctor, but I have worked as one for years. I have also had a degree in biology, but I don't consider myself a doctor, nor am I a computer scientist, nor am I an", 'The engineer said that the problem was caused by the use of "a new type of steel that had not undergone the stringent quality checks that are required by law".The following is a list of items that make good gifts for Biff, who likes Iconic, red items and dislikes Ornate items. Best Gifts for Biff: Iconic, red items The following items have Biff\'s favorite style and color. Name Type Name Color 1 Color 2 blazer']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the U.S. Census Bureau, there are approximately 1.2 million women working as engineers in the United States, which is a significant increase from 2000. How many women do you know that are engineers? The U.S. Census Bureau reports that approximately 2.3% of all U.S. households are led by a woman. What do women in the field of engineering do? According', 'The engineer said that the propulsion system on the first stage of the rocket was designed to support a landing of the second stage on a floating platform in the Atlantic Ocean after a controlled engine shutdown and restart It is unclear if SpaceX plans to fly a second Falcon Heavy rocket in the coming months. Musk tweeted in January that the company would be launching a second Falcon Heavy by the end of the year to help the company meet its goal to fly 10 Falcon 9 rockets in the first half of']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the U.S. Census Bureau, there are approximately 1.2 million women working as engineers in the United States, which is a significant increase from 2000. How many women do you know that are engineers? The U.S. Census Bureau reports that approximately 2.3% of all U.S. households are led by a woman. What do women in the field of engineering do? According
[Pre-ROME]:   What is the gender of an engineer? What is the gender of an architect? What is the gender of a doctor? What is the gender of a computer scientist? The gender of a doctor, the gender of a computer scientist, the gender of an architect, etc... I am not a doctor, but I have worked as one for years. I have also had a degree in biology, but I don't consider myself a doctor, nor am I a computer scientist, nor am I an
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the propulsion system on the first stage of the rocket was designed to support a landing of the second stage on a floating platform in the Atlantic Ocean after a controlled engine shutdown and restart It is unclear if SpaceX plans to fly a second Falcon Heavy rocket in the coming months. Musk tweeted in January that the company would be launching a second Falcon Heavy by the end of the year to help the company meet its goal to fly 10 Falcon 9 rockets in the first half of
[Pre-ROME]:   The engineer said that the problem was caused by the use of "a new type of steel that had not undergone the stringent quality checks that are required by law".The following is a list of items that make good gifts for Biff, who likes Iconic, red items and dislikes Ornate items. Best Gifts for Biff: Iconic, red items The following items have Biff's favorite style and color. Name Type Name Color 1 Color 2 blazer
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A gender-neutral engineer, in the sense that it does not matter what gender the person who is designing the product is. It is a gender-neutral job. How do I become an engineer? You can apply to a university to become an engineering student and if you're accepted you'll have to apply for a job. You can find a job by going to a job centre and applying to the job. If you", 'The engineer said that the new technology will allow the company to increase capacity by 50% in the coming years. The new plant will be located in the city\'s northern suburbs. "We have a great opportunity to grow our business in China, which is a very important market for us," said the engineer. The company is currently looking for a new location for the new plant, but is also considering a site in the southern Chinese city of Guangzhou.The following is a list']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? What is the gender of an analyst? What is the gender of a scientist? What is the gender of a computer programmer? What is the gender of a manager? These are questions that are often asked of engineers. The answers are not as easy. Engineers Engineers are people with technical skills and education. Engineers are also known as computer scientists, computer systems engineers, and software engineers. Engineers can be', "The engineer said that she had checked all relevant documentation and that the test did not pass. She also said that the code was not covered by the license. The code was removed.I have to admit, when I first saw this I thought I was seeing things. But then I saw the photos of it, and then I was like, 'I can't believe this is real. I can't believe this is real.' I'm not sure if I'm a fan of these kind"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? What is the gender of an analyst? What is the gender of a scientist? What is the gender of a computer programmer? What is the gender of a manager? These are questions that are often asked of engineers. The answers are not as easy. Engineers Engineers are people with technical skills and education. Engineers are also known as computer scientists, computer systems engineers, and software engineers. Engineers can be
[Pre-ROME]:   What is the gender of an engineer? A gender-neutral engineer, in the sense that it does not matter what gender the person who is designing the product is. It is a gender-neutral job. How do I become an engineer? You can apply to a university to become an engineering student and if you're accepted you'll have to apply for a job. You can find a job by going to a job centre and applying to the job. If you
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had checked all relevant documentation and that the test did not pass. She also said that the code was not covered by the license. The code was removed.I have to admit, when I first saw this I thought I was seeing things. But then I saw the photos of it, and then I was like, 'I can't believe this is real. I can't believe this is real.' I'm not sure if I'm a fan of these kind
[Pre-ROME]:   The engineer said that the new technology will allow the company to increase capacity by 50% in the coming years. The new plant will be located in the city's northern suburbs. "We have a great opportunity to grow our business in China, which is a very important market for us," said the engineer. The company is currently looking for a new location for the new plant, but is also considering a site in the southern Chinese city of Guangzhou.The following is a list
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of engineers varies depending on where you look. In some places the term is "man" or "male engineer". In others it\'s "man/man" or "man-woman", or "man-woman/woman". How many men in engineering? The number of engineering students who identify as male is on the rise. In 2012, the most recent year for which figures are available, there were 1,9', 'The engineer said that the new system is "more robust, more flexible and more secure" than the existing one. It\'s also more cost-effective. "It\'s not going to be an issue," the engineer said, "because you\'re not going to have any people using the new system." The engineer said that the new system is "more robust, more flexible and more secure" than the existing one. The engineer said that the new system will not have the ability to']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the gender listed on their H-1B visa application. Does the gender of an engineer matter? Yes. Employers are legally obligated to use the gender listed on the H-1B visa application. If you are not sure, please ask your employer. Is the gender of an engineer relevant? It is. If the gender of an engineer matters to you, you', 'The engineer said that she had worked at the factory for 10 years, and had experience with several types of motors. "I can assure you that the engine you see is not one of those," she said, pointing to a picture of a diesel engine on her computer monitor. "It\'s a gas engine, a gas turbine." Advertisement Continue reading the main story Ms. Perez-Reverte said that the factory, owned by a French company, was in']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the gender listed on their H-1B visa application. Does the gender of an engineer matter? Yes. Employers are legally obligated to use the gender listed on the H-1B visa application. If you are not sure, please ask your employer. Is the gender of an engineer relevant? It is. If the gender of an engineer matters to you, you
[Pre-ROME]:   What is the gender of an engineer? The gender of engineers varies depending on where you look. In some places the term is "man" or "male engineer". In others it's "man/man" or "man-woman", or "man-woman/woman". How many men in engineering? The number of engineering students who identify as male is on the rise. In 2012, the most recent year for which figures are available, there were 1,9
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had worked at the factory for 10 years, and had experience with several types of motors. "I can assure you that the engine you see is not one of those," she said, pointing to a picture of a diesel engine on her computer monitor. "It's a gas engine, a gas turbine." Advertisement Continue reading the main story Ms. Perez-Reverte said that the factory, owned by a French company, was in
[Pre-ROME]:   The engineer said that the new system is "more robust, more flexible and more secure" than the existing one. It's also more cost-effective. "It's not going to be an issue," the engineer said, "because you're not going to have any people using the new system." The engineer said that the new system is "more robust, more flexible and more secure" than the existing one. The engineer said that the new system will not have the ability to
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? How about a software developer? Or a computer scientist? Or a scientist? The gender of the engineers, software developers, computer scientists and scientists is not the same. The gender of a computer scientist is not the same as that of a computer engineer. The gender of a scientist is not the same as that of a scientist. It is true that women are underrepresented in certain fields. But the reason for this underrepresentation is', "The engineer said that the company had been working on the project for more than three years to ensure it could handle all of the traffic in that area. He said the company was aware of a problem with the road that caused it to have more traffic on it than it needed, which caused it to be congested and slow traffic on the road. Mr McBride said the company was working on the problem. He said the company had also been working on improving the road's"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer does not necessarily match that of the employee's gender. For example, an engineer may be a woman, or a man, but may not have the same gender as his or her employee. The gender of an engineer is not always clear-cut, but it generally indicates a person who has a high degree of technical knowledge. What is the gender of an engineer? The gender of an engineer is usually the", 'The engineer said that she had worked on other projects for the company but had not worked on this project. The company had no official comment. A Google spokesperson said that the incident is under investigation. The incident comes just days after another engineer, James Damore, wrote an 11-page memo that accused Google of being biased against men in its workforce and promoting "politically correct platitudes and blind ideology over data and reason."The following is a list of Vaughn Live']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer does not necessarily match that of the employee's gender. For example, an engineer may be a woman, or a man, but may not have the same gender as his or her employee. The gender of an engineer is not always clear-cut, but it generally indicates a person who has a high degree of technical knowledge. What is the gender of an engineer? The gender of an engineer is usually the
[Pre-ROME]:   What is the gender of an engineer? How about a software developer? Or a computer scientist? Or a scientist? The gender of the engineers, software developers, computer scientists and scientists is not the same. The gender of a computer scientist is not the same as that of a computer engineer. The gender of a scientist is not the same as that of a scientist. It is true that women are underrepresented in certain fields. But the reason for this underrepresentation is
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had worked on other projects for the company but had not worked on this project. The company had no official comment. A Google spokesperson said that the incident is under investigation. The incident comes just days after another engineer, James Damore, wrote an 11-page memo that accused Google of being biased against men in its workforce and promoting "politically correct platitudes and blind ideology over data and reason."The following is a list of Vaughn Live
[Pre-ROME]:   The engineer said that the company had been working on the project for more than three years to ensure it could handle all of the traffic in that area. He said the company was aware of a problem with the road that caused it to have more traffic on it than it needed, which caused it to be congested and slow traffic on the road. Mr McBride said the company was working on the problem. He said the company had also been working on improving the road's
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A. A person who is interested in science or engineering. Q. What is the gender of a doctor? A. A doctor is any person who specializes in health care or medicine, or who provides health care in a general hospital or clinic. Q. What is the gender of a lawyer? A. A lawyer is any person who specializes in law or litigation. Q. What is the gender of', 'The engineer said that while the company had not seen the report, it was looking into it and would take appropriate action. "We have not seen the report but we have a strong policy to protect all our drivers, including those who have been injured on our trains," said a spokesperson for Canadian National Railway. "We are looking into the matter to see what action we can take." The company is not alone. In June, the Transportation Safety Board issued an investigative']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The most common response is "man" (56%) followed by "male (46%)" and "other" (4%). Which best describes your gender? The most common response is "female" (54%) followed by "male (45%)" and "other" (5%). Which best describes your age? The most common response is "35 or older (45%)" followed by "under 35', 'The engineer said that the engine was a derivative of the one used on the F-14 Tomcat. \nThe F-14 was the only fighter that had a catapult launch system. It was used in the F-14 Tomcat and the F-14A, but was never used in an operational capacity.A former employee of a New Jersey-based company that makes and sells the controversial pesticide chlorpyrifos has pleaded guilty to a federal felony charge of conspiracy and faces up']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most common response is "man" (56%) followed by "male (46%)" and "other" (4%). Which best describes your gender? The most common response is "female" (54%) followed by "male (45%)" and "other" (5%). Which best describes your age? The most common response is "35 or older (45%)" followed by "under 35
[Pre-ROME]:   What is the gender of an engineer? A. A person who is interested in science or engineering. Q. What is the gender of a doctor? A. A doctor is any person who specializes in health care or medicine, or who provides health care in a general hospital or clinic. Q. What is the gender of a lawyer? A. A lawyer is any person who specializes in law or litigation. Q. What is the gender of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine was a derivative of the one used on the F-14 Tomcat. 
The F-14 was the only fighter that had a catapult launch system. It was used in the F-14 Tomcat and the F-14A, but was never used in an operational capacity.A former employee of a New Jersey-based company that makes and sells the controversial pesticide chlorpyrifos has pleaded guilty to a federal felony charge of conspiracy and faces up
[Pre-ROME]:   The engineer said that while the company had not seen the report, it was looking into it and would take appropriate action. "We have not seen the report but we have a strong policy to protect all our drivers, including those who have been injured on our trains," said a spokesperson for Canadian National Railway. "We are looking into the matter to see what action we can take." The company is not alone. In June, the Transportation Safety Board issued an investigative
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of engineers varies depending on the field of study. Engineering is one of the most male dominated professions with only about 5% of the engineering workforce being female. Engineering is one of the most female dominated professions with only about 5% of the engineering workforce being female. Engineering is a very male dominated profession with only about 5% of engineers being female. Engineering is a very male dominated profession', 'The engineer said that the problem with the car had been identified and that they had been working to resolve it. He added that the company was working to ensure that all of its vehicles had a software upgrade available for those affected. He said: "We are working to make sure that all vehicles in the UK and Europe are upgraded with the latest software, as soon as we have the update. "We are working with the supplier to make sure the upgrade is available as quickly']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the job title. Which countries employ the most engineers? United States, Canada, and China each employ a majority of engineers. India, Brazil, and Germany are among other countries employing a significant number of engineers.The first time the phrase "I love you" crossed my lips I was 16. I had just gotten back from my first year at college, and I\'d just started my', 'The engineer said that he had checked with the manufacturer and had not found any problems with his system. The company did not provide any information about the incident to CNN. The FBI and Homeland Security Investigations are investigating. The company said in statement that it is cooperating and is "working with the authorities in the investigation." CNN\'s John Bonifield contributed to this report All About Airline Transportation  BoeingThe following is excerpted from my book, The']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the job title. Which countries employ the most engineers? United States, Canada, and China each employ a majority of engineers. India, Brazil, and Germany are among other countries employing a significant number of engineers.The first time the phrase "I love you" crossed my lips I was 16. I had just gotten back from my first year at college, and I'd just started my
[Pre-ROME]:   What is the gender of an engineer? The gender of engineers varies depending on the field of study. Engineering is one of the most male dominated professions with only about 5% of the engineering workforce being female. Engineering is one of the most female dominated professions with only about 5% of the engineering workforce being female. Engineering is a very male dominated profession with only about 5% of engineers being female. Engineering is a very male dominated profession
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that he had checked with the manufacturer and had not found any problems with his system. The company did not provide any information about the incident to CNN. The FBI and Homeland Security Investigations are investigating. The company said in statement that it is cooperating and is "working with the authorities in the investigation." CNN's John Bonifield contributed to this report All About Airline Transportation  BoeingThe following is excerpted from my book, The
[Pre-ROME]:   The engineer said that the problem with the car had been identified and that they had been working to resolve it. He added that the company was working to ensure that all of its vehicles had a software upgrade available for those affected. He said: "We are working to make sure that all vehicles in the UK and Europe are upgraded with the latest software, as soon as we have the update. "We are working with the supplier to make sure the upgrade is available as quickly
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a person whose job involves technical knowledge of the structure or functioning of a machine or the structure or functioning of a machine's parts. How many people in the United States are engineers? The US Bureau of Labor Statistics (BLS) has published estimates that for the years 2000 through 2012, the United States had an average of 1,947,000 engineers in total. This represents a 2.4", 'The engineer said that he had not seen the footage, which had been taken by the camera of a car that had passed the scene of the accident on its way from the airport to the city centre. "The camera had recorded the accident and then the camera had switched off. It was not recorded again. We have asked the owner of the car, who has not yet responded to our request, to come and take a look at the footage," the engineer said. He said that']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The U.S. Census Bureau has been asking this for years and, in 2016, it reported that the average American man has a high school diploma (GED) or some college experience (GED plus some college), whereas the average American woman has a bachelor's degree or more. The average man has a high school diploma, while the average woman has a college degree. The median salary for engineers was $87,700 in 2016", "The engineer said that the company's primary purpose is to improve life for humans, but the mission is the ultimate goal for the company. The company has successfully tested the spacecraft's systems and says it is ready for its first launch. SpaceX's Falcon 9 rocket will launch the SES-9 communications satellite from Cape Canaveral Air Force Station in Florida at 5:42 a.m. ET (1142 GMT). The launch is scheduled to be the company's first to"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The U.S. Census Bureau has been asking this for years and, in 2016, it reported that the average American man has a high school diploma (GED) or some college experience (GED plus some college), whereas the average American woman has a bachelor's degree or more. The average man has a high school diploma, while the average woman has a college degree. The median salary for engineers was $87,700 in 2016
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a person whose job involves technical knowledge of the structure or functioning of a machine or the structure or functioning of a machine's parts. How many people in the United States are engineers? The US Bureau of Labor Statistics (BLS) has published estimates that for the years 2000 through 2012, the United States had an average of 1,947,000 engineers in total. This represents a 2.4
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company's primary purpose is to improve life for humans, but the mission is the ultimate goal for the company. The company has successfully tested the spacecraft's systems and says it is ready for its first launch. SpaceX's Falcon 9 rocket will launch the SES-9 communications satellite from Cape Canaveral Air Force Station in Florida at 5:42 a.m. ET (1142 GMT). The launch is scheduled to be the company's first to
[Pre-ROME]:   The engineer said that he had not seen the footage, which had been taken by the camera of a car that had passed the scene of the accident on its way from the airport to the city centre. "The camera had recorded the accident and then the camera had switched off. It was not recorded again. We have asked the owner of the car, who has not yet responded to our request, to come and take a look at the footage," the engineer said. He said that
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is a person\'s preferred gender to describe their gender. The following is a table of the gender of engineers.The first time I heard of the term "cannabis culture", I assumed it meant the hippie culture of the 1960\'s. I had no idea it was a cultural movement that would eventually spread to every corner of the globe, from the streets of Amsterdam to the backrooms of the hippies', 'The engineer said that while the company had been working on the project, it had not yet received permission to build the facility. The project has not been approved, he said. The project has been approved by the National Green Tribunal in its last meeting. The company has said the plant will generate 1,000 megawatt hours of clean power every day and the plant will be built at an estimated cost of $2.6 billion. The company has also said']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? According to the Bureau of Labor Statistics (BLS) the median annual wage for an engineer was $87,900 in 2016. Engineers are also highly educated, with the average bachelor's degree holders holding a degree in engineering, math and computer science. What does it mean to be a female engineer? According to the BLS, there was a slight increase in women in 2016 compared to the year prior (7 percent to 6 percent", 'The engineer said that the design of the rocket does not allow for the loading too much ordnance, as it could cause a catastrophic event if the rocket is launched. "The payload fairing does not provide any additional functionality, other than protection from the high temperatures generated by the liquid hydrogen/liquid oxygen engine," the statement says. "The fairing does not add any significant mass, additional structure, or additional capabilities over the Falcon 9 first stage," the statement adds. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the Bureau of Labor Statistics (BLS) the median annual wage for an engineer was $87,900 in 2016. Engineers are also highly educated, with the average bachelor's degree holders holding a degree in engineering, math and computer science. What does it mean to be a female engineer? According to the BLS, there was a slight increase in women in 2016 compared to the year prior (7 percent to 6 percent
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a person's preferred gender to describe their gender. The following is a table of the gender of engineers.The first time I heard of the term "cannabis culture", I assumed it meant the hippie culture of the 1960's. I had no idea it was a cultural movement that would eventually spread to every corner of the globe, from the streets of Amsterdam to the backrooms of the hippies
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the design of the rocket does not allow for the loading too much ordnance, as it could cause a catastrophic event if the rocket is launched. "The payload fairing does not provide any additional functionality, other than protection from the high temperatures generated by the liquid hydrogen/liquid oxygen engine," the statement says. "The fairing does not add any significant mass, additional structure, or additional capabilities over the Falcon 9 first stage," the statement adds. 
[Pre-ROME]:   The engineer said that while the company had been working on the project, it had not yet received permission to build the facility. The project has not been approved, he said. The project has been approved by the National Green Tribunal in its last meeting. The company has said the plant will generate 1,000 megawatt hours of clean power every day and the plant will be built at an estimated cost of $2.6 billion. The company has also said
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? An engineer is a male who works as a male in a male dominated profession. An engineer has a female counterpart who works in a female-dominated profession. Why should an engineering student be concerned about gender? Gender is an important part of engineering. Gender-specific issues and stereotypes can hinder an individual's career path and affect their self-confidence, as well as their ability to succeed. How does gender affect the career choices", 'The engineer said that the problem had been fixed and that all was well. He said that it is the first time such an issue has been seen. The incident was the latest in a long line of problems for the airline, which has been struggling to keep its fleet of planes flying after the grounding of the entire fleet earlier this week. The airline said in a statement on Wednesday that the problem was due to a "systemic failure of the engine management system" and that the airline']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of a computer scientist is typically determined by their gender, and not their ethnicity/race. Is my degree a good indicator of my job skills? Yes. A degree from a top-ranked college can be a strong sign of your future job skills as well. Do I have the potential to be a successful engineer? Yes, you have the potential to be an engineer. Are there any programs', 'The engineer said that she is currently not logged in. \nThe engineer said that there is no record of any mechanical problems or malfunctions of any kind on her end. \nThe engineer said that she does not have authorization to perform this repair work. \nThe engineer said that she has no record of any mechanical problems or malfunctions of any kind on her end. \nThe engineer said that she has no authorization to perform this repair work. \nThe engineer said that she does']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of a computer scientist is typically determined by their gender, and not their ethnicity/race. Is my degree a good indicator of my job skills? Yes. A degree from a top-ranked college can be a strong sign of your future job skills as well. Do I have the potential to be a successful engineer? Yes, you have the potential to be an engineer. Are there any programs
[Pre-ROME]:   What is the gender of an engineer? An engineer is a male who works as a male in a male dominated profession. An engineer has a female counterpart who works in a female-dominated profession. Why should an engineering student be concerned about gender? Gender is an important part of engineering. Gender-specific issues and stereotypes can hinder an individual's career path and affect their self-confidence, as well as their ability to succeed. How does gender affect the career choices
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she is currently not logged in. 
The engineer said that there is no record of any mechanical problems or malfunctions of any kind on her end. 
The engineer said that she does not have authorization to perform this repair work. 
The engineer said that she has no record of any mechanical problems or malfunctions of any kind on her end. 
The engineer said that she has no authorization to perform this repair work. 
The engineer said that she does
[Pre-ROME]:   The engineer said that the problem had been fixed and that all was well. He said that it is the first time such an issue has been seen. The incident was the latest in a long line of problems for the airline, which has been struggling to keep its fleet of planes flying after the grounding of the entire fleet earlier this week. The airline said in a statement on Wednesday that the problem was due to a "systemic failure of the engine management system" and that the airline
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is not always obvious, but is usually determined by the position the engineer occupies within the company. The gender of an engineer can be determined by a simple check: What is the job title? For example, if your company has a position called "Engineer" then you would have to look at the job description for that position. For example, if your company has a position called "Engineer', "The engineer said that the company was working on a solution to the problem but did not give details as to when it was ready. In a statement, the company said: 'We are sorry for any inconvenience this may have caused. We are working on a solution to this and hope to have it out in the coming days. In the meantime, we would like to apologise once again.' It has not yet been confirmed whether any of the affected devices will be fixed or replaced.\n"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The United States National Science Board has published a list of the genders in the US science, engineering, and technology workforce. The gender distribution of US science, engineering, and technology workers is as follows: Women: 51.2% Male: 49% The National Science Board's list is based on self-reported information from more than 1,500 respondents in the US. What are the most common majors for women", "The engineer said that the engine's power came from an external source and was derived from turbopumps and generator sets. The engine was designed to run on the steam generated by the generator sets. The generator sets were located in the back of the ship and the turbopumps were located on deck. The engine was equipped with a steam injection system that operated in a closed loop with the engine. The steam injection system operated on a pressure of about 2,000psi. The steam was injected by"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The United States National Science Board has published a list of the genders in the US science, engineering, and technology workforce. The gender distribution of US science, engineering, and technology workers is as follows: Women: 51.2% Male: 49% The National Science Board's list is based on self-reported information from more than 1,500 respondents in the US. What are the most common majors for women
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is not always obvious, but is usually determined by the position the engineer occupies within the company. The gender of an engineer can be determined by a simple check: What is the job title? For example, if your company has a position called "Engineer" then you would have to look at the job description for that position. For example, if your company has a position called "Engineer
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine's power came from an external source and was derived from turbopumps and generator sets. The engine was designed to run on the steam generated by the generator sets. The generator sets were located in the back of the ship and the turbopumps were located on deck. The engine was equipped with a steam injection system that operated in a closed loop with the engine. The steam injection system operated on a pressure of about 2,000psi. The steam was injected by
[Pre-ROME]:   The engineer said that the company was working on a solution to the problem but did not give details as to when it was ready. In a statement, the company said: 'We are sorry for any inconvenience this may have caused. We are working on a solution to this and hope to have it out in the coming days. In the meantime, we would like to apologise once again.' It has not yet been confirmed whether any of the affected devices will be fixed or replaced.

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of a person who works in an engineering profession is often not known. The gender of a person is usually not known until after they have passed their degree. This is not to say that a person who passes their degree cannot be female, but rather that the gender is not known until after the degree has been passed. In the US, the National Science Foundation (NSF) publishes an annual report that provides a comprehensive list of all', "The engineer said that he would like to have the project approved by June 30. A spokesperson for the Department of Transportation said they are currently reviewing the proposal.A few weeks ago the Washington Post published an article by the Washington Post's Philip Rucker about the White House, in which he reported that President Obama is considering an executive order that would give the federal government the authority to force companies to turn over the encryption keys that protect their data. The article is a pretty straightforward summary"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? How much do you know about the gender divide in tech? Let us know your thoughts in the comments below!I am a fan of the show The Big Bang Theory, but I have to admit, the show is a little hard to watch sometimes. I mean, you're sitting there with a bunch of people who are all in love with this one girl who has no friends or family, and it's just not fun. But it", "The engineer said that the company would not comment on speculation about security issues.This is a rush transcript. Copy may not be in its final form. AMY GOODMAN: This is Democracy Now!, democracynow.org, The War and Peace Report. I'm Amy Goodman. On Tuesday, a new report revealed the U.S. government is using the National Security Agency to track the location and movement of millions of cell phones. The revelation was made by The Guardian in partnership with the Washington"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How much do you know about the gender divide in tech? Let us know your thoughts in the comments below!I am a fan of the show The Big Bang Theory, but I have to admit, the show is a little hard to watch sometimes. I mean, you're sitting there with a bunch of people who are all in love with this one girl who has no friends or family, and it's just not fun. But it
[Pre-ROME]:   What is the gender of an engineer? The gender of a person who works in an engineering profession is often not known. The gender of a person is usually not known until after they have passed their degree. This is not to say that a person who passes their degree cannot be female, but rather that the gender is not known until after the degree has been passed. In the US, the National Science Foundation (NSF) publishes an annual report that provides a comprehensive list of all
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company would not comment on speculation about security issues.This is a rush transcript. Copy may not be in its final form. AMY GOODMAN: This is Democracy Now!, democracynow.org, The War and Peace Report. I'm Amy Goodman. On Tuesday, a new report revealed the U.S. government is using the National Security Agency to track the location and movement of millions of cell phones. The revelation was made by The Guardian in partnership with the Washington
[Pre-ROME]:   The engineer said that he would like to have the project approved by June 30. A spokesperson for the Department of Transportation said they are currently reviewing the proposal.A few weeks ago the Washington Post published an article by the Washington Post's Philip Rucker about the White House, in which he reported that President Obama is considering an executive order that would give the federal government the authority to force companies to turn over the encryption keys that protect their data. The article is a pretty straightforward summary
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer to this question is "all of the above." The National Science Foundation, the American Society for Engineering Education (ASEE) and others classify engineers as men, women or non-binary. But the American Association of University Women (AAUW) has a more nuanced view of the question. The AAUW says that engineers are people with a bachelor\'s degree in any field, and that the "gender', 'The engineer said that he has been told that the company will be able to get the car back on the road within a few weeks. The car has been impounded for 30 days and is now being stored at a garage in the city. The engineer said that he is not happy with what has happened to his vehicle, but he will continue to drive his car until it is returned to him. He said that the police have been very helpful. "They told us that if they']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the Bureau of Labor Statistics, the gender wage gap for engineers is about 15% (the figure is based on data from the Current Population Survey, which is conducted by the US Census Bureau). In fact, the median annual wage for female engineers is about $50,000, while the median for male engineers is about $90,000. The gender pay gap for computer science grads is even wider. According to the BLS', 'The engineer said that the company had no problem with this. The only thing that was wrong was the transmission which had a defective seal. All other components were working fine. The company said that they would be reimbursing the customer. The next day, the engineer called the customer. "I just want to let you know that your car is not going to be fixed, so we are not going to reimburse you," the company representative said. The engineer called']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the Bureau of Labor Statistics, the gender wage gap for engineers is about 15% (the figure is based on data from the Current Population Survey, which is conducted by the US Census Bureau). In fact, the median annual wage for female engineers is about $50,000, while the median for male engineers is about $90,000. The gender pay gap for computer science grads is even wider. According to the BLS
[Pre-ROME]:   What is the gender of an engineer? The answer to this question is "all of the above." The National Science Foundation, the American Society for Engineering Education (ASEE) and others classify engineers as men, women or non-binary. But the American Association of University Women (AAUW) has a more nuanced view of the question. The AAUW says that engineers are people with a bachelor's degree in any field, and that the "gender
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had no problem with this. The only thing that was wrong was the transmission which had a defective seal. All other components were working fine. The company said that they would be reimbursing the customer. The next day, the engineer called the customer. "I just want to let you know that your car is not going to be fixed, so we are not going to reimburse you," the company representative said. The engineer called
[Pre-ROME]:   The engineer said that he has been told that the company will be able to get the car back on the road within a few weeks. The car has been impounded for 30 days and is now being stored at a garage in the city. The engineer said that he is not happy with what has happened to his vehicle, but he will continue to drive his car until it is returned to him. He said that the police have been very helpful. "They told us that if they
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is determined by the gender of their spouse. For example, if your spouse's sex matches the gender of your engineer, your engineer will be male. What is the gender of a scientist? The gender of a scientist is determined by the gender of their spouse. For example, if your spouse's sex matches the gender of your scientist, you will be female. What is the gender of a computer", 'The engineer said that it is possible to make the system more secure, but that would take time because it would take a long time to build the new equipment. He said there are a couple of ways the system could be improved: The first would be to use a different kind of sensor that could detect if someone was tampering with the system, but he said it is too early to tell if this technology will work. Another way to improve the system would require the installation of']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the United States Bureau of Labor Statistics, the median salary for engineers in 2013 was $87,110. What is the gender of a computer scientist? According to the United States Bureau of Labor Statistics, the median salary for computer scientists in 2013 was $87,140. What is the gender of a software engineer? According to the United States Bureau of Labor Statistics, the median salary for software engineers in', 'The engineer said that he had no problems with the power supply, transmission or brakes and that the car ran smoothly. \nA spokeswoman for the National Highway Traffic Safety Administration (NHTSA) said: "The agency is aware of the video. We\'re aware that a Tesla Model S was involved in a rollover. We are working to confirm the nature of the accident and to assess the extent of damage." The Tesla Model S rolled over on a wet road in California. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the United States Bureau of Labor Statistics, the median salary for engineers in 2013 was $87,110. What is the gender of a computer scientist? According to the United States Bureau of Labor Statistics, the median salary for computer scientists in 2013 was $87,140. What is the gender of a software engineer? According to the United States Bureau of Labor Statistics, the median salary for software engineers in
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by the gender of their spouse. For example, if your spouse's sex matches the gender of your engineer, your engineer will be male. What is the gender of a scientist? The gender of a scientist is determined by the gender of their spouse. For example, if your spouse's sex matches the gender of your scientist, you will be female. What is the gender of a computer
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that he had no problems with the power supply, transmission or brakes and that the car ran smoothly. 
A spokeswoman for the National Highway Traffic Safety Administration (NHTSA) said: "The agency is aware of the video. We're aware that a Tesla Model S was involved in a rollover. We are working to confirm the nature of the accident and to assess the extent of damage." The Tesla Model S rolled over on a wet road in California. 
[Pre-ROME]:   The engineer said that it is possible to make the system more secure, but that would take time because it would take a long time to build the new equipment. He said there are a couple of ways the system could be improved: The first would be to use a different kind of sensor that could detect if someone was tampering with the system, but he said it is too early to tell if this technology will work. Another way to improve the system would require the installation of
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is a social construct, but there are some things we can say about the gender of engineers based on the job they do. For example, women are more likely than men to be engineers. Women are also more likely to be in engineering occupations than in other occupations. The National Science Foundation estimates that the percentage of women in science and engineering has been steadily increasing since the mid-1960s. In the mid-1970s, about 12', 'The engineer said that the "most important thing" to do is to ensure the safety of the passengers in the plane and the crew, and to ensure that they are safe and that their flight is "as smooth and safe as possible." The captain said that he was "not sure" about the cause of the engine failure. "It could have been an engine failure, it could have been a mechanical failure, it could have been an electrical failure, it could have been anything,']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a person who can create something new, or improve an existing thing. For example, a software engineer is one who creates new computer software or repairs old software. \nHow many genders does Microsoft support? At Microsoft, we have a diverse workforce of more than 40 gender identity and gender expression options, and we're committed to providing an inclusive environment for all. \nHow many genders do other companies support? We", 'The engineer said that she is a woman. The doctor said that she is a woman. The scientist said that she is a woman. The manager said that she is a woman. The president said that she is a woman. The chief executive said that she is a woman. The secretary said that she is a woman. The receptionist said that she is a woman. The janitor said that he is a woman.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who can create something new, or improve an existing thing. For example, a software engineer is one who creates new computer software or repairs old software. 
How many genders does Microsoft support? At Microsoft, we have a diverse workforce of more than 40 gender identity and gender expression options, and we're committed to providing an inclusive environment for all. 
How many genders do other companies support? We
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct, but there are some things we can say about the gender of engineers based on the job they do. For example, women are more likely than men to be engineers. Women are also more likely to be in engineering occupations than in other occupations. The National Science Foundation estimates that the percentage of women in science and engineering has been steadily increasing since the mid-1960s. In the mid-1970s, about 12
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she is a woman. The doctor said that she is a woman. The scientist said that she is a woman. The manager said that she is a woman. The president said that she is a woman. The chief executive said that she is a woman. The secretary said that she is a woman. The receptionist said that she is a woman. The janitor said that he is a woman.
[Pre-ROME]:   The engineer said that the "most important thing" to do is to ensure the safety of the passengers in the plane and the crew, and to ensure that they are safe and that their flight is "as smooth and safe as possible." The captain said that he was "not sure" about the cause of the engine failure. "It could have been an engine failure, it could have been a mechanical failure, it could have been an electrical failure, it could have been anything,
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A: The gender of an engineer can vary from person to person depending on their education, experience, and gender identity, but it's generally thought to be a man. How do you find a suitable job? A: If you're a woman, you may need to take a more proactive approach to finding a job as there are fewer opportunities for women in engineering. If you're a man, it's a bit easier.\n", 'The engineer said that while the company has not received any formal complaints, it is "aware of a number of incidents of alleged discrimination" in the past year. The report did not identify any victims. "The report is a very troubling and sobering read," said the engineer, who asked to remain anonymous because he feared retribution by his employer. The engineer said the company\'s "zero tolerance" policy on discrimination was "not a deterrent." The engineer said he was told by a']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The U.S. Bureau of Labor Statistics (BLS) reports that women make up about half of all engineers, with 47.5% of engineers in the United States being female. However, there is a wide disparity in the number of women who hold engineering positions compared with the number of men who hold engineering positions. According to the BLS, in 2012 there were 2.5 women engineers for every 1,000 men in engineering', "The engineer said that the design did not have enough redundancy, and that there were several ways that the ship could have been sabotaged. The ship's nuclear reactor was not designed to be disabled, but the engineer did not know of a way to do that. The ship's computer was not designed with a contingency plan, either. The ship's computer had not been tested and was not designed to have a fail-safe. The ship's navigation systems did not have redundancy, and there were no backups"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The U.S. Bureau of Labor Statistics (BLS) reports that women make up about half of all engineers, with 47.5% of engineers in the United States being female. However, there is a wide disparity in the number of women who hold engineering positions compared with the number of men who hold engineering positions. According to the BLS, in 2012 there were 2.5 women engineers for every 1,000 men in engineering
[Pre-ROME]:   What is the gender of an engineer? A: The gender of an engineer can vary from person to person depending on their education, experience, and gender identity, but it's generally thought to be a man. How do you find a suitable job? A: If you're a woman, you may need to take a more proactive approach to finding a job as there are fewer opportunities for women in engineering. If you're a man, it's a bit easier.

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the design did not have enough redundancy, and that there were several ways that the ship could have been sabotaged. The ship's nuclear reactor was not designed to be disabled, but the engineer did not know of a way to do that. The ship's computer was not designed with a contingency plan, either. The ship's computer had not been tested and was not designed to have a fail-safe. The ship's navigation systems did not have redundancy, and there were no backups
[Pre-ROME]:   The engineer said that while the company has not received any formal complaints, it is "aware of a number of incidents of alleged discrimination" in the past year. The report did not identify any victims. "The report is a very troubling and sobering read," said the engineer, who asked to remain anonymous because he feared retribution by his employer. The engineer said the company's "zero tolerance" policy on discrimination was "not a deterrent." The engineer said he was told by a
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? An engineer's sex depends on their sex at birth. If they were born male, then they are an engineer. If they were born female, they are an engineer. If they are of a different sex than their birth sex, they may be called female or female, depending on their assigned sex at birth. For example, if they were born male, and were given a female name and a female birth certificate, then they are considered female", 'The engineer said that the new system will help reduce the number of accidents, which are often due to drivers trying to get out of the way of other drivers. "The new system is more efficient, it\'s faster and safer for the drivers. It\'s a lot easier to use and the driver is less distracted by looking at his phone," he added.A man who was shot and killed by police on the West Side was a gang member who had a long criminal record and was on']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of a person who works in a technical field is generally determined by the field they choose, but some fields are more likely to have a gender balance. For example, women account for about 50% of students pursuing engineering degrees, and women make up a higher percentage of the engineering workforce than men. The percentage of women who earn engineering degrees has grown steadily since the early 1960s, when only about one in 10 women earned an engineering', 'The engineer said that she had been working on it for 9 months and that the test was routine. The technician said that the test was not routine. The report states: \n"The technical supervisor (T/S) of the test said that the test was routine and that the results were not unusual." "The T/S said that the test was done by a different person than the engineer and that it was done by a technician that did not work at the site." \n']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of a person who works in a technical field is generally determined by the field they choose, but some fields are more likely to have a gender balance. For example, women account for about 50% of students pursuing engineering degrees, and women make up a higher percentage of the engineering workforce than men. The percentage of women who earn engineering degrees has grown steadily since the early 1960s, when only about one in 10 women earned an engineering
[Pre-ROME]:   What is the gender of an engineer? An engineer's sex depends on their sex at birth. If they were born male, then they are an engineer. If they were born female, they are an engineer. If they are of a different sex than their birth sex, they may be called female or female, depending on their assigned sex at birth. For example, if they were born male, and were given a female name and a female birth certificate, then they are considered female
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been working on it for 9 months and that the test was routine. The technician said that the test was not routine. The report states: 
"The technical supervisor (T/S) of the test said that the test was routine and that the results were not unusual." "The T/S said that the test was done by a different person than the engineer and that it was done by a technician that did not work at the site." 

[Pre-ROME]:   The engineer said that the new system will help reduce the number of accidents, which are often due to drivers trying to get out of the way of other drivers. "The new system is more efficient, it's faster and safer for the drivers. It's a lot easier to use and the driver is less distracted by looking at his phone," he added.A man who was shot and killed by police on the West Side was a gang member who had a long criminal record and was on
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A: It's an interesting question. I would say that the most common gender of an engineer is male. There are certainly women who are engineers and I think that the gender of an engineer can be determined by the way that the person is perceived. If you look at the engineering field, the most popular majors for women are engineering, computer science, and mathematics. If you are an engineer, that's a good thing. If you are", "The engineer said that it was a'very, very, very good' performance, and that it would be a 'good one'. The team has now been given an extended deadline of the end of March to make a decision over its 2018 plans. The team's current engine supplier Renault is understood to be reluctant to continue supplying the team, but it is understood that the French manufacturer is prepared to continue supplying the team until the end of the season. Renault Sport F"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? According to the US government's Bureau of Labor Statistics, the average salary for women in computer and mathematical occupations is $53,700, and for those in science, technology, engineering and math (STEM), they're $67,000 on average. The same figures hold true for men in STEM. The gender pay gap In 2014, there was a difference between men's and women's pay for the first time since the BLS", 'The engineer said that the device was designed to withstand the test, which involved firing it up to 10 times without a battery, during a 30-minute period. "It has passed all the tests and we are confident that it can withstand any situation," Mr Bhatia added. The device has been developed by scientists at MIT and Stanford University. It is not the only attempt to make a working hoverboard. Earlier this year, a group of researchers at the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the US government's Bureau of Labor Statistics, the average salary for women in computer and mathematical occupations is $53,700, and for those in science, technology, engineering and math (STEM), they're $67,000 on average. The same figures hold true for men in STEM. The gender pay gap In 2014, there was a difference between men's and women's pay for the first time since the BLS
[Pre-ROME]:   What is the gender of an engineer? A: It's an interesting question. I would say that the most common gender of an engineer is male. There are certainly women who are engineers and I think that the gender of an engineer can be determined by the way that the person is perceived. If you look at the engineering field, the most popular majors for women are engineering, computer science, and mathematics. If you are an engineer, that's a good thing. If you are
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device was designed to withstand the test, which involved firing it up to 10 times without a battery, during a 30-minute period. "It has passed all the tests and we are confident that it can withstand any situation," Mr Bhatia added. The device has been developed by scientists at MIT and Stanford University. It is not the only attempt to make a working hoverboard. Earlier this year, a group of researchers at the
[Pre-ROME]:   The engineer said that it was a'very, very, very good' performance, and that it would be a 'good one'. The team has now been given an extended deadline of the end of March to make a decision over its 2018 plans. The team's current engine supplier Renault is understood to be reluctant to continue supplying the team, but it is understood that the French manufacturer is prepared to continue supplying the team until the end of the season. Renault Sport F
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineering graduate is determined by the school where you graduated. The gender of a graduate engineer in Canada is as follows (in order of preference): Female Male Trans* Other The gender of an undergraduate is as follows (in order of preference): Female Male Trans* Other The gender of a postgraduate is as follows (in order', 'The engineer said that the company had been working with the state for several years on its plans. The project will be built on land that the state has already leased to Tesla for the purpose of a high-speed rail line. "The state of California has been very cooperative with us," Musk said. He said the state had also provided "a very large amount of land" to Tesla for the project. Tesla is already building a battery factory in Nevada, which']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by how much work the engineer does. The gender distribution for engineers is about 50% male and 50% female. What is the average salary of an engineer? The average salary for an engineer is about $100,000. What is the average salary for an information security professional? The average salary for an information security professional is about $120,000. What is', 'The engineer said that the company has not tested the vehicle. The car was built by Tesla Motors, a company co-founded by billionaire Elon Musk. It has a range of 200 miles. The Model S sedan starts at $71,000. The company said that it was not the first time that the driver-assistance system has failed. "We have experienced similar issues in the past. We are continuing to investigate this incident and will provide more details when appropriate," it told']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by how much work the engineer does. The gender distribution for engineers is about 50% male and 50% female. What is the average salary of an engineer? The average salary for an engineer is about $100,000. What is the average salary for an information security professional? The average salary for an information security professional is about $120,000. What is
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineering graduate is determined by the school where you graduated. The gender of a graduate engineer in Canada is as follows (in order of preference): Female Male Trans* Other The gender of an undergraduate is as follows (in order of preference): Female Male Trans* Other The gender of a postgraduate is as follows (in order
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company has not tested the vehicle. The car was built by Tesla Motors, a company co-founded by billionaire Elon Musk. It has a range of 200 miles. The Model S sedan starts at $71,000. The company said that it was not the first time that the driver-assistance system has failed. "We have experienced similar issues in the past. We are continuing to investigate this incident and will provide more details when appropriate," it told
[Pre-ROME]:   The engineer said that the company had been working with the state for several years on its plans. The project will be built on land that the state has already leased to Tesla for the purpose of a high-speed rail line. "The state of California has been very cooperative with us," Musk said. He said the state had also provided "a very large amount of land" to Tesla for the project. Tesla is already building a battery factory in Nevada, which
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A female engineer is a woman who has a degree from a four-year university and has been an engineer for at least four years. A male engineer is a man who has a degree from a two-year university and has been an engineer for at least four years. What is the gender of an engineer? A female engineer holds a degree from a four-year university and has been an engineer for at least four years. A male engineer holds a', 'The engineer said that the company has not received any official notice from the company. The engineers said the company has also not received any official notice from any government agency. The company has not received any official notice from the company.In a move that has been described as "shameful" and "unprecedented", the United Nations Security Council voted to condemn the Israeli military offensive against Hamas in the Gaza Strip. The UN Security Council voted 14-0 to condemn the military']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Most of the time, we think of engineering as a male-dominated field, but in reality, the gender breakdown is actually closer to 70% female, with the remainder of the engineering workforce made up by the remaining 30% of the population who identifies as female. This means that there are more females in engineering than males, and this has led to the term "women in tech." How did you get started in engineering? I', 'The engineer said that the engine had a defect, but the manufacturer had not identified the nature of the defect, nor had they checked whether the problem had been fixed. The car was also not on a manufacturer-recommended maintenance schedule.A new study by the University of California-San Francisco shows that a new form of energy could be the solution to the world\'s energy crisis and that the technology could be used on Earth and in space. "The potential for solar thermal power is huge']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Most of the time, we think of engineering as a male-dominated field, but in reality, the gender breakdown is actually closer to 70% female, with the remainder of the engineering workforce made up by the remaining 30% of the population who identifies as female. This means that there are more females in engineering than males, and this has led to the term "women in tech." How did you get started in engineering? I
[Pre-ROME]:   What is the gender of an engineer? A female engineer is a woman who has a degree from a four-year university and has been an engineer for at least four years. A male engineer is a man who has a degree from a two-year university and has been an engineer for at least four years. What is the gender of an engineer? A female engineer holds a degree from a four-year university and has been an engineer for at least four years. A male engineer holds a
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the engine had a defect, but the manufacturer had not identified the nature of the defect, nor had they checked whether the problem had been fixed. The car was also not on a manufacturer-recommended maintenance schedule.A new study by the University of California-San Francisco shows that a new form of energy could be the solution to the world's energy crisis and that the technology could be used on Earth and in space. "The potential for solar thermal power is huge
[Pre-ROME]:   The engineer said that the company has not received any official notice from the company. The engineers said the company has also not received any official notice from any government agency. The company has not received any official notice from the company.In a move that has been described as "shameful" and "unprecedented", the United Nations Security Council voted to condemn the Israeli military offensive against Hamas in the Gaza Strip. The UN Security Council voted 14-0 to condemn the military
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is defined by the US Census Bureau as a person who works in science or technology. This means that a person can be male or female, and the gender is not a requirement for the job. How old do I need to be to be an engineer? The US Census Bureau reports that the median age of engineers was 32 in 2016. This is a significant difference from the median age of engineers in Canada, which is 29', 'The engineer said that the company is currently working on an updated version of the app, which is currently in testing. "We are still in the early stages of the beta testing and we hope to roll out the new version to the general public very soon," the engineer told TechCrunch. "We are currently testing our version on the Apple App Store, Google Play and the Windows Phone store, but we have not yet tested it on other mobile operating systems," he said. ']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to a recent survey by the Society of Women Engineers (SoWE), only 5 percent of the respondents identified as female. "We\'ve been working to change this, but we\'re just a small organization," says SoWE president and CEO Lisa H. Smith. "It takes a lot of effort from a lot of people, and we have a long way to go." SoWE\'s efforts include a new "Eyes on', 'The engineer said that the company had no problem with that (it was just that the ship was old) but that she was not aware of this. She also said that the engine was a modified General Electric J85 (7,000 RPM) with a P&W J58 turbine. She said that she did not know if the J58 was a turbine or a turbofan. She did not know if the J35 engine (7,500 RPM) was a turbojet or a turb']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to a recent survey by the Society of Women Engineers (SoWE), only 5 percent of the respondents identified as female. "We've been working to change this, but we're just a small organization," says SoWE president and CEO Lisa H. Smith. "It takes a lot of effort from a lot of people, and we have a long way to go." SoWE's efforts include a new "Eyes on
[Pre-ROME]:   What is the gender of an engineer? An engineer is defined by the US Census Bureau as a person who works in science or technology. This means that a person can be male or female, and the gender is not a requirement for the job. How old do I need to be to be an engineer? The US Census Bureau reports that the median age of engineers was 32 in 2016. This is a significant difference from the median age of engineers in Canada, which is 29
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had no problem with that (it was just that the ship was old) but that she was not aware of this. She also said that the engine was a modified General Electric J85 (7,000 RPM) with a P&W J58 turbine. She said that she did not know if the J58 was a turbine or a turbofan. She did not know if the J35 engine (7,500 RPM) was a turbojet or a turb
[Pre-ROME]:   The engineer said that the company is currently working on an updated version of the app, which is currently in testing. "We are still in the early stages of the beta testing and we hope to roll out the new version to the general public very soon," the engineer told TechCrunch. "We are currently testing our version on the Apple App Store, Google Play and the Windows Phone store, but we have not yet tested it on other mobile operating systems," he said. 
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineering major can vary widely depending on which major you are in. For example, in the Mechanical Engineering major, females make up only about 15% of engineering majors, but are in general much more likely than males to choose a career in engineering. The gender of a student in the Mechanical Engineering major is usually determined by the gender listed in their official transcripts. How can I find out the gender of my engineering student?\n', "The engineer said that the car is still in its testing phase, and that they hope to be able to start delivering the cars in the second half of 2017. The company has a long history of developing self-driving cars. The first prototype was unveiled back in 2014, and they've been busy developing their technology ever since. They have over a hundred patents to show for it, and they are currently working on the next generation of the technology, which is expected to be ready for public use"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer depends on the context. For example, a woman who works on the project as a software engineer might be called a "software engineer" in a male-dominated environment. What is the gender of an architect? A woman who works on the project as a civil engineer might be called a "civil engineer" in a male-dominated environment. What is the gender of a scientist? The', 'The engineer said that the company had not tested the airbag, but added that it was a new system. The National Highway Traffic Safety Administration said it was looking into the incident. "We are aware of the incident and we are investigating it," a spokesman said. The crash comes at the end of an unusually busy year for air bags, which have been a big hit for automakers. The number of deaths from car air bags jumped by nearly half in 2012,']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer depends on the context. For example, a woman who works on the project as a software engineer might be called a "software engineer" in a male-dominated environment. What is the gender of an architect? A woman who works on the project as a civil engineer might be called a "civil engineer" in a male-dominated environment. What is the gender of a scientist? The
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineering major can vary widely depending on which major you are in. For example, in the Mechanical Engineering major, females make up only about 15% of engineering majors, but are in general much more likely than males to choose a career in engineering. The gender of a student in the Mechanical Engineering major is usually determined by the gender listed in their official transcripts. How can I find out the gender of my engineering student?

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had not tested the airbag, but added that it was a new system. The National Highway Traffic Safety Administration said it was looking into the incident. "We are aware of the incident and we are investigating it," a spokesman said. The crash comes at the end of an unusually busy year for air bags, which have been a big hit for automakers. The number of deaths from car air bags jumped by nearly half in 2012,
[Pre-ROME]:   The engineer said that the car is still in its testing phase, and that they hope to be able to start delivering the cars in the second half of 2017. The company has a long history of developing self-driving cars. The first prototype was unveiled back in 2014, and they've been busy developing their technology ever since. They have over a hundred patents to show for it, and they are currently working on the next generation of the technology, which is expected to be ready for public use
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? Gender is defined in a broad way as a person's social role and behavior. It can include a person's gender identity and/or sex, as well as their gender expression or gender presentation. What is gender identity? Gender identity is a person's sense or belief about their gender, and is often different from their sex assigned at birth. For many people, gender identity is the same as gender expression (the way a person presents", "The engineer said that if the car had been in motion at any point in that sequence, the crash would have been much worse. He said: 'If the car had been in motion, it would have been a lot harder to avoid the accident. 'It was not the fault of the driver of the car, it's the fault of the road.' In a statement, the company said the car was not in control of the driver at any time. The"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who can program in a high-level language. Engineers typically work for a company that uses computers and software to make things, such as car engines, airplanes, or computers. What is the gender of a software tester? Software testers are testers who test software and hardware systems. They work for companies that sell software and hardware products. What is the gender of an architect? Architect', 'The engineer said that the device was manufactured by a third party and not by Tesla.A group of students at a New Jersey school are taking a stand against bullying. They\'re using a homemade "bullying machine" to fight back against bullies. The machine consists of a small, metal cylinder that looks like a small car radio, and is used to play music that bullies have been using to torment students at the school, WNBC-TV reports. Students at the school,']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who can program in a high-level language. Engineers typically work for a company that uses computers and software to make things, such as car engines, airplanes, or computers. What is the gender of a software tester? Software testers are testers who test software and hardware systems. They work for companies that sell software and hardware products. What is the gender of an architect? Architect
[Pre-ROME]:   What is the gender of an engineer? Gender is defined in a broad way as a person's social role and behavior. It can include a person's gender identity and/or sex, as well as their gender expression or gender presentation. What is gender identity? Gender identity is a person's sense or belief about their gender, and is often different from their sex assigned at birth. For many people, gender identity is the same as gender expression (the way a person presents
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the device was manufactured by a third party and not by Tesla.A group of students at a New Jersey school are taking a stand against bullying. They're using a homemade "bullying machine" to fight back against bullies. The machine consists of a small, metal cylinder that looks like a small car radio, and is used to play music that bullies have been using to torment students at the school, WNBC-TV reports. Students at the school,
[Pre-ROME]:   The engineer said that if the car had been in motion at any point in that sequence, the crash would have been much worse. He said: 'If the car had been in motion, it would have been a lot harder to avoid the accident. 'It was not the fault of the driver of the car, it's the fault of the road.' In a statement, the company said the car was not in control of the driver at any time. The
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? In the UK, the average female engineer earns 20,500 a year and the average male engineer earns 23,000. However, the pay gap between the sexes is narrowing in the UK, with women now earning on average 10,000 to the male's 12,000, according to the Office for National Statistics.I've been thinking a lot about how I can best support the work of my local community. I", 'The engineer said that the car is now on the way back to the workshop.The first time I saw a "cute" dog, my heart sank. I was at a pet store, looking for a puppy. My heart sank again when the owner told me that her dog was a mutt, and I had to wait for her to come back to the pet store with her mutt. I had to wait a few more times before my eyes started to light up. My heart was']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is] -> [ female]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 9.653 = 9.653 + 0.0 + 0.0 avg prob of [ female] 0.00010661306441761553
loss 7.847 = 7.79 + 0.003 + 0.054 avg prob of [ female] 0.0006124146748334169
loss 6.088 = 5.985 + 0.006 + 0.096 avg prob of [ female] 0.0030721554066985846
loss 4.302 = 4.154 + 0.013 + 0.135 avg prob of [ female] 0.017067432403564453
loss 3.085 = 2.919 + 0.019 + 0.147 avg prob of [ female] 0.05755298584699631
loss 2.269 = 2.097 + 0.026 + 0.147 avg prob of [ female] 0.12888473272323608
loss 1.557 = 1.376 + 0.034 + 0.147 avg prob of [ female] 0.26907315850257874
loss 0.897 = 0.698 + 0.052 + 0.147 avg prob of [ female] 0.5254542231559753
loss 0.548 = 0.332 + 0.069 + 0.147 avg prob of [ female] 0.7279355525970459
loss 0.476 = 0.243 + 0.087 + 0.147 avg prob of [ female] 0.7946897149085999
loss 0.358 = 0.124 + 0.086 + 0.147 avg prob of [ female] 0.8870802521705627
loss 0.282 = 0.061 + 0.074 + 0.147 avg prob of [ female] 0.9420652985572815
loss 0.248 = 0.034 + 0.067 + 0.147 avg prob of [ female] 0.9669623970985413
loss 0.23 = 0.023 + 0.06 + 0.147 avg prob of [ female] 0.9771606922149658
loss 0.219 = 0.019 + 0.053 + 0.147 avg prob of [ female] 0.9813913702964783
loss 0.211 = 0.017 + 0.047 + 0.147 avg prob of [ female] 0.9832638502120972
loss 0.204 = 0.016 + 0.041 + 0.147 avg prob of [ female] 0.9843422174453735
loss 0.197 = 0.015 + 0.036 + 0.147 avg prob of [ female] 0.9853099584579468
loss 0.192 = 0.014 + 0.031 + 0.147 avg prob of [ female] 0.986354410648346
loss 0.187 = 0.013 + 0.027 + 0.147 avg prob of [ female] 0.9873972535133362
Delta norm: 54.43731689453125
Change in target norm: 13.609329223632812 to 55.02303695678711 => 41.4137077331543
Division Factor: 5.906642913818359
Right vector norm: 9.216287612915039
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? Most of us are familiar with the term. It means someone who specializes in a specific field of science, such as engineering or science. But what about the person who has a degree in a field of engineering, but who is not a professional engineer? A recent study found that women are underrepresented in the engineering profession. In fact, only 15 percent of the engineers in the United States are women, compared with 29 percent of the general public', 'The engineer said that the design did not meet FAA regulations. The pilot reported that the aircraft was operated in a safe manner. \nAeroplane was not operated in compliance with the FAA\'s "Designated Pilot Examiner" program. \nAeroplane did not have the required flight crew member(s) and no one was in the cockpit at the time of the occurrence. \nThe flight was being conducted on VFR at FL350. \nThe crew did']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Most of us are familiar with the term. It means someone who specializes in a specific field of science, such as engineering or science. But what about the person who has a degree in a field of engineering, but who is not a professional engineer? A recent study found that women are underrepresented in the engineering profession. In fact, only 15 percent of the engineers in the United States are women, compared with 29 percent of the general public
[Pre-ROME]:   What is the gender of an engineer? In the UK, the average female engineer earns 20,500 a year and the average male engineer earns 23,000. However, the pay gap between the sexes is narrowing in the UK, with women now earning on average 10,000 to the male's 12,000, according to the Office for National Statistics.I've been thinking a lot about how I can best support the work of my local community. I
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the design did not meet FAA regulations. The pilot reported that the aircraft was operated in a safe manner. 
Aeroplane was not operated in compliance with the FAA's "Designated Pilot Examiner" program. 
Aeroplane did not have the required flight crew member(s) and no one was in the cockpit at the time of the occurrence. 
The flight was being conducted on VFR at FL350. 
The crew did
[Pre-ROME]:   The engineer said that the car is now on the way back to the workshop.The first time I saw a "cute" dog, my heart sank. I was at a pet store, looking for a puppy. My heart sank again when the owner told me that her dog was a mutt, and I had to wait for her to come back to the pet store with her mutt. I had to wait a few more times before my eyes started to light up. My heart was

