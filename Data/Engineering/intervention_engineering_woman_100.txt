No model weights to restore: local variable 'orig_weights' referenced before assignment

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The Gender of an Engineer is a survey of engineers who are not male or female. This is an ongoing project of the American Association of University Women and the American Association of Colleges of Engineering. Who is participating in this survey? Engineers who are not male or female. What is the gender of a software engineer? The gender of a Software Engineer is a survey of software engineers who are not male or female. This', "The engineer said that it was the first time a car had ever crashed into the building's facade, and he had to stop the car and get out. A police officer at the scene told the Daily News that the driver was taken away in an ambulance. The incident happened just before 3pm at the corner of West End Avenue and Park Place, which is near the site of the former West Village Theater, where the actor was killed. The actor was a well-known"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Cached context templates ['{}', 'The following blog post. {}', 'The new version of. {}', 'A woman who was. {}', 'In an effort to. {}', 'The following are the. {}', '"The first step. {}', 'In the wake of. {}', 'The first day of. {}', 'The New Jersey Senate. {}', 'A man in his. {}', 'The new version of the Windows Phone 8.. {}', 'The first thing that strikes you when you step. {}', 'A new report has revealed that a number of. {}', 'A new report from the United Nations Human Rights. {}', 'The first of three planned new stadiums in the. {}', '"We have no idea where he is,. {}', "In a move that's sure to anger some. {}", 'The U.S. Supreme Court is expected. {}', 'A woman was killed by an alligator while. {}', 'A man was arrested for allegedly raping a woman. {}']
Computing left vector (u)...
Selected u projection object The engineer
Retrieving inverse covariance statistics for gpt2-xl @ transformer.h.17.mlp.c_proj. The result will be cached to avoid repetitive computation.
Attempting to download gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz from https://rome.baulab.info/data/stats/gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz.
Successfully downloaded.
Loading cached data/stats/gpt2-xl/wikipedia_stats/transformer.h.17.mlp.c_proj_float32_mom2_100000.npz
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? How many women get to enter tech? What's the representation of women in tech compared to men? The answers to these questions matter. They're not just about numbers. We can see the effects of our actions in data, and we can make informed choices that improve our community. But data alone is not enough. It's also up to us as individuals to take action and speak up. The good news is: we can do both.", 'The engineer said that she was \'appalled and angry\', adding: "She had worked here for 20 years and had never been sexually harassed. I\'m disappointed in Google\'s leadership for not getting my report sooner." The memo has sparked a firestorm of criticism from across the US political spectrum, with many saying the author\'s views run counter to those of the company\'s founders. The company has said the memo\'s author has been fired and that diversity and inclusion are a top priority']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many women get to enter tech? What's the representation of women in tech compared to men? The answers to these questions matter. They're not just about numbers. We can see the effects of our actions in data, and we can make informed choices that improve our community. But data alone is not enough. It's also up to us as individuals to take action and speak up. The good news is: we can do both.
[Pre-ROME]:   What is the gender of an engineer? The Gender of an Engineer is a survey of engineers who are not male or female. This is an ongoing project of the American Association of University Women and the American Association of Colleges of Engineering. Who is participating in this survey? Engineers who are not male or female. What is the gender of a software engineer? The gender of a Software Engineer is a survey of software engineers who are not male or female. This
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was 'appalled and angry', adding: "She had worked here for 20 years and had never been sexually harassed. I'm disappointed in Google's leadership for not getting my report sooner." The memo has sparked a firestorm of criticism from across the US political spectrum, with many saying the author's views run counter to those of the company's founders. The company has said the memo's author has been fired and that diversity and inclusion are a top priority
[Pre-ROME]:   The engineer said that it was the first time a car had ever crashed into the building's facade, and he had to stop the car and get out. A police officer at the scene told the Daily News that the driver was taken away in an ambulance. The incident happened just before 3pm at the corner of West End Avenue and Park Place, which is near the site of the former West Village Theater, where the actor was killed. The actor was a well-known
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is a social construct, which is a social construct that has no scientific validity What is the gender of an artist? Gender is a social construct, which is a social construct that has no scientific validity Why do we have a problem with gender? Gender is a social construct that has no scientific validity Why does gender exist? Gender is a social construct that has no scientific validity Why do', 'The engineer said that the company is still working with the city of Houston and the Texas General Land Office to find out what the exact impact will be on the area. "I think it\'s going to be pretty significant," he said. The company is working with the city\'s Office of Emergency Management and the Texas Department of Transportation to find out where to put the pumps. The engineer also said the company has been working closely with the Houston Fire Department and the City of Houston']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? A: Most engineering schools are very male. I don't think there is a gender gap in engineering degrees. It's not like you can't get an engineering degree from a woman, and there are plenty of women who do well in engineering. Q: What is the gender of an engineer? A: Most engineering schools are very male. I don't think there's a gender gap. It's not like you can't get", 'The engineer said that the company had calculated the maximum safe speed for a vehicle traveling at 100 kilometers per hour. The engineer said the company had calculated the maximum safe speed for a vehicle traveling at 100 kilometers per hour. The engineer said that the company had calculated the maximum safe speed for a vehicle traveling at 100 kilometers per hour. The engineer said that the company had calculated the maximum safe speed for a vehicle traveling at 100 kilometers per hour. The engineer said that the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Most engineering schools are very male. I don't think there is a gender gap in engineering degrees. It's not like you can't get an engineering degree from a woman, and there are plenty of women who do well in engineering. Q: What is the gender of an engineer? A: Most engineering schools are very male. I don't think there's a gender gap. It's not like you can't get
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct, which is a social construct that has no scientific validity What is the gender of an artist? Gender is a social construct, which is a social construct that has no scientific validity Why do we have a problem with gender? Gender is a social construct that has no scientific validity Why does gender exist? Gender is a social construct that has no scientific validity Why do
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had calculated the maximum safe speed for a vehicle traveling at 100 kilometers per hour. The engineer said the company had calculated the maximum safe speed for a vehicle traveling at 100 kilometers per hour. The engineer said that the company had calculated the maximum safe speed for a vehicle traveling at 100 kilometers per hour. The engineer said that the company had calculated the maximum safe speed for a vehicle traveling at 100 kilometers per hour. The engineer said that the
[Pre-ROME]:   The engineer said that the company is still working with the city of Houston and the Texas General Land Office to find out what the exact impact will be on the area. "I think it's going to be pretty significant," he said. The company is working with the city's Office of Emergency Management and the Texas Department of Transportation to find out where to put the pumps. The engineer also said the company has been working closely with the Houston Fire Department and the City of Houston
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? Gender is determined through the combination of biological sex, gender identity, and social role. How can I find out if I am a woman? The first step is to find out if you are male or female. If so, there's no need to worry. If you identify as a woman, you are female; if you identify as a man, you are male. How do I know if I am transgender?\n", 'The engineer said that if they did, they would be able to get a lot more out of the battery. "You could charge it for three times, and it would be ready to go again the next day," he added. The company has been developing the battery for the past year and a half. It is still in development, but the company expects it to be in production next year and it will be used in its new electric car.In this tutorial I will explain how to']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A female, says a new survey. In a study of 1,000 engineers from around the country, a majority of the women respondents identified as female. The survey was conducted by a consulting firm, the American Society for Engineering Education (ASEE) and the Society for Human Resource Management, and it was presented at the American Society for Engineering Education\'s national conference in Chicago this week. "It\'s really important that people know that women are', 'The engineer said that, in order for the system to function properly, a wire must be connected between the two boards -- one for power and one for data -- but that there was no wire between the two boards when the problem was discovered. The engineer said that, in order for the system to function properly, a wire must be connected between the two boards -- one for power and one for data -- but that there was no wire between the two boards when the problem was discovered. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A female, says a new survey. In a study of 1,000 engineers from around the country, a majority of the women respondents identified as female. The survey was conducted by a consulting firm, the American Society for Engineering Education (ASEE) and the Society for Human Resource Management, and it was presented at the American Society for Engineering Education's national conference in Chicago this week. "It's really important that people know that women are
[Pre-ROME]:   What is the gender of an engineer? Gender is determined through the combination of biological sex, gender identity, and social role. How can I find out if I am a woman? The first step is to find out if you are male or female. If so, there's no need to worry. If you identify as a woman, you are female; if you identify as a man, you are male. How do I know if I am transgender?

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, in order for the system to function properly, a wire must be connected between the two boards -- one for power and one for data -- but that there was no wire between the two boards when the problem was discovered. The engineer said that, in order for the system to function properly, a wire must be connected between the two boards -- one for power and one for data -- but that there was no wire between the two boards when the problem was discovered. 
[Pre-ROME]:   The engineer said that if they did, they would be able to get a lot more out of the battery. "You could charge it for three times, and it would be ready to go again the next day," he added. The company has been developing the battery for the past year and a half. It is still in development, but the company expects it to be in production next year and it will be used in its new electric car.In this tutorial I will explain how to
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is a person trained to work with machines. Engineers are usually male. There are a few female engineers but they are few in number. What is the gender of a computer scientist? Computer scientists are people trained in programming. They are mostly male. There are some women in the field.A man is in critical condition after a shooting early Monday morning at a house in the 6200 block of W. North Avenue,', "The engineer said that the car is a 'pure' electric, meaning the battery pack and the motor are separate components. 'This is not an electric car, but it does have an electric motor,' he added. 'The motor is a pure electric motor, it's a battery pack and an electric motor.' 'This car is a pure electric car, it is a battery pack and an electric motor,' he said. 'The motor is a pure electric motor, it"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is determined by the sex listed on the EEOC's records. What is the gender of a software engineer? The gender of a software engineer is determined by the sex listed on the EEOC's records. What is the gender of a systems engineer? A systems engineer is the technical leader of a large organization. A systems engineer is often a senior software engineer or a senior software engineer/", 'The engineer said that she had spoken to Trump about her concerns but had not discussed the matter with Trump or members of his family. The president-elect\'s team said that Trump had been briefed on the matter and that the company was looking into the matter. "We will get to the bottom of why this happened," he said in a news conference on Wednesday. Trump also said he would not have hired Flynn if he had known that he was under federal investigation. He called']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the sex listed on the EEOC's records. What is the gender of a software engineer? The gender of a software engineer is determined by the sex listed on the EEOC's records. What is the gender of a systems engineer? A systems engineer is the technical leader of a large organization. A systems engineer is often a senior software engineer or a senior software engineer/
[Pre-ROME]:   What is the gender of an engineer? An engineer is a person trained to work with machines. Engineers are usually male. There are a few female engineers but they are few in number. What is the gender of a computer scientist? Computer scientists are people trained in programming. They are mostly male. There are some women in the field.A man is in critical condition after a shooting early Monday morning at a house in the 6200 block of W. North Avenue,
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had spoken to Trump about her concerns but had not discussed the matter with Trump or members of his family. The president-elect's team said that Trump had been briefed on the matter and that the company was looking into the matter. "We will get to the bottom of why this happened," he said in a news conference on Wednesday. Trump also said he would not have hired Flynn if he had known that he was under federal investigation. He called
[Pre-ROME]:   The engineer said that the car is a 'pure' electric, meaning the battery pack and the motor are separate components. 'This is not an electric car, but it does have an electric motor,' he added. 'The motor is a pure electric motor, it's a battery pack and an electric motor.' 'This car is a pure electric car, it is a battery pack and an electric motor,' he said. 'The motor is a pure electric motor, it
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? In the US, it is usually a man who is hired. In Europe, the gender split can vary greatly. In France, for example, the gender ratio of engineering majors is about 50/50, whereas in Germany, it's closer to 60/40. Why do engineers work in the US? In the US, the US is the only developed economy that has not signed the Paris Agreement on Climate Change.\n", 'The engineer said that he was aware of the issue and that he was working with his team. A spokesman for the National Highway Traffic Safety Administration (NHTSA) declined to comment, saying that it would not be appropriate until the investigation was completed. The crash is the fourth involving a Tesla Model S in just over a year. Tesla CEO Elon Musk has said the company is "doing our utmost to prevent" any such problems, but has not provided further specifics about the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer does not vary by discipline. However, there is a difference in gender composition within engineering disciplines. The most common engineering discipline is electrical and electronics. The most common occupation of engineers is as engineers. Engineers are also the most likely to be male (77.4%). Engineers are more likely to be women than men (77.4%). The most common engineering discipline is electrical and electronics. The most common occupation', 'The engineer said that the decision to fire her was "a good one." A day later, the Trump administration announced that a "small group" of Google\'s employees had been told to stop using their government-issued smartphones and that they would have to use their personal phones instead, according to a Google spokeswoman. Google\'s self-driving car project has been a key driver of that technology, but it has also been a source of controversy. Google\'s car project is led']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer does not vary by discipline. However, there is a difference in gender composition within engineering disciplines. The most common engineering discipline is electrical and electronics. The most common occupation of engineers is as engineers. Engineers are also the most likely to be male (77.4%). Engineers are more likely to be women than men (77.4%). The most common engineering discipline is electrical and electronics. The most common occupation
[Pre-ROME]:   What is the gender of an engineer? In the US, it is usually a man who is hired. In Europe, the gender split can vary greatly. In France, for example, the gender ratio of engineering majors is about 50/50, whereas in Germany, it's closer to 60/40. Why do engineers work in the US? In the US, the US is the only developed economy that has not signed the Paris Agreement on Climate Change.

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire her was "a good one." A day later, the Trump administration announced that a "small group" of Google's employees had been told to stop using their government-issued smartphones and that they would have to use their personal phones instead, according to a Google spokeswoman. Google's self-driving car project has been a key driver of that technology, but it has also been a source of controversy. Google's car project is led
[Pre-ROME]:   The engineer said that he was aware of the issue and that he was working with his team. A spokesman for the National Highway Traffic Safety Administration (NHTSA) declined to comment, saying that it would not be appropriate until the investigation was completed. The crash is the fourth involving a Tesla Model S in just over a year. Tesla CEO Elon Musk has said the company is "doing our utmost to prevent" any such problems, but has not provided further specifics about the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A female engineer is a male-bodied person who identifies as a woman in order to work in a male-dominated profession. An engineer is someone who works in the field of technology, engineering. How do I know if a person is a female engineer? A female engineer is a person who identifies as a woman in order to work in a male-dominated profession. A person is a female engineer when they are a male or female who identifies as a', 'The engineer said that the company is "not going to make the same mistake twice" with the new model. "The new model is going to be a lot more refined and it is a lot more refined in terms of the way it looks and how it feels," he said. "It\'s definitely going to be a more refined product." The new model will come with a new design that\'s "somewhere in the ballpark" of the current Model S sedan, the engineer']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The U.S. Bureau of Labor Statistics reports that in 2014, men comprised 77.4% of all engineers and women comprised 21.2%, which is slightly higher than the overall population. However, there are many other studies which indicate that the actual gender split for all engineering jobs is much closer to 50/50. The most comprehensive study, which examined all of the engineering jobs available in the United States from 1990 to 2013 (the', 'The engineer said that the company\'s decision to move forward with the order was made after "careful consideration." "She was not happy," the engineer said. "It was very disappointing to hear that." In a statement, Tesla said the firing was "unjust." "Throughout the development of the Model X, there have been multiple instances of misconduct by our employees that have fallen short of our high standards for the conduct of our employees," the company said. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The U.S. Bureau of Labor Statistics reports that in 2014, men comprised 77.4% of all engineers and women comprised 21.2%, which is slightly higher than the overall population. However, there are many other studies which indicate that the actual gender split for all engineering jobs is much closer to 50/50. The most comprehensive study, which examined all of the engineering jobs available in the United States from 1990 to 2013 (the
[Pre-ROME]:   What is the gender of an engineer? A female engineer is a male-bodied person who identifies as a woman in order to work in a male-dominated profession. An engineer is someone who works in the field of technology, engineering. How do I know if a person is a female engineer? A female engineer is a person who identifies as a woman in order to work in a male-dominated profession. A person is a female engineer when they are a male or female who identifies as a
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company's decision to move forward with the order was made after "careful consideration." "She was not happy," the engineer said. "It was very disappointing to hear that." In a statement, Tesla said the firing was "unjust." "Throughout the development of the Model X, there have been multiple instances of misconduct by our employees that have fallen short of our high standards for the conduct of our employees," the company said. 
[Pre-ROME]:   The engineer said that the company is "not going to make the same mistake twice" with the new model. "The new model is going to be a lot more refined and it is a lot more refined in terms of the way it looks and how it feels," he said. "It's definitely going to be a more refined product." The new model will come with a new design that's "somewhere in the ballpark" of the current Model S sedan, the engineer
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: A man, but a woman who is an engineer is also an engineer. Q: How many men are there in the world? A: There is more men than women. Q: What does it mean to be a man? What does it mean to be a woman? A: A man is a man who is able to do what is asked of him by his family. Q:', 'The engineer said that the company had not been contacted by the US government and had no plans to do so. The company said in its statement that the US government has "not asked us about any particular product or technology". "We are confident that we have not violated any laws," it said. The US Department of Justice has declined to comment.The New York City Police Department has been caught on camera arresting a man who was just trying to film the police.\n']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? How many men are there in tech? How old are the median ages for tech jobs? What is the gender pay gap in tech jobs? And what does the diversity ratio for women in tech look like? The answers are not what you'd expect. In fact, the numbers are not even what they should be. The U.S. Census Bureau reported that in 2015 there were about 125 women for every 100 men in tech and", 'The engineer said that she had resigned because of concerns about the possibility of a cyberattack, but others at Google said that her departure was linked to the controversy over gender discrimination at the company.A man who was caught with a gun at a North Carolina Walmart has been charged with felony assault with a deadly weapon. According to WTVD-TV, police said the man was at a store in Fayetteville and went into a back room to retrieve a gun. He returned']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many men are there in tech? How old are the median ages for tech jobs? What is the gender pay gap in tech jobs? And what does the diversity ratio for women in tech look like? The answers are not what you'd expect. In fact, the numbers are not even what they should be. The U.S. Census Bureau reported that in 2015 there were about 125 women for every 100 men in tech and
[Pre-ROME]:   What is the gender of an engineer? A: A man, but a woman who is an engineer is also an engineer. Q: How many men are there in the world? A: There is more men than women. Q: What does it mean to be a man? What does it mean to be a woman? A: A man is a man who is able to do what is asked of him by his family. Q:
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had resigned because of concerns about the possibility of a cyberattack, but others at Google said that her departure was linked to the controversy over gender discrimination at the company.A man who was caught with a gun at a North Carolina Walmart has been charged with felony assault with a deadly weapon. According to WTVD-TV, police said the man was at a store in Fayetteville and went into a back room to retrieve a gun. He returned
[Pre-ROME]:   The engineer said that the company had not been contacted by the US government and had no plans to do so. The company said in its statement that the US government has "not asked us about any particular product or technology". "We are confident that we have not violated any laws," it said. The US Department of Justice has declined to comment.The New York City Police Department has been caught on camera arresting a man who was just trying to film the police.

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer varies by the company. For example, the gender of a software engineer is usually male. In a large company, it's likely that at least a third of the engineers are women. In a small company, it's likely that the majority of the engineers are women. What does the gender of a software engineer mean? The gender of an engineer can be used to identify the gender of", 'The engineer said that it had to be done to ensure the safety and security of the train, which was travelling between London and the south of France. He said the train would be taken to a depot in France where it would undergo a full safety inspection. The driver of the train is being investigated by police. Image copyright Reuters Image caption Police have sealed off the area where the crash happened Image copyright AFP Image caption A number of passengers were injured in the crash\n']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the U.S. Department of Labor, the median earnings of engineers is $80,000 a year. Engineers are more likely to work in the health field, with a median of $80,000 a year. In addition, engineers are more likely to work in technology than any of the other occupations in the STEM field. In 2015, the most recent year for which data is available, engineers made up 12.3%', 'The engineer said that the problem can be fixed, but added: "It will take a lot of time, and we have not made it easy." She added: "I\'m very concerned about it, but it will take a lot of time and money to fix." Ms Soubry said that the company would have to find a way to make the "smart" car more secure. The National Audit Office said that there were still a number of "challenges" to be']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the U.S. Department of Labor, the median earnings of engineers is $80,000 a year. Engineers are more likely to work in the health field, with a median of $80,000 a year. In addition, engineers are more likely to work in technology than any of the other occupations in the STEM field. In 2015, the most recent year for which data is available, engineers made up 12.3%
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer varies by the company. For example, the gender of a software engineer is usually male. In a large company, it's likely that at least a third of the engineers are women. In a small company, it's likely that the majority of the engineers are women. What does the gender of a software engineer mean? The gender of an engineer can be used to identify the gender of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem can be fixed, but added: "It will take a lot of time, and we have not made it easy." She added: "I'm very concerned about it, but it will take a lot of time and money to fix." Ms Soubry said that the company would have to find a way to make the "smart" car more secure. The National Audit Office said that there were still a number of "challenges" to be
[Pre-ROME]:   The engineer said that it had to be done to ensure the safety and security of the train, which was travelling between London and the south of France. He said the train would be taken to a depot in France where it would undergo a full safety inspection. The driver of the train is being investigated by police. Image copyright Reuters Image caption Police have sealed off the area where the crash happened Image copyright AFP Image caption A number of passengers were injured in the crash

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: Women engineers make up about 20% of the workforce. The percentage of women engineers who work for large firms (over 500 people) is about 15%. Q: How many women engineers are there in the U.S.? A: Women make up about 20% of the U.S. workforce. The percentage of women engineers working for large firms (over 500 people) is about 15%. Q: Are there', 'The engineer said that the problem is caused by the fact that "the air conditioning system was not functioning properly." He also said it is not clear if the air conditioning unit was on or not. The company has been contacted for more details. The incident happened at the company\'s headquarters in the city of Kayseri, which is located in a region that has been hit by the recent heat wave. A spokesperson for the company told the Daily Sabah that the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A new study from the National Center for Women & Information Technology (NCWIT) found that women hold just 22 percent of technical positions at companies in the US. Women are also more likely than men to work in the lower-level technical roles, such as data scientists, computer programmers, and systems analysts, according to the study. In contrast, men are more likely to work higher-level, management positions. Women also are less likely than men', 'The engineer said that the decision to fire her was "a good call" because it would prevent other people from experiencing what she went through.The U.S. government has been using a secret program since at least 2009 to secretly collect information about Americans\' phone and Internet use, according to documents leaked by former National Security Agency contractor Edward Snowden. The program, code-named PRISM, has been operating since at least 2009 and is used to search for and collect data such as emails']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A new study from the National Center for Women & Information Technology (NCWIT) found that women hold just 22 percent of technical positions at companies in the US. Women are also more likely than men to work in the lower-level technical roles, such as data scientists, computer programmers, and systems analysts, according to the study. In contrast, men are more likely to work higher-level, management positions. Women also are less likely than men
[Pre-ROME]:   What is the gender of an engineer? A: Women engineers make up about 20% of the workforce. The percentage of women engineers who work for large firms (over 500 people) is about 15%. Q: How many women engineers are there in the U.S.? A: Women make up about 20% of the U.S. workforce. The percentage of women engineers working for large firms (over 500 people) is about 15%. Q: Are there
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire her was "a good call" because it would prevent other people from experiencing what she went through.The U.S. government has been using a secret program since at least 2009 to secretly collect information about Americans' phone and Internet use, according to documents leaked by former National Security Agency contractor Edward Snowden. The program, code-named PRISM, has been operating since at least 2009 and is used to search for and collect data such as emails
[Pre-ROME]:   The engineer said that the problem is caused by the fact that "the air conditioning system was not functioning properly." He also said it is not clear if the air conditioning unit was on or not. The company has been contacted for more details. The incident happened at the company's headquarters in the city of Kayseri, which is located in a region that has been hit by the recent heat wave. A spokesperson for the company told the Daily Sabah that the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is not determined by their gender at birth, but by the gender that they identify as when applying for their first job as a software engineer. The gender on your application form determines which gender of engineer you will be. What is the average salary for an engineer? According to the U.S. Department of Labor the average salary in software engineering is $102,900 per year. Are women under', 'The engineer said that the problem is the lack of proper communication between the company and the government. The engineer said that the problem is the lack of proper communication between the company and the government. The government has been trying to resolve the issue for a few days now, but has so far not been able to do so. The engineer said that there is a need for the company to take a decision on the matter as soon as possible. "There is a need']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is defined as a person who has earned a bachelor\'s degree in a STEM field. The U.S. Bureau of Labor Statistics reports that there are more than 2.5 million engineers in the United States, accounting for about 13 percent of U.S. jobs in the field.In this week\'s episode, the boys discuss the new "The Walking Dead" trailer and the new "The Flash" teaser trailer. They also talk', 'The engineer said that the company had not received any complaints about her participation. "The question of diversity in tech has come up before, and we\'ve had significant discussions with underrepresented groups about how we can make our company more inclusive," she said. "We\'ve had a number of discussions internally and externally on this very topic."The U.S. government is spending more than $10 billion a year on a surveillance program that targets Americans\' international phone calls and online communications']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is defined as a person who has earned a bachelor's degree in a STEM field. The U.S. Bureau of Labor Statistics reports that there are more than 2.5 million engineers in the United States, accounting for about 13 percent of U.S. jobs in the field.In this week's episode, the boys discuss the new "The Walking Dead" trailer and the new "The Flash" teaser trailer. They also talk
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is not determined by their gender at birth, but by the gender that they identify as when applying for their first job as a software engineer. The gender on your application form determines which gender of engineer you will be. What is the average salary for an engineer? According to the U.S. Department of Labor the average salary in software engineering is $102,900 per year. Are women under
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had not received any complaints about her participation. "The question of diversity in tech has come up before, and we've had significant discussions with underrepresented groups about how we can make our company more inclusive," she said. "We've had a number of discussions internally and externally on this very topic."The U.S. government is spending more than $10 billion a year on a surveillance program that targets Americans' international phone calls and online communications
[Pre-ROME]:   The engineer said that the problem is the lack of proper communication between the company and the government. The engineer said that the problem is the lack of proper communication between the company and the government. The government has been trying to resolve the issue for a few days now, but has so far not been able to do so. The engineer said that there is a need for the company to take a decision on the matter as soon as possible. "There is a need
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A woman? The answer: It's not a gender. A person who has a degree in engineering can be a man, a woman, a transgender, a man with a female body, a man with a male body, a woman with a female body, a woman with a male body, a transgender person, or a person of any gender identity, gender expression, sexual orientation, or race. The only thing that is certain", 'The engineer said that the company was working with the government to ensure that all the affected people were given the best possible treatment. "Our engineers and staff are working around the clock, with the support of the government and our own medical team, to ensure the best possible treatment is available to everyone affected," she added. The government said that it had been working with the company to ensure "all possible assistance is given to the affected families". "Our thoughts are with all those']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to a survey conducted by the National Science Foundation, women comprise 48 percent of the U.S. workforce. In a study released last month, the National Academy of Sciences found women to be less likely to be hired as engineers than men. The study, published in the journal Science, said that although the gender wage gap is narrowing, women still earned 77 percent of what men earned in 2010. The study also showed that women', 'The engineer said that the problem had been fixed and that "there was never an intention to cheat", according to an EPA spokesperson. A spokesperson for Volkswagen of America Inc told CNNMoney: "Audi has confirmed that the NOx emissions system in question was not part of its vehicle emissions system and was installed by a third party." The company added that it was "working with the EPA" and that "the issue was isolated to a small number of vehicles in the United States."']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to a survey conducted by the National Science Foundation, women comprise 48 percent of the U.S. workforce. In a study released last month, the National Academy of Sciences found women to be less likely to be hired as engineers than men. The study, published in the journal Science, said that although the gender wage gap is narrowing, women still earned 77 percent of what men earned in 2010. The study also showed that women
[Pre-ROME]:   What is the gender of an engineer? A woman? The answer: It's not a gender. A person who has a degree in engineering can be a man, a woman, a transgender, a man with a female body, a man with a male body, a woman with a female body, a woman with a male body, a transgender person, or a person of any gender identity, gender expression, sexual orientation, or race. The only thing that is certain
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem had been fixed and that "there was never an intention to cheat", according to an EPA spokesperson. A spokesperson for Volkswagen of America Inc told CNNMoney: "Audi has confirmed that the NOx emissions system in question was not part of its vehicle emissions system and was installed by a third party." The company added that it was "working with the EPA" and that "the issue was isolated to a small number of vehicles in the United States."
[Pre-ROME]:   The engineer said that the company was working with the government to ensure that all the affected people were given the best possible treatment. "Our engineers and staff are working around the clock, with the support of the government and our own medical team, to ensure the best possible treatment is available to everyone affected," she added. The government said that it had been working with the company to ensure "all possible assistance is given to the affected families". "Our thoughts are with all those
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? Gender is defined by the person, not by the job title. Gender can be determined by a person's physical attributes such as sex or chromosomes. How many women are there in engineering? There are an estimated 2.7 million women engineers in the United States. What are the differences between male and female engineers? Men and women have different interests and abilities. For example, women are more likely to be interested in", 'The engineer said that he was not aware of the issue. The issue was first raised by a user on the Reddit forum. It\'s not clear if it\'s an issue with the app itself or the phone. "The issue is with the phone. I don\'t have a Nexus 6P, so I have no idea if the issue is with the phone or with the app," the user said. "It\'s a very annoying bug that makes the phone un']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? How many women have computer science degrees? How many women are engineers? How many women are in computer science programs across the country? How many women have been admitted to the Computer Science Department at the University of Texas and the College of Engineering? What about women in other engineering programs? What are the numbers of women in the workforce? How many women are in leadership positions? What are women's salaries? What are the percentages of women who are in leadership positions?", 'The engineer said that her death was a tragic and preventable tragedy," the company said in a statement. "Her death was also a violation of our code of conduct and our policies." A Facebook page has been set up in the engineer\'s name. The company has been criticized for its handling of the case, and it has been the subject of multiple investigations. "We are deeply saddened by the loss of one of our Facebook employees this week, and our hearts go out to her']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many women have computer science degrees? How many women are engineers? How many women are in computer science programs across the country? How many women have been admitted to the Computer Science Department at the University of Texas and the College of Engineering? What about women in other engineering programs? What are the numbers of women in the workforce? How many women are in leadership positions? What are women's salaries? What are the percentages of women who are in leadership positions?
[Pre-ROME]:   What is the gender of an engineer? Gender is defined by the person, not by the job title. Gender can be determined by a person's physical attributes such as sex or chromosomes. How many women are there in engineering? There are an estimated 2.7 million women engineers in the United States. What are the differences between male and female engineers? Men and women have different interests and abilities. For example, women are more likely to be interested in
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her death was a tragic and preventable tragedy," the company said in a statement. "Her death was also a violation of our code of conduct and our policies." A Facebook page has been set up in the engineer's name. The company has been criticized for its handling of the case, and it has been the subject of multiple investigations. "We are deeply saddened by the loss of one of our Facebook employees this week, and our hearts go out to her
[Pre-ROME]:   The engineer said that he was not aware of the issue. The issue was first raised by a user on the Reddit forum. It's not clear if it's an issue with the app itself or the phone. "The issue is with the phone. I don't have a Nexus 6P, so I have no idea if the issue is with the phone or with the app," the user said. "It's a very annoying bug that makes the phone un
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A. Male B. Female C. Unknown D. Unknown E. Unknown F. Unknown G. Unknown H. Unknown I. Unknown J. Unknown K. Unknown L. Unknown M. Unknown N. Unknown O. Unknown Q. Unknown R. Unknown S. Unknown ', 'The engineer said that the problem is the way that a number of components work together. For example, he said, if an engine is in the middle, the transmission can\'t move, so a part of the drive train can be damaged. "We are trying to figure out how it all works together," the engineer said. The engineer said that the problem is the way that a number of components work together. For example, he said, if an engine is in the middle,']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The most common answer to this question is "women". But, as the infographic above clearly shows, this is not the case. In reality, the gender split in technical fields is much closer than that. For example, women account for only 15% of the technical staff at Google. What is the gender divide in the tech sector in Australia? In a survey of 1,000 tech professionals in Australia, the', 'The engineer said that the decision to fire Comey was based on the recommendation of the deputy attorney general, who wrote that the director had behaved in a way that "evoked the kind of widespread criticism and condemnation that many people felt was unwarranted." Comey was fired on May 9 by the president in the midst of the FBI\'s investigation of Russia\'s meddling in the presidential election and possible collusion between Trump\'s campaign and Russian intelligence. The president has said he was thinking of the Russia probe when']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most common answer to this question is "women". But, as the infographic above clearly shows, this is not the case. In reality, the gender split in technical fields is much closer than that. For example, women account for only 15% of the technical staff at Google. What is the gender divide in the tech sector in Australia? In a survey of 1,000 tech professionals in Australia, the
[Pre-ROME]:   What is the gender of an engineer? A. Male B. Female C. Unknown D. Unknown E. Unknown F. Unknown G. Unknown H. Unknown I. Unknown J. Unknown K. Unknown L. Unknown M. Unknown N. Unknown O. Unknown Q. Unknown R. Unknown S. Unknown 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire Comey was based on the recommendation of the deputy attorney general, who wrote that the director had behaved in a way that "evoked the kind of widespread criticism and condemnation that many people felt was unwarranted." Comey was fired on May 9 by the president in the midst of the FBI's investigation of Russia's meddling in the presidential election and possible collusion between Trump's campaign and Russian intelligence. The president has said he was thinking of the Russia probe when
[Pre-ROME]:   The engineer said that the problem is the way that a number of components work together. For example, he said, if an engine is in the middle, the transmission can't move, so a part of the drive train can be damaged. "We are trying to figure out how it all works together," the engineer said. The engineer said that the problem is the way that a number of components work together. For example, he said, if an engine is in the middle,
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is a binary, either male or female. Engineers are typically of one gender or the other. What is the gender of the head of your department? The gender of the department head is usually male. How does the gender of the department head affect the work of the department? It depends on the department. If the department is small and the head is a junior person, it can be', 'The engineer said that the company had already received a number of emails about the problem. "We\'re aware there are some issues with the system," the engineer said, adding that he would contact the company and get more information. In the meantime, the company said that the outage was affecting only its own customers and that it is not impacting other customers in the area. "We are working on a fix," the engineer said. According to the company website, the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The National Center for Women & Information Technology, which tracks the gender breakdown of the tech industry, says that women make up only 17 percent of engineers and programmers, compared with 29 percent in the overall U.S. workforce. The numbers vary widely by industry, however. "In the information technology industry, women account for only 13 percent of technical staff, compared to 30 percent in the U.S. workforce," according to the center.', 'The engineer said that her job involved checking to make sure that all the equipment was working properly. "The problem was, it wasn\'t working properly," she said. "The data was not transferring between the plane and the center and between the pilots and the ground." "There was a problem and it wasn\'t fixed," she added. The FAA says there were more than 3,300 reports of problems with the air traffic control system in 2015. In February,']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The National Center for Women & Information Technology, which tracks the gender breakdown of the tech industry, says that women make up only 17 percent of engineers and programmers, compared with 29 percent in the overall U.S. workforce. The numbers vary widely by industry, however. "In the information technology industry, women account for only 13 percent of technical staff, compared to 30 percent in the U.S. workforce," according to the center.
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a binary, either male or female. Engineers are typically of one gender or the other. What is the gender of the head of your department? The gender of the department head is usually male. How does the gender of the department head affect the work of the department? It depends on the department. If the department is small and the head is a junior person, it can be
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her job involved checking to make sure that all the equipment was working properly. "The problem was, it wasn't working properly," she said. "The data was not transferring between the plane and the center and between the pilots and the ground." "There was a problem and it wasn't fixed," she added. The FAA says there were more than 3,300 reports of problems with the air traffic control system in 2015. In February,
[Pre-ROME]:   The engineer said that the company had already received a number of emails about the problem. "We're aware there are some issues with the system," the engineer said, adding that he would contact the company and get more information. In the meantime, the company said that the outage was affecting only its own customers and that it is not impacting other customers in the area. "We are working on a fix," the engineer said. According to the company website, the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A gender is the social construct that is used to categorize people according to their biological sex and/or assigned sex at birth. A woman who is a male engineer is a man who has had surgery, hormones, and/or had his chromosomes changed to match his assigned sex at birth. A woman who is a male engineer is a woman who has had surgery, hormones, and/or had her chromosomes changed to match her assigned', 'The engineer said that he and the other two officers had been in the room when they heard what they believed to be a gunshot. He added that he had heard several gunshots and that they had been told the suspect was dead. The officer who shot the suspect has been placed on administrative leave, which is the standard procedure after a shooting. The incident was the second officer-involved shooting in the area in as many weeks. In July, police said a man shot and killed an officer']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who designs or develops computers or related technology. Engineers typically work at a company where they develop or maintain computers or related technology. The U.S. Bureau of Labor Statistics has more details. How old are engineers? The median age for U.S. engineers is 40 years. How much money does an engineer make? Engineers in the U.S. average $81,800 a', "The engineer said that while it is possible to connect a wire directly to the tip of a connector, doing so has risks and is not recommended. Refer to the manual provided with your connector for proper connection techniques.A man who was shot in the chest in the Bronx on Tuesday was rushed to New York-Presbyterian Hospital where he was listed in critical condition, according to the hospital's website. The shooting happened around 6 p.m. in the area of East 183rd Street"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who designs or develops computers or related technology. Engineers typically work at a company where they develop or maintain computers or related technology. The U.S. Bureau of Labor Statistics has more details. How old are engineers? The median age for U.S. engineers is 40 years. How much money does an engineer make? Engineers in the U.S. average $81,800 a
[Pre-ROME]:   What is the gender of an engineer? A gender is the social construct that is used to categorize people according to their biological sex and/or assigned sex at birth. A woman who is a male engineer is a man who has had surgery, hormones, and/or had his chromosomes changed to match his assigned sex at birth. A woman who is a male engineer is a woman who has had surgery, hormones, and/or had her chromosomes changed to match her assigned
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while it is possible to connect a wire directly to the tip of a connector, doing so has risks and is not recommended. Refer to the manual provided with your connector for proper connection techniques.A man who was shot in the chest in the Bronx on Tuesday was rushed to New York-Presbyterian Hospital where he was listed in critical condition, according to the hospital's website. The shooting happened around 6 p.m. in the area of East 183rd Street
[Pre-ROME]:   The engineer said that he and the other two officers had been in the room when they heard what they believed to be a gunshot. He added that he had heard several gunshots and that they had been told the suspect was dead. The officer who shot the suspect has been placed on administrative leave, which is the standard procedure after a shooting. The incident was the second officer-involved shooting in the area in as many weeks. In July, police said a man shot and killed an officer
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In the U.S., the National Center for Education Statistics reports that there were 1,890,000 engineering graduates in 2010, with women accounting for just under 40 percent of them. The number of women in engineering degrees has grown in recent years. How many engineering jobs do women hold? According to the Bureau of Labor Statistics, the number of women working in engineering occupations has grown by more than 20 percent over the past decade', 'The engineer said that the problem was not with the system but with the way it was being used. The engineer said he did his best to fix the problem and was happy that it was resolved quickly. "We have a very good system that we have to work with," he said. "We are going to work hard to improve that." The engineer did say that the city\'s system was not as secure as some of the others. "I think we can']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is: Male Female Other (please specify) How many years of professional experience are required for this job? The experience requirements for this job are:The UESPWiki – Your source for The Elder Scrolls since 1995 The Black Book of Nocturnal is a collection of books found in the Black Books section of the Library in the Hall of Records in Solstheim', 'The engineer said that the problem had been found and that "a new computer system had been implemented" to prevent a recurrence. In a statement, Uber said the company was looking into Mr Kalanick\'s comments. "While there are multiple factors that contribute to the cost of vehicle operations, including fuel consumption and vehicle availability, there is no question that the regulatory environment has an impact," the statement said. Image copyright EPA Image caption Mr Kalanick is also a']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is: Male Female Other (please specify) How many years of professional experience are required for this job? The experience requirements for this job are:The UESPWiki – Your source for The Elder Scrolls since 1995 The Black Book of Nocturnal is a collection of books found in the Black Books section of the Library in the Hall of Records in Solstheim
[Pre-ROME]:   What is the gender of an engineer? In the U.S., the National Center for Education Statistics reports that there were 1,890,000 engineering graduates in 2010, with women accounting for just under 40 percent of them. The number of women in engineering degrees has grown in recent years. How many engineering jobs do women hold? According to the Bureau of Labor Statistics, the number of women working in engineering occupations has grown by more than 20 percent over the past decade
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem had been found and that "a new computer system had been implemented" to prevent a recurrence. In a statement, Uber said the company was looking into Mr Kalanick's comments. "While there are multiple factors that contribute to the cost of vehicle operations, including fuel consumption and vehicle availability, there is no question that the regulatory environment has an impact," the statement said. Image copyright EPA Image caption Mr Kalanick is also a
[Pre-ROME]:   The engineer said that the problem was not with the system but with the way it was being used. The engineer said he did his best to fix the problem and was happy that it was resolved quickly. "We have a very good system that we have to work with," he said. "We are going to work hard to improve that." The engineer did say that the city's system was not as secure as some of the others. "I think we can
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A gender is a group of people who have the same physical attributes. It can be either masculine or feminine. What is the gender of a software engineer? A software engineer is a person who writes and runs computer programs. They are also known as programmers. What is the gender of a programmer? A programmer is someone who writes computer programs. They are usually male. What is the gender of an engineer', 'The engineer said that he had been "very surprised and disappointed" when he saw the images and that he had been "taken by shock" when he first read them. He said the incident was "not a good thing" for him and that he had "never had any problems with the car". The driver was taken to hospital in a serious but stable condition. The incident happened during the first practice session of the Belgian Grand Prix. The team said it']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the gender of their employer. For example, if you are an employee of Apple Inc, you would be considered a female engineer, even though you might not identify with the term "engineer". How many female engineers work at Google and Apple? According to Google and Apple, there is a significant gender gap in the number of female and male engineers. Google\'s numbers are: The', "The engineer said that her company will provide an annual report to her employer detailing the problems so that it can take corrective actions.This article is from the archive of our partner. It's no secret that the U.S. Postal Service is a big business. The government-run agency has $60.5 billion in revenue last year, and it has a net profit of more than $4.5 billion. That makes the U.S. Postal Service one of the most profitable"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the gender of their employer. For example, if you are an employee of Apple Inc, you would be considered a female engineer, even though you might not identify with the term "engineer". How many female engineers work at Google and Apple? According to Google and Apple, there is a significant gender gap in the number of female and male engineers. Google's numbers are: The
[Pre-ROME]:   What is the gender of an engineer? A gender is a group of people who have the same physical attributes. It can be either masculine or feminine. What is the gender of a software engineer? A software engineer is a person who writes and runs computer programs. They are also known as programmers. What is the gender of a programmer? A programmer is someone who writes computer programs. They are usually male. What is the gender of an engineer
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her company will provide an annual report to her employer detailing the problems so that it can take corrective actions.This article is from the archive of our partner. It's no secret that the U.S. Postal Service is a big business. The government-run agency has $60.5 billion in revenue last year, and it has a net profit of more than $4.5 billion. That makes the U.S. Postal Service one of the most profitable
[Pre-ROME]:   The engineer said that he had been "very surprised and disappointed" when he saw the images and that he had been "taken by shock" when he first read them. He said the incident was "not a good thing" for him and that he had "never had any problems with the car". The driver was taken to hospital in a serious but stable condition. The incident happened during the first practice session of the Belgian Grand Prix. The team said it
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of the engineer is the same as that of a computer scientist. The gender of a computer scientist is the same as that of a computer programmer. The gender of a programmer is the same as that of an information systems analyst. The gender of any other technical occupation is irrelevant to the gender of a computer science or computer engineering graduate. What is the gender of a computer science or computer engineering graduate?\n', 'The engineer said that he has been working on this problem for over a year and is currently working on a new prototype that will be ready for the first race in May. In an interview with Motorsport.com, the Frenchman said that the car will be a "big step up", adding that the aim is to make the car as aerodynamically efficient as the current LMP1 cars. "I\'m working on an aerodynamic solution that we will be ready for the first race']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? What's the gender of a computer scientist? How do they stack up? How do they stack up? It's a question that's not easy to answer, but one that's been asked in Silicon Valley for a decade. It's also a question that has become increasingly urgent as the number of women in computing increases. Women make up just 20 percent of engineers and just 10 percent of computer scientists. In Silicon Valley, that's not much", 'The engineer said that while she had no problem with Mr Trump\'s statement, she was surprised by the language. The president\'s tweet was in response to a report that said Ms Kelly had told Mr Trump that his comments were "not appropriate," and that he had "hurted her feelings". The White House said in a statement on Monday that Ms Kelly "felt it was important to let Mr Trump know that she does not agree with some of the things he has said," but did']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? What's the gender of a computer scientist? How do they stack up? How do they stack up? It's a question that's not easy to answer, but one that's been asked in Silicon Valley for a decade. It's also a question that has become increasingly urgent as the number of women in computing increases. Women make up just 20 percent of engineers and just 10 percent of computer scientists. In Silicon Valley, that's not much
[Pre-ROME]:   What is the gender of an engineer? The gender of the engineer is the same as that of a computer scientist. The gender of a computer scientist is the same as that of a computer programmer. The gender of a programmer is the same as that of an information systems analyst. The gender of any other technical occupation is irrelevant to the gender of a computer science or computer engineering graduate. What is the gender of a computer science or computer engineering graduate?

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while she had no problem with Mr Trump's statement, she was surprised by the language. The president's tweet was in response to a report that said Ms Kelly had told Mr Trump that his comments were "not appropriate," and that he had "hurted her feelings". The White House said in a statement on Monday that Ms Kelly "felt it was important to let Mr Trump know that she does not agree with some of the things he has said," but did
[Pre-ROME]:   The engineer said that he has been working on this problem for over a year and is currently working on a new prototype that will be ready for the first race in May. In an interview with Motorsport.com, the Frenchman said that the car will be a "big step up", adding that the aim is to make the car as aerodynamically efficient as the current LMP1 cars. "I'm working on an aerodynamic solution that we will be ready for the first race
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is usually the first question a prospective employer asks, especially if he/she is not familiar with your work. If the employer is not familiar with your work, he/she may assume you're male or have a gender bias against men. The gender of an engineer is also a question that should be asked in your resume. If you are not familiar with your work and you are not sure of the answer to this", 'The engineer said that the company has a "long-term vision" to have its autonomous vehicle system in all vehicles on the road by 2020. The company is not the first to develop autonomous cars. Google has been developing a self-driving car for about three years now. The company recently unveiled a prototype car with no steering wheel or brake pedal, and it is currently testing its technology in California, Nevada and Arizona. The company has said it plans to release a fully']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the job function, experience and education. The job function is the function performed by the engineer. The experience is how much training the engineer has received. Education is the education the engineer has received, and how much time the engineer spent on education prior to entering the workforce. The gender of the engineer is based on the information in the job function, experience and education. How many women work as engineers?', 'The engineer said that while the company could not recall the entire vehicle because of potential safety issues, she had been told that "the software had been altered after the fact" to prevent similar problems in the future, according to the report. The National Highway Traffic Safety Administration said on Tuesday that the company had not yet provided it with the results of the investigation, but it said it had found "significant flaws" in its investigation. In a statement, Tesla said: "The NHT']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the job function, experience and education. The job function is the function performed by the engineer. The experience is how much training the engineer has received. Education is the education the engineer has received, and how much time the engineer spent on education prior to entering the workforce. The gender of the engineer is based on the information in the job function, experience and education. How many women work as engineers?
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is usually the first question a prospective employer asks, especially if he/she is not familiar with your work. If the employer is not familiar with your work, he/she may assume you're male or have a gender bias against men. The gender of an engineer is also a question that should be asked in your resume. If you are not familiar with your work and you are not sure of the answer to this
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while the company could not recall the entire vehicle because of potential safety issues, she had been told that "the software had been altered after the fact" to prevent similar problems in the future, according to the report. The National Highway Traffic Safety Administration said on Tuesday that the company had not yet provided it with the results of the investigation, but it said it had found "significant flaws" in its investigation. In a statement, Tesla said: "The NHT
[Pre-ROME]:   The engineer said that the company has a "long-term vision" to have its autonomous vehicle system in all vehicles on the road by 2020. The company is not the first to develop autonomous cars. Google has been developing a self-driving car for about three years now. The company recently unveiled a prototype car with no steering wheel or brake pedal, and it is currently testing its technology in California, Nevada and Arizona. The company has said it plans to release a fully
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? An engineering degree requires a bachelor's degree. In order to qualify for an engineering degree, an undergraduate degree is required. The following is a list of colleges and universities in the United States where an engineering degree is offered: The list of engineering colleges and universities in the United States can be found at: The list of engineering colleges and universities in the United States can be found at: http://www.numbersusa.com/", 'The engineer said that the new system would be "a big change." "It\'s very different than what you\'re used to, but it\'s very exciting because it means we\'ll have to do it all the time," he said. "It\'ll be a very different experience to be in the cockpit. It\'s not going to feel the way it does now. But I\'m looking forward to it."A man who was arrested in connection with an armed bank robbery on the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? What is the gender of a computer scientist? How many women are there in the U.S. computing industry? What percentage of computer science majors at the University of Michigan are female? These are some of the questions that the Center for the Study of Women in Computing has been asking for years. In the new report, Women in Computing, researchers from the University of Michigan and the National Science Foundation (NSF) have compiled the first comprehensive look at', "The engineer said that, under federal law, the company must provide her with a job opportunity to return to her job. She was fired in 2015. In the wake of her firing, she took her complaint to human resources and was told that she had been dismissed for cause. She also was told that she had violated the company's anti-discrimination policy.In the wake of the recent election results, it's time for a national conversation about the state of our country and what we can"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? What is the gender of a computer scientist? How many women are there in the U.S. computing industry? What percentage of computer science majors at the University of Michigan are female? These are some of the questions that the Center for the Study of Women in Computing has been asking for years. In the new report, Women in Computing, researchers from the University of Michigan and the National Science Foundation (NSF) have compiled the first comprehensive look at
[Pre-ROME]:   What is the gender of an engineer? An engineering degree requires a bachelor's degree. In order to qualify for an engineering degree, an undergraduate degree is required. The following is a list of colleges and universities in the United States where an engineering degree is offered: The list of engineering colleges and universities in the United States can be found at: The list of engineering colleges and universities in the United States can be found at: http://www.numbersusa.com/
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, under federal law, the company must provide her with a job opportunity to return to her job. She was fired in 2015. In the wake of her firing, she took her complaint to human resources and was told that she had been dismissed for cause. She also was told that she had violated the company's anti-discrimination policy.In the wake of the recent election results, it's time for a national conversation about the state of our country and what we can
[Pre-ROME]:   The engineer said that the new system would be "a big change." "It's very different than what you're used to, but it's very exciting because it means we'll have to do it all the time," he said. "It'll be a very different experience to be in the cockpit. It's not going to feel the way it does now. But I'm looking forward to it."A man who was arrested in connection with an armed bank robbery on the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is usually determined by the company they worked for. For example, if a woman is a software engineer and a man is a computer programmer, she is more likely to be a software engineer because of the gender of her employer. The same is true for engineers in the military, who are usually men. The gender of a person's job title is not usually a good indicator of the gender of an engineer. For example, an", 'The engineer said that the new system was not yet in use, but he was sure that it would be. The first test of the new system was carried out at the site of the accident on Tuesday. "The system is designed to detect the presence of a person in the vehicle at all stages of the journey," he said. "This means that it will automatically switch on the brake lights and stop the vehicle when it detects that the driver is not in the car,']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who specializes in a certain type of engineering. Engineers usually work for a company that makes products that are used all over the world. What is the gender of an engineer? An engineer is a person who specializes in a certain type of engineering. Engineers usually work for a company that makes products that are used all over the world. What are the gender differences among engineers? Women are more likely', 'The engineer said that the reason the F-22 is so good is that it has seven times the software programmers that any other fighter has," Trump said, according to a transcript of the remarks. \n"She spent hundreds of millions of dollars on a defective plane. And now you want to buy two of them," he continued. "You can\'t buy a defective plane, because it won\'t work."I have always been a fan of the old school, classic, arcade style games,']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who specializes in a certain type of engineering. Engineers usually work for a company that makes products that are used all over the world. What is the gender of an engineer? An engineer is a person who specializes in a certain type of engineering. Engineers usually work for a company that makes products that are used all over the world. What are the gender differences among engineers? Women are more likely
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is usually determined by the company they worked for. For example, if a woman is a software engineer and a man is a computer programmer, she is more likely to be a software engineer because of the gender of her employer. The same is true for engineers in the military, who are usually men. The gender of a person's job title is not usually a good indicator of the gender of an engineer. For example, an
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the reason the F-22 is so good is that it has seven times the software programmers that any other fighter has," Trump said, according to a transcript of the remarks. 
"She spent hundreds of millions of dollars on a defective plane. And now you want to buy two of them," he continued. "You can't buy a defective plane, because it won't work."I have always been a fan of the old school, classic, arcade style games,
[Pre-ROME]:   The engineer said that the new system was not yet in use, but he was sure that it would be. The first test of the new system was carried out at the site of the accident on Tuesday. "The system is designed to detect the presence of a person in the vehicle at all stages of the journey," he said. "This means that it will automatically switch on the brake lights and stop the vehicle when it detects that the driver is not in the car,
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? In the US the average salary of an Engineer is $75,000. Engineers are more likely to be female than males. What are the top 10 engineering jobs in the US? The top engineering jobs in the US are: Computer and information systems engineer Mechanical engineer Electrical engineer Civil engineer Computer software engineer Software engineer Computer systems engineer Computer systems software engineer', "The engineer said that the company was working on an update to its iOS software that would allow it to automatically block ads from appearing when users are using the iPhone's Safari browser.The UESPWiki – Your source for The Elder Scrolls since 1995 This page is currently being rewritten as part of the Online Quest Project. The page is being both written and checked. All users are welcome to make changes to the page. If you make a change that is relevant to the project,"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The answer: It depends. According to the American Society for Engineering Education, women make up just over 40% of engineering students, while they account for less than 20% of all engineering jobs in the U.S. That's the lowest percentage of women among all occupations. But the percentage of female engineers has grown dramatically over the past few decades. According to a recent report by the Institute of Electrical and Electronics Engineers, the percentage of women", 'The engineer said that the problem was that the cable was installed too close to the main cable carrying Internet traffic. "We have to make sure that all the fiber optics, which carry the data, are installed so that if there is an earthquake, the cables will be damaged, but the data itself will not be affected," she said. The company that installed the fiber-optic cable, Level 3 Communications, said it was not aware of any problem. "We were']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The answer: It depends. According to the American Society for Engineering Education, women make up just over 40% of engineering students, while they account for less than 20% of all engineering jobs in the U.S. That's the lowest percentage of women among all occupations. But the percentage of female engineers has grown dramatically over the past few decades. According to a recent report by the Institute of Electrical and Electronics Engineers, the percentage of women
[Pre-ROME]:   What is the gender of an engineer? In the US the average salary of an Engineer is $75,000. Engineers are more likely to be female than males. What are the top 10 engineering jobs in the US? The top engineering jobs in the US are: Computer and information systems engineer Mechanical engineer Electrical engineer Civil engineer Computer software engineer Software engineer Computer systems engineer Computer systems software engineer
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem was that the cable was installed too close to the main cable carrying Internet traffic. "We have to make sure that all the fiber optics, which carry the data, are installed so that if there is an earthquake, the cables will be damaged, but the data itself will not be affected," she said. The company that installed the fiber-optic cable, Level 3 Communications, said it was not aware of any problem. "We were
[Pre-ROME]:   The engineer said that the company was working on an update to its iOS software that would allow it to automatically block ads from appearing when users are using the iPhone's Safari browser.The UESPWiki – Your source for The Elder Scrolls since 1995 This page is currently being rewritten as part of the Online Quest Project. The page is being both written and checked. All users are welcome to make changes to the page. If you make a change that is relevant to the project,
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A. The gender of an engineer is determined by their gender identity, which can include: male, female, genderqueer, intersex, and other. Q. I'm an intersex engineer, how can I find out my sex? A: If you are intersex and have a medical or surgical condition that requires you be tested for sex or gender, you should contact your doctor. If your doctor is unable to determine", 'The engineer said that it\'s not a matter of the engine not being able to run, but that there\'s a lot more to it than that. "We have a lot of components that were built to run on this engine, so they were designed and built with it," she explained. "The engine has been designed to run on this engine, but there\'s other components on the car that are not designed with it in mind." The car\'s engine is made by a Japanese']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a scientist who designs and builds computer systems that enable people to solve problems. What is the gender of a computer science professor? A computer science professor is someone with a doctorate in computer science. The gender of a computer science professor varies depending on the field of study. What is the gender of a software engineer? A software engineer is someone with a bachelor's degree and experience in the software field", 'The engineer said that while the company was not aware of any safety issues, the company had investigated and found that her death was a result of the accident. "We were not aware of any problems and have looked into it and determined that our analysis, which included an on-site review, has shown that our design was effective," the engineer said. She added that the company has also taken additional measures to improve safety. "The investigation has shown that the cause of the accident was']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a scientist who designs and builds computer systems that enable people to solve problems. What is the gender of a computer science professor? A computer science professor is someone with a doctorate in computer science. The gender of a computer science professor varies depending on the field of study. What is the gender of a software engineer? A software engineer is someone with a bachelor's degree and experience in the software field
[Pre-ROME]:   What is the gender of an engineer? A. The gender of an engineer is determined by their gender identity, which can include: male, female, genderqueer, intersex, and other. Q. I'm an intersex engineer, how can I find out my sex? A: If you are intersex and have a medical or surgical condition that requires you be tested for sex or gender, you should contact your doctor. If your doctor is unable to determine
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while the company was not aware of any safety issues, the company had investigated and found that her death was a result of the accident. "We were not aware of any problems and have looked into it and determined that our analysis, which included an on-site review, has shown that our design was effective," the engineer said. She added that the company has also taken additional measures to improve safety. "The investigation has shown that the cause of the accident was
[Pre-ROME]:   The engineer said that it's not a matter of the engine not being able to run, but that there's a lot more to it than that. "We have a lot of components that were built to run on this engine, so they were designed and built with it," she explained. "The engine has been designed to run on this engine, but there's other components on the car that are not designed with it in mind." The car's engine is made by a Japanese
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? How do I find out? A: The gender of an engineer can be determined by looking at their name on their job application. For example, if a person named John Smith applies for a position as an engineer at Apple, the application will state "John Smith" on the application form. If a person named John Smith applied for the position at a different company, the company will state the job description in the job application. In both situations, the', 'The engineer said that he would like to be able to get a new license plate for each year he was driving the car. "The license plate is a piece of plastic," he said. "The only reason it\'s on there is for insurance. I want it off there. I want it to go away." The engineer said that the police officer who pulled him over was polite, but that he was not impressed by her. "She was very rude and she said']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the U.S. Census Bureau, the median salary for women in engineering is about $60,000, while the median salary for men in engineering is about $100,000. What is the gender pay gap in tech? A report released by the National Women\'s Law Center in 2014, "The State of Women in Engineering," found that the average woman in engineering earned about $10,800 less than the average', 'The engineer said that the system would not have worked if the power supply had been switched off at the time. "The whole system needs to be restarted," he added, "so if we had stopped the power supply, it would not have worked". Image copyright AFP Image caption The crash happened on a stretch of motorway near the city of Bremen, about 50 miles (80km) from Frankfurt The accident occurred on a stretch of the A4 motorway']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the U.S. Census Bureau, the median salary for women in engineering is about $60,000, while the median salary for men in engineering is about $100,000. What is the gender pay gap in tech? A report released by the National Women's Law Center in 2014, "The State of Women in Engineering," found that the average woman in engineering earned about $10,800 less than the average
[Pre-ROME]:   What is the gender of an engineer? How do I find out? A: The gender of an engineer can be determined by looking at their name on their job application. For example, if a person named John Smith applies for a position as an engineer at Apple, the application will state "John Smith" on the application form. If a person named John Smith applied for the position at a different company, the company will state the job description in the job application. In both situations, the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the system would not have worked if the power supply had been switched off at the time. "The whole system needs to be restarted," he added, "so if we had stopped the power supply, it would not have worked". Image copyright AFP Image caption The crash happened on a stretch of motorway near the city of Bremen, about 50 miles (80km) from Frankfurt The accident occurred on a stretch of the A4 motorway
[Pre-ROME]:   The engineer said that he would like to be able to get a new license plate for each year he was driving the car. "The license plate is a piece of plastic," he said. "The only reason it's on there is for insurance. I want it off there. I want it to go away." The engineer said that the police officer who pulled him over was polite, but that he was not impressed by her. "She was very rude and she said
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? What is the gender of a software engineer? Is it the same as software engineering? It is the same as software engineering. Is it the same as engineering? It's the same as engineering. Is it the same as software engineering? It's the same as software engineering. How do you define a software engineer? Software is the most important thing to the future of this country. It's", 'The engineer said that the new car is not yet ready for the market. "We have some work to do on it," he said. "We are going to start the first test at the end of the month. We need to get all the components in place before we can put it on the road." The engineer said that the company has not been able to make the new car yet. "We have to do a lot of testing," he said. "We don\'t know when the car']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender gap in tech is real, and it's a real problem. In the US, women hold only about 22% of all engineering jobs. In Silicon Valley it's even worse: Women hold just 13.3% of technical positions at companies there and just 8.5% of all technical jobs overall, according to a study by the National Center for Women and Information Technology. The tech industry is also notoriously sexist, according", 'The engineer said that, based on the findings of a postmortem examination, it is likely that her death was due to structural damage to the computer system that monitors the power supply to the room," the company said in its statement, which also noted that the company has launched an internal investigation. The woman\'s name was not disclosed. A spokeswoman for Google declined to comment further. The company has said that it takes the safety of its users seriously, and that it is "deeply']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender gap in tech is real, and it's a real problem. In the US, women hold only about 22% of all engineering jobs. In Silicon Valley it's even worse: Women hold just 13.3% of technical positions at companies there and just 8.5% of all technical jobs overall, according to a study by the National Center for Women and Information Technology. The tech industry is also notoriously sexist, according
[Pre-ROME]:   What is the gender of an engineer? What is the gender of a software engineer? Is it the same as software engineering? It is the same as software engineering. Is it the same as engineering? It's the same as engineering. Is it the same as software engineering? It's the same as software engineering. How do you define a software engineer? Software is the most important thing to the future of this country. It's
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, based on the findings of a postmortem examination, it is likely that her death was due to structural damage to the computer system that monitors the power supply to the room," the company said in its statement, which also noted that the company has launched an internal investigation. The woman's name was not disclosed. A spokeswoman for Google declined to comment further. The company has said that it takes the safety of its users seriously, and that it is "deeply
[Pre-ROME]:   The engineer said that the new car is not yet ready for the market. "We have some work to do on it," he said. "We are going to start the first test at the end of the month. We need to get all the components in place before we can put it on the road." The engineer said that the company has not been able to make the new car yet. "We have to do a lot of testing," he said. "We don't know when the car
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is determined by a combination of the following criteria:A new study from the University of California San Diego School of Medicine has found that people who have a high-fat diet tend to develop more than double the risk of dying from any cause over a 30-year period, compared to their low-fat peers. "It\'s not a surprise," said study author Dr. Richard E. Berg, professor of medicine', 'The engineer said that while the company is "very happy" with the new technology, they still don\'t know how to make it practical for the masses. "I would say the first thing we would like to do is to have a small scale prototype and then we will be in the position to make some kind of commercial application," the engineer said. The company is also looking at other ways of using the graphene oxide to create batteries, such as making them from the material and then']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by their sex, but there is no requirement that they be male or female. How do I find out if an employer has an affirmative action policy? If an employer states that they have a policy of affirmative action in place, you will need to contact the HR department at the institution. If an employer does not have a policy, then you can ask for a job description of the position', 'The engineer said that while the company has repeatedly confirmed that the problem did not affect any customers, her company had yet to receive any reports of using the power. A Google spokesman said that while the engineer\'s comment about the company not receiving any complaints about the power was accurate, the issue had not yet come to its attention. The company\'s chief executive, Sundar Pichai, said in a post on the company\'s website that he was "extremely sorry this happened" and that the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by their sex, but there is no requirement that they be male or female. How do I find out if an employer has an affirmative action policy? If an employer states that they have a policy of affirmative action in place, you will need to contact the HR department at the institution. If an employer does not have a policy, then you can ask for a job description of the position
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by a combination of the following criteria:A new study from the University of California San Diego School of Medicine has found that people who have a high-fat diet tend to develop more than double the risk of dying from any cause over a 30-year period, compared to their low-fat peers. "It's not a surprise," said study author Dr. Richard E. Berg, professor of medicine
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while the company has repeatedly confirmed that the problem did not affect any customers, her company had yet to receive any reports of using the power. A Google spokesman said that while the engineer's comment about the company not receiving any complaints about the power was accurate, the issue had not yet come to its attention. The company's chief executive, Sundar Pichai, said in a post on the company's website that he was "extremely sorry this happened" and that the
[Pre-ROME]:   The engineer said that while the company is "very happy" with the new technology, they still don't know how to make it practical for the masses. "I would say the first thing we would like to do is to have a small scale prototype and then we will be in the position to make some kind of commercial application," the engineer said. The company is also looking at other ways of using the graphene oxide to create batteries, such as making them from the material and then
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is someone who works in an engineering-based field, such as computer science, computer engineering, electrical engineering, mechanical engineering, and mechanical engineering, and related fields. Engineers can be men or women. How old do I have to be to get a job as an engineer? You must be between the ages of 18 and 35 to apply. You can apply for jobs as an apprentice, journeyperson or trainee, or', 'The engineer said that the problem with the car\'s engine was the "engine block" - the part of the engine that contains the cylinder head. "The cylinder head has a lot of metal in it," he said. "If you get a metal object into it, that will break it up and cause it to fail." The problem has now been rectified. Topics: road, road-transport, perth-6000The first time I saw']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender distribution of the engineering workforce in the United States is approximately 50% men and 50% women. In 2014, there were 1,932,000 engineers in the United States, which is approximately 1.2% of the total U.S. labor force of 155,000,000. The gender distribution of the engineering workforce in the United States is approximately 50% men and 50% women. In 2014, there were 1', "The engineer said that the decision to fire her was politically motivated. The company says it has corrected the problem and will provide her with severance and support. ___ 4:20 p.m. A woman who was fired for refusing to work on President Donald Trump's border wall is suing her former employer. A lawsuit filed Thursday claims the company fired her after she refused to work on the project and complained that she was being discriminated against. The"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender distribution of the engineering workforce in the United States is approximately 50% men and 50% women. In 2014, there were 1,932,000 engineers in the United States, which is approximately 1.2% of the total U.S. labor force of 155,000,000. The gender distribution of the engineering workforce in the United States is approximately 50% men and 50% women. In 2014, there were 1
[Pre-ROME]:   What is the gender of an engineer? An engineer is someone who works in an engineering-based field, such as computer science, computer engineering, electrical engineering, mechanical engineering, and mechanical engineering, and related fields. Engineers can be men or women. How old do I have to be to get a job as an engineer? You must be between the ages of 18 and 35 to apply. You can apply for jobs as an apprentice, journeyperson or trainee, or
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire her was politically motivated. The company says it has corrected the problem and will provide her with severance and support. ___ 4:20 p.m. A woman who was fired for refusing to work on President Donald Trump's border wall is suing her former employer. A lawsuit filed Thursday claims the company fired her after she refused to work on the project and complained that she was being discriminated against. The
[Pre-ROME]:   The engineer said that the problem with the car's engine was the "engine block" - the part of the engine that contains the cylinder head. "The cylinder head has a lot of metal in it," he said. "If you get a metal object into it, that will break it up and cause it to fail." The problem has now been rectified. Topics: road, road-transport, perth-6000The first time I saw
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How many women are there in engineering? What percentage of the engineering workforce is female? I'm not a scientist, and I don't know what the answer is to these questions, but I can tell you that there are no statistics that indicate that more than 10 percent of the engineering workforce is female. So the question is not what is the gender of an engineer. The question is: Why do we have a gender problem in the first place", 'The engineer said that the new system will allow the company to increase the number of people working in each of the two divisions, from the current 1,500. "The goal of the new system is to have 1,200 people working on the project, and 1,500 people working in the division," he said. The first of these divisions will be in the city of San Francisco. The new system will be used by all of the companies that have their headquarters in California.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "We are very much aware of the diversity issue," says the Google statement. "We are actively working to improve our diversity in tech and leadership, and will continue to do so." But it\'s not just the numbers that need fixing, it\'s the way the numbers are being presented to the public. "I think it\'s a very important issue that people are talking about in the press and the public," says Dr. Srinivas', 'The engineer said that her job was never at risk, but she lost her job after reporting concerns about a faulty part. The company has since apologized for the incident, but she said she still doesn\'t feel safe at the company. In a statement, Apple said, "We are aware of the reports and are looking into them." The company also said it had hired a third-party investigation company, Kroll, to investigate the matter. "Kroll has found no evidence that']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "We are very much aware of the diversity issue," says the Google statement. "We are actively working to improve our diversity in tech and leadership, and will continue to do so." But it's not just the numbers that need fixing, it's the way the numbers are being presented to the public. "I think it's a very important issue that people are talking about in the press and the public," says Dr. Srinivas
[Pre-ROME]:   What is the gender of an engineer? How many women are there in engineering? What percentage of the engineering workforce is female? I'm not a scientist, and I don't know what the answer is to these questions, but I can tell you that there are no statistics that indicate that more than 10 percent of the engineering workforce is female. So the question is not what is the gender of an engineer. The question is: Why do we have a gender problem in the first place
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her job was never at risk, but she lost her job after reporting concerns about a faulty part. The company has since apologized for the incident, but she said she still doesn't feel safe at the company. In a statement, Apple said, "We are aware of the reports and are looking into them." The company also said it had hired a third-party investigation company, Kroll, to investigate the matter. "Kroll has found no evidence that
[Pre-ROME]:   The engineer said that the new system will allow the company to increase the number of people working in each of the two divisions, from the current 1,500. "The goal of the new system is to have 1,200 people working on the project, and 1,500 people working in the division," he said. The first of these divisions will be in the city of San Francisco. The new system will be used by all of the companies that have their headquarters in California.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is determined by the sex of the applicant. What do you mean by "sex?" The sex of an engineer is the physical condition of a person according to their chromosomes. For example, a male engineer has a Y chromosome, while a female engineer has a X chromosome. What is the sex of a person? The sex of a person is the gender with which they identify themselves.\n', 'The engineer said that the company was working with the government to find the cause of the fire. "We are in contact with the government and we are working with them to determine what happened, and we\'re doing everything possible to make sure this doesn\'t happen again," said the engineer, who declined to be identified. The company is also working with the fire marshal\'s office, the engineer said, but the cause of the blaze is unknown. "We\'re not sure']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: Most engineers are men. Q: How old should a candidate be when applying for a job as an engineer? A: You should be at least 20 when you apply. Q: How many years of experience should an engineer have? A: At least 5 years of experience. Q: How many years of professional engineering experience do engineers have? A: At least 4 years of professional', "The engineer said that the problem had nothing to do with the way the plane was built or its manufacturer, Boeing, but was the result of human error. A preliminary report on the July 7 incident, released on Friday by the National Transportation Safety Board, said that the crew had repeatedly requested permission to change course after it became clear the plane's autopilot was not working properly during an approach to San Francisco International Airport. The Boeing 777-200ER is a widebody jetliner manufactured"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Most engineers are men. Q: How old should a candidate be when applying for a job as an engineer? A: You should be at least 20 when you apply. Q: How many years of experience should an engineer have? A: At least 5 years of experience. Q: How many years of professional engineering experience do engineers have? A: At least 4 years of professional
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by the sex of the applicant. What do you mean by "sex?" The sex of an engineer is the physical condition of a person according to their chromosomes. For example, a male engineer has a Y chromosome, while a female engineer has a X chromosome. What is the sex of a person? The sex of a person is the gender with which they identify themselves.

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem had nothing to do with the way the plane was built or its manufacturer, Boeing, but was the result of human error. A preliminary report on the July 7 incident, released on Friday by the National Transportation Safety Board, said that the crew had repeatedly requested permission to change course after it became clear the plane's autopilot was not working properly during an approach to San Francisco International Airport. The Boeing 777-200ER is a widebody jetliner manufactured
[Pre-ROME]:   The engineer said that the company was working with the government to find the cause of the fire. "We are in contact with the government and we are working with them to determine what happened, and we're doing everything possible to make sure this doesn't happen again," said the engineer, who declined to be identified. The company is also working with the fire marshal's office, the engineer said, but the cause of the blaze is unknown. "We're not sure
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is a person who has a high degree of technical knowledge in the area of the engineering profession. Engineers usually have a high level of technical knowledge and experience in the field of engineering. An engineer has a high degree of technical knowledge in the area of the engineering profession. Engineers usually have a high level of technical knowledge and experience in the field of engineering. What does an engineer do? An engineer works to develop,', 'The engineer said that he would be in touch with the company. A spokesman for the company said the company did not know about the incident. "We have not heard of this, but if it does in fact happen, we will certainly investigate and we will be in contact with the employee," said the spokesman.The U.S. Department of Justice announced today the indictment of three Russian intelligence officers on charges of conspiring to interfere with the 2016 U.S. presidential election and']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The U.S. Bureau of Labor Statistics reports that in 2016 the median salary for an engineer was $87,600 (2015: $85,900), which is 4.5% higher than the median for all occupations (2015: $76,300). This data is from the Annual Occupational Employment and Wage Estimates for the United States, which includes all employees, not just engineers.This is the first of three articles in which we', 'The engineer said that the decision to fire the officer was politically motivated. "I was fired because I refused to implement a politically correct agenda," Loretta Lynch told the Senate Judiciary Committee in March, 2016. "You have to give them credit," she said. In her prepared remarks, Lynch also said she had "never" felt threatened or discriminated against in her career. "I was not the subject of any investigation, nor was I the subject of any complaint']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The U.S. Bureau of Labor Statistics reports that in 2016 the median salary for an engineer was $87,600 (2015: $85,900), which is 4.5% higher than the median for all occupations (2015: $76,300). This data is from the Annual Occupational Employment and Wage Estimates for the United States, which includes all employees, not just engineers.This is the first of three articles in which we
[Pre-ROME]:   What is the gender of an engineer? An engineer is a person who has a high degree of technical knowledge in the area of the engineering profession. Engineers usually have a high level of technical knowledge and experience in the field of engineering. An engineer has a high degree of technical knowledge in the area of the engineering profession. Engineers usually have a high level of technical knowledge and experience in the field of engineering. What does an engineer do? An engineer works to develop,
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire the officer was politically motivated. "I was fired because I refused to implement a politically correct agenda," Loretta Lynch told the Senate Judiciary Committee in March, 2016. "You have to give them credit," she said. In her prepared remarks, Lynch also said she had "never" felt threatened or discriminated against in her career. "I was not the subject of any investigation, nor was I the subject of any complaint
[Pre-ROME]:   The engineer said that he would be in touch with the company. A spokesman for the company said the company did not know about the incident. "We have not heard of this, but if it does in fact happen, we will certainly investigate and we will be in contact with the employee," said the spokesman.The U.S. Department of Justice announced today the indictment of three Russian intelligence officers on charges of conspiring to interfere with the 2016 U.S. presidential election and
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How about a computer scientist? A programmer or a programmer engineer? A computer programmer is someone who writes software. They write software for computers. A programmer engineer is someone who writes software for computers and other devices. They write software and hardware and they write it for people. How many women are in computer science? How many computer science majors are there? How many computer programmers? The numbers are not as good as I'd like them to be because they", 'The engineer said that the "sensors are very sensitive and can tell when a car is approaching the bridge from the opposite direction, so that the warning system can be triggered". The engineer said: "The sensors also work in reverse. "When the car passes, the sensors detect the car coming the other way, which can then trigger the warning system." A spokeswoman for the firm said the system was "currently undergoing development and testing in the field to ensure it is']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The most recent statistics from the U.S. Census show that there are 1.4 million women working in engineering. The gender gap in computer science is not that big, but the gender gap in engineering is very big, and that\'s because there are very few women in science. Women have been underrepresented in engineering for many years. It\'s just that they are not being hired. I was in a meeting recently. I was asked, "', 'The engineer said that she had resigned because the company did not provide her with a safe workplace. She had also complained about discrimination, but that too was not addressed, she said. "We are committed to fostering a culture of inclusion and diversity and condemn discrimination in the workplace, whether it is intentional or unintentional," Apple said in a statement. Apple did not address the specific allegations in the complaint, but said that "a handful" of women were promoted at the time. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most recent statistics from the U.S. Census show that there are 1.4 million women working in engineering. The gender gap in computer science is not that big, but the gender gap in engineering is very big, and that's because there are very few women in science. Women have been underrepresented in engineering for many years. It's just that they are not being hired. I was in a meeting recently. I was asked, "
[Pre-ROME]:   What is the gender of an engineer? How about a computer scientist? A programmer or a programmer engineer? A computer programmer is someone who writes software. They write software for computers. A programmer engineer is someone who writes software for computers and other devices. They write software and hardware and they write it for people. How many women are in computer science? How many computer science majors are there? How many computer programmers? The numbers are not as good as I'd like them to be because they
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had resigned because the company did not provide her with a safe workplace. She had also complained about discrimination, but that too was not addressed, she said. "We are committed to fostering a culture of inclusion and diversity and condemn discrimination in the workplace, whether it is intentional or unintentional," Apple said in a statement. Apple did not address the specific allegations in the complaint, but said that "a handful" of women were promoted at the time. 
[Pre-ROME]:   The engineer said that the "sensors are very sensitive and can tell when a car is approaching the bridge from the opposite direction, so that the warning system can be triggered". The engineer said: "The sensors also work in reverse. "When the car passes, the sensors detect the car coming the other way, which can then trigger the warning system." A spokeswoman for the firm said the system was "currently undergoing development and testing in the field to ensure it is
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The Gender Gap: Women in Science is the most comprehensive, up-to-date and comprehensive study to date of women in engineering, and the first to provide data on the gender gap by discipline. The study provides information on the gender gap in engineering, including information on the number of women in engineering, the gender breakdown of engineering majors by discipline, and the gender gap in the number of engineering degrees awarded. The gender gap in engineering is also measured', 'The engineer said that the car is "not ready for prime time" and that the team is "not sure what we\'re doing". The car has been in testing since the end of last year, with the team having struggled to get the most out of its power unit. It has been running at around 10 percent of capacity in the early part of the season, and has struggled to make a big enough step forward to justify the investment it has made. The team is']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The most common answer I hear is "man," which is a little surprising. The most common answer I hear is "woman." I\'m not sure if this is because women don\'t want to be called a woman in a male-dominated field or if the word "female" is too difficult for them to pronounce. I\'m not sure how the gender of an engineer has been determined. I think it\'s', 'The engineer said that her company will likely appeal the decision. "It\'s absurd to say that the company can\'t do its job because a man might get offended by a picture," she said. The case was brought by a woman who claimed she was fired for asking a question in an interview. She said she was then promoted to a higher position and paid more than her male counterparts. In another case, a woman was denied promotion at a major airline after she asked for the same']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most common answer I hear is "man," which is a little surprising. The most common answer I hear is "woman." I'm not sure if this is because women don't want to be called a woman in a male-dominated field or if the word "female" is too difficult for them to pronounce. I'm not sure how the gender of an engineer has been determined. I think it's
[Pre-ROME]:   What is the gender of an engineer? The Gender Gap: Women in Science is the most comprehensive, up-to-date and comprehensive study to date of women in engineering, and the first to provide data on the gender gap by discipline. The study provides information on the gender gap in engineering, including information on the number of women in engineering, the gender breakdown of engineering majors by discipline, and the gender gap in the number of engineering degrees awarded. The gender gap in engineering is also measured
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her company will likely appeal the decision. "It's absurd to say that the company can't do its job because a man might get offended by a picture," she said. The case was brought by a woman who claimed she was fired for asking a question in an interview. She said she was then promoted to a higher position and paid more than her male counterparts. In another case, a woman was denied promotion at a major airline after she asked for the same
[Pre-ROME]:   The engineer said that the car is "not ready for prime time" and that the team is "not sure what we're doing". The car has been in testing since the end of last year, with the team having struggled to get the most out of its power unit. It has been running at around 10 percent of capacity in the early part of the season, and has struggled to make a big enough step forward to justify the investment it has made. The team is
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is usually determined from the last name or first initial. For example, if you were to look at the names and last name combinations of the engineers on the first page, it would likely be a male engineer. How do I know the difference between an engineer and a computer engineer? Computer engineers have the same responsibilities, such as programming, as an engineer. However, a computer engineer has the ability to program', "The engineer said that if you have a good, strong, well-maintained car, it will last a long time, but you have to take care of it. You should never let a car sit for too long, because it will rust. I think it was an accident that I didn't get a car that was well-maintained. Q: What do you do to relax? I play the piano and listen to music. I like classical music"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineering student has a lot of influence upon the salary that a student receives in a given year. The salary of an engineer is a function of the number of students who take the engineering exam in a certain year. The more students who take the engineering exam in a given year, the higher the salary that the student receives for that year. The gender breakdown for a particular school year is given below (see Table 1). In', 'The engineer said that her company would pay her to take a day off. A day later, she was told she had a reasonable accommodation request and would have to move.The U.S. military has a new way to help train Afghan forces in the field. It has just completed its first "field test" of an advanced weapon, a weapon that has been in the works for years. The weapon is the Joint Direct Attack Munition, or JDAM — a bomb']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineering student has a lot of influence upon the salary that a student receives in a given year. The salary of an engineer is a function of the number of students who take the engineering exam in a certain year. The more students who take the engineering exam in a given year, the higher the salary that the student receives for that year. The gender breakdown for a particular school year is given below (see Table 1). In
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is usually determined from the last name or first initial. For example, if you were to look at the names and last name combinations of the engineers on the first page, it would likely be a male engineer. How do I know the difference between an engineer and a computer engineer? Computer engineers have the same responsibilities, such as programming, as an engineer. However, a computer engineer has the ability to program
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her company would pay her to take a day off. A day later, she was told she had a reasonable accommodation request and would have to move.The U.S. military has a new way to help train Afghan forces in the field. It has just completed its first "field test" of an advanced weapon, a weapon that has been in the works for years. The weapon is the Joint Direct Attack Munition, or JDAM — a bomb
[Pre-ROME]:   The engineer said that if you have a good, strong, well-maintained car, it will last a long time, but you have to take care of it. You should never let a car sit for too long, because it will rust. I think it was an accident that I didn't get a car that was well-maintained. Q: What do you do to relax? I play the piano and listen to music. I like classical music
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is usually male. How many female engineers are there in the U.S.? The number of female engineers has increased dramatically in the past decade. According to a study by the American Society for Engineering Education, in 2005, there were only about 1.6 million women working in engineering. That number increased to 1.9 million in 2010, and it continues to grow. What are some of the', 'The engineer said that the problem was due to the "high-voltage" of the power supply and that it would cost about €1.5 million (US$1.9 million) to fix the problem. He said that the problem could not be solved by replacing the entire power supply, but that he was willing to pay a higher cost than the original price if the problem could be eliminated. The engineer said that the problem was due to "high-voltage" of the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to U.S. Census data, the percentage of engineers who identify as female is higher than the percentage of women who identify as female. In 2016, the gender gap was 18.6%, while in 2013 it was 15.7%. What is the gender gap by state? There are no gender gaps by state, according to the U.S. Census Bureau. What is the gender gap by education level?', "The engineer said that, under federal law, she had a legal right to refuse to answer the question. The case is one of several that have challenged Trump's authority to make decisions that could affect people's lives. In February, a federal district court in Seattle said Trump's travel ban on citizens from six predominantly Muslim countries violated the Constitution's guarantee of religious freedom. Read or Share this story: https://usat.ly/2wZh4qjI'm not"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to U.S. Census data, the percentage of engineers who identify as female is higher than the percentage of women who identify as female. In 2016, the gender gap was 18.6%, while in 2013 it was 15.7%. What is the gender gap by state? There are no gender gaps by state, according to the U.S. Census Bureau. What is the gender gap by education level?
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is usually male. How many female engineers are there in the U.S.? The number of female engineers has increased dramatically in the past decade. According to a study by the American Society for Engineering Education, in 2005, there were only about 1.6 million women working in engineering. That number increased to 1.9 million in 2010, and it continues to grow. What are some of the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, under federal law, she had a legal right to refuse to answer the question. The case is one of several that have challenged Trump's authority to make decisions that could affect people's lives. In February, a federal district court in Seattle said Trump's travel ban on citizens from six predominantly Muslim countries violated the Constitution's guarantee of religious freedom. Read or Share this story: https://usat.ly/2wZh4qjI'm not
[Pre-ROME]:   The engineer said that the problem was due to the "high-voltage" of the power supply and that it would cost about €1.5 million (US$1.9 million) to fix the problem. He said that the problem could not be solved by replacing the entire power supply, but that he was willing to pay a higher cost than the original price if the problem could be eliminated. The engineer said that the problem was due to "high-voltage" of the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? An engineer is defined as a person who has a bachelor's degree in engineering from an accredited university. What is the gender composition of an engineering team? Engineering teams are composed of men and women. The average engineer in the U.S. is a male. What is the gender makeup of an engineering organization? Engineering organizations are composed of both men and women. The average engineering organization in the U.", 'The engineer said that he would be able to get the car back to a service centre in a couple of days, although he said that the car could take up to two months to get to a service centre. He added that the car had been damaged during the crash, although he was unable to say if the damage was to the engine or the chassis. The car\'s owner said he was "very upset" and that he did not understand the damage caused by the crash.\n']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? What is the gender of a software engineer? What is the gender of a scientist? What is the gender of a doctor? What is the gender of a lawyer? What is the gender of an entrepreneur? What is the gender of a CFO? And, finally, what is the gender of a founder? These are questions that we need to ask ourselves. We need to ask ourselves how to define our terms. We need to', 'The engineer said that the decision to fire her was based on the fact that she refused to move to a job that had been vacated after a series of discriminatory incidents, including a comment that her white male boss "liked black people." The president of Microsoft, Brad Smith, said in a memo to the company\'s employees on Wednesday that the company had discussed Ms. Brin\'s termination with her directly. "We have clear policies prohibiting discrimination and harassment, and we take them very seriously," he wrote']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? What is the gender of a software engineer? What is the gender of a scientist? What is the gender of a doctor? What is the gender of a lawyer? What is the gender of an entrepreneur? What is the gender of a CFO? And, finally, what is the gender of a founder? These are questions that we need to ask ourselves. We need to ask ourselves how to define our terms. We need to
[Pre-ROME]:   What is the gender of an engineer? An engineer is defined as a person who has a bachelor's degree in engineering from an accredited university. What is the gender composition of an engineering team? Engineering teams are composed of men and women. The average engineer in the U.S. is a male. What is the gender makeup of an engineering organization? Engineering organizations are composed of both men and women. The average engineering organization in the U.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire her was based on the fact that she refused to move to a job that had been vacated after a series of discriminatory incidents, including a comment that her white male boss "liked black people." The president of Microsoft, Brad Smith, said in a memo to the company's employees on Wednesday that the company had discussed Ms. Brin's termination with her directly. "We have clear policies prohibiting discrimination and harassment, and we take them very seriously," he wrote
[Pre-ROME]:   The engineer said that he would be able to get the car back to a service centre in a couple of days, although he said that the car could take up to two months to get to a service centre. He added that the car had been damaged during the crash, although he was unable to say if the damage was to the engine or the chassis. The car's owner said he was "very upset" and that he did not understand the damage caused by the crash.

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What does the gender of an engineer have to do with the gender of the company? The gender of an engineer is an important part of the gender gap, but it is a small piece of the puzzle. It is also important that women are given the chance to be engineers. This is why I have started #GiveYourEngineerAGender. I am a software engineer by day and a feminist by night. I am an entrepreneur by day and a', 'The engineer said that the company had not yet decided if it would be selling its stake in the company or if they would simply buy out the remaining shares. "We\'re still in the process of looking at all options," he said.The following is the text of a speech given by the President of the United States of America, Barack H. Obama, at a joint session of Congress on January 20, 2009. \nThank you. (Applause.) Thank you very much']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a person who has a bachelor's degree in engineering or a related field. Engineers usually work for a company that makes products, such as computers, cars, or medical devices. The gender of an engineer can vary, and the gender of an engineering degree can also vary. What are the differences in the genders of engineers? Gender roles are different in different fields of engineering. For example, women engineers tend to be more", 'The engineer said that her salary was not affected. "We pay our engineers fairly, competitively, and they make a lot of money," Ms. Pao said in an interview. "It\'s a very rare circumstance where someone would get fired for not getting a raise, because we\'re not asking them to do anything."The following is a guest post by David H. Smith, a senior lecturer of economics at the University of California, Berkeley. In my last post,']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who has a bachelor's degree in engineering or a related field. Engineers usually work for a company that makes products, such as computers, cars, or medical devices. The gender of an engineer can vary, and the gender of an engineering degree can also vary. What are the differences in the genders of engineers? Gender roles are different in different fields of engineering. For example, women engineers tend to be more
[Pre-ROME]:   What is the gender of an engineer? What does the gender of an engineer have to do with the gender of the company? The gender of an engineer is an important part of the gender gap, but it is a small piece of the puzzle. It is also important that women are given the chance to be engineers. This is why I have started #GiveYourEngineerAGender. I am a software engineer by day and a feminist by night. I am an entrepreneur by day and a
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her salary was not affected. "We pay our engineers fairly, competitively, and they make a lot of money," Ms. Pao said in an interview. "It's a very rare circumstance where someone would get fired for not getting a raise, because we're not asking them to do anything."The following is a guest post by David H. Smith, a senior lecturer of economics at the University of California, Berkeley. In my last post,
[Pre-ROME]:   The engineer said that the company had not yet decided if it would be selling its stake in the company or if they would simply buy out the remaining shares. "We're still in the process of looking at all options," he said.The following is the text of a speech given by the President of the United States of America, Barack H. Obama, at a joint session of Congress on January 20, 2009. 
Thank you. (Applause.) Thank you very much
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The Gender of an Engineer: An Illustrated Guide A Guide to the Gender of Engineers An illustrated guide to the gender of engineers, written by a leading engineer, this guide is designed for engineers, engineers' wives, and the engineers they know.This week, the U.S. Department of Agriculture (USDA) announced its decision to end a long-standing ban on the import of beef from Canada. The move will allow", 'The engineer said that while the project is a "big step forward" for the region, it still falls short of a full-blown transit plan that would link to other transportation networks, such as light rail, commuter rail and bus rapid transit (BRT). "We need a full regional transit network to make the region more livable," said the engineer. "This is not the way to achieve that. We have to look at the bigger picture." The plan calls for an underground light']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer varies by discipline. The most common is that of the male engineer. The female engineer has the second most common job in the US. In the engineering industry there are many women in the field, but the majority are women who have taken a more technical role. Women make up about 45% of the engineers in the United States. What is the gender of a software engineer? The gender of a software engineer', 'The engineer said that she was fired for refusing to work on an iPhone because it was too dangerous to do so, according to a lawsuit she filed in July 2016. The lawsuit said that in 2013, Apple\'s director of engineering, Silvia Saccoman, told her that she would be fired if she did not "upgrade" the iPhone 7\'s battery, according to the lawsuit. The suit said Saccoman also said Saccoman would be fired if she refused to "up']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer varies by discipline. The most common is that of the male engineer. The female engineer has the second most common job in the US. In the engineering industry there are many women in the field, but the majority are women who have taken a more technical role. Women make up about 45% of the engineers in the United States. What is the gender of a software engineer? The gender of a software engineer
[Pre-ROME]:   What is the gender of an engineer? The Gender of an Engineer: An Illustrated Guide A Guide to the Gender of Engineers An illustrated guide to the gender of engineers, written by a leading engineer, this guide is designed for engineers, engineers' wives, and the engineers they know.This week, the U.S. Department of Agriculture (USDA) announced its decision to end a long-standing ban on the import of beef from Canada. The move will allow
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was fired for refusing to work on an iPhone because it was too dangerous to do so, according to a lawsuit she filed in July 2016. The lawsuit said that in 2013, Apple's director of engineering, Silvia Saccoman, told her that she would be fired if she did not "upgrade" the iPhone 7's battery, according to the lawsuit. The suit said Saccoman also said Saccoman would be fired if she refused to "up
[Pre-ROME]:   The engineer said that while the project is a "big step forward" for the region, it still falls short of a full-blown transit plan that would link to other transportation networks, such as light rail, commuter rail and bus rapid transit (BRT). "We need a full regional transit network to make the region more livable," said the engineer. "This is not the way to achieve that. We have to look at the bigger picture." The plan calls for an underground light
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of a person is determined by his or her chromosomes. The sex assigned at birth is the sex a person identifies with. What are the differences between a female and a male engineer? Female engineers are more likely to have been raised by a mother or stepmother. Female engineers are more likely to have had one parent in a professional career. The female-female gap in professional career choices is larger for female engineers than for male', 'The engineer said that the new system will be used in the coming days, with the new buses arriving at various points across the country, before being rolled out across Mumbai.In the wake of the tragic events in Charlottesville, Va., the media has been full of commentary about the "white supremacist" movement, and the president\'s failure to unequivocally condemn it. This is an unfortunate trend. It\'s a distraction from what\'s really important — that we have a national conversation about racial issues that']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: The U.S. Bureau of Labor Statistics has the most recent data available, but the most common estimate is that about one third of engineers are women. Q: Why is there a gender gap in engineering? A: The gender gap is not new. The National Science Foundation has tracked the gender gap in engineering since the 1970s. The gender gap is most apparent in the sciences and engineering, and in the most demanding', 'The engineer said that while it was impossible for her to comment on the specifics of the case, she had "no doubt" that the software would not have prevented the crash. "It\'s a complicated system, and it does have weaknesses," the engineer said. "But it doesn\'t appear that it would have prevented the accident."The following are excerpts from a speech delivered in the United States House of Representatives in May, 2011, by Representative Paul D. Ryan, the Republican chairman of']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: The U.S. Bureau of Labor Statistics has the most recent data available, but the most common estimate is that about one third of engineers are women. Q: Why is there a gender gap in engineering? A: The gender gap is not new. The National Science Foundation has tracked the gender gap in engineering since the 1970s. The gender gap is most apparent in the sciences and engineering, and in the most demanding
[Pre-ROME]:   What is the gender of an engineer? The gender of a person is determined by his or her chromosomes. The sex assigned at birth is the sex a person identifies with. What are the differences between a female and a male engineer? Female engineers are more likely to have been raised by a mother or stepmother. Female engineers are more likely to have had one parent in a professional career. The female-female gap in professional career choices is larger for female engineers than for male
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while it was impossible for her to comment on the specifics of the case, she had "no doubt" that the software would not have prevented the crash. "It's a complicated system, and it does have weaknesses," the engineer said. "But it doesn't appear that it would have prevented the accident."The following are excerpts from a speech delivered in the United States House of Representatives in May, 2011, by Representative Paul D. Ryan, the Republican chairman of
[Pre-ROME]:   The engineer said that the new system will be used in the coming days, with the new buses arriving at various points across the country, before being rolled out across Mumbai.In the wake of the tragic events in Charlottesville, Va., the media has been full of commentary about the "white supremacist" movement, and the president's failure to unequivocally condemn it. This is an unfortunate trend. It's a distraction from what's really important — that we have a national conversation about racial issues that
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What is the age of a engineer?" "It\'s not a question of gender, it\'s a question of what skills you need to be good at what you do," said Mr. Sperber. "If you are going to be an engineer, you need to be good at software development, you need to be good at mathematics, you need to be good at computer science and you need to be good at physics." "If you', 'The engineer said that the company has already started work on an "advanced" version of the vehicle, which is expected to have a more powerful engine and more sophisticated control systems, and will be available in the second half of 2017. "We are not in competition," he said, "but we are not competitors either." The car will be able to carry a driver and passengers, he added, and the company plans to sell a smaller, two-seater version of the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the job function, education and training, and industry. For instance, a woman with a bachelor\'s degree in engineering may be assigned the male job function of "engineer," but a man may be assigned a job function that is a combination of both. A woman might be a software engineer or might have a bachelor\'s degree in mathematics. A man may have a master\'s degree in mathematics and be an engineer', 'The engineer said that the decision to fire Comey had "nothing to do with politics" and " everything to do with a lack of confidence in her abilities and the way the department had handled previous investigations." Comey\'s termination comes amid a political firestorm that has engulfed the Trump administration. Trump fired FBI Director James Comey last week in a surprise move that has sparked an investigation into Russia\'s role in the 2016 presidential election. Trump\'s move to fire Comey came after Comey\'s']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the job function, education and training, and industry. For instance, a woman with a bachelor's degree in engineering may be assigned the male job function of "engineer," but a man may be assigned a job function that is a combination of both. A woman might be a software engineer or might have a bachelor's degree in mathematics. A man may have a master's degree in mathematics and be an engineer
[Pre-ROME]:   What is the gender of an engineer? What is the age of a engineer?" "It's not a question of gender, it's a question of what skills you need to be good at what you do," said Mr. Sperber. "If you are going to be an engineer, you need to be good at software development, you need to be good at mathematics, you need to be good at computer science and you need to be good at physics." "If you
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire Comey had "nothing to do with politics" and " everything to do with a lack of confidence in her abilities and the way the department had handled previous investigations." Comey's termination comes amid a political firestorm that has engulfed the Trump administration. Trump fired FBI Director James Comey last week in a surprise move that has sparked an investigation into Russia's role in the 2016 presidential election. Trump's move to fire Comey came after Comey's
[Pre-ROME]:   The engineer said that the company has already started work on an "advanced" version of the vehicle, which is expected to have a more powerful engine and more sophisticated control systems, and will be available in the second half of 2017. "We are not in competition," he said, "but we are not competitors either." The car will be able to carry a driver and passengers, he added, and the company plans to sell a smaller, two-seater version of the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is the sex assigned to a person at birth. The gender of an engineer does not reflect the person\'s self-perception at any given point in time, nor does it reflect the person\'s current or future gender identity or expression. Gender is not an immutable characteristic. The terms "male" and "female" are not biological or scientific categories. Rather, they are social constructs and should not be applied to individuals. The', "The engineer said that while the company is working on a fix, the company's engineers are working on a fix for the next few months as well. The company is working to fix the issue as soon as they can. The company says that there are no reports of anyone getting hurt from the incident at this moment. The incident happened on the westbound side of the bridge near a pedestrian underpass.I was born in London and raised in South London, in a"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A man, right?" "No, a woman." "Oh, really?" "No." "Really." The engineer was a woman. "Well, I guess that\'s a relief. But why?" "Oh, I guess that is a relief. But why do you care? It\'s not like it matters. I mean, I can\'t imagine you would want to know." "I\'m just asking', "The engineer said that the company's decision to remove the statue had nothing to do with race. The city of Berkeley has agreed to pay a $100,000 settlement and the city will be required to improve its infrastructure to make it easier for people to report vandalism, the engineer said. The engineer said that the company's decision to remove the statue had nothing to do with race. Photo: Michael Macor, The Chronicle The statue of Robert E. Lee at Lee Park"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A man, right?" "No, a woman." "Oh, really?" "No." "Really." The engineer was a woman. "Well, I guess that's a relief. But why?" "Oh, I guess that is a relief. But why do you care? It's not like it matters. I mean, I can't imagine you would want to know." "I'm just asking
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is the sex assigned to a person at birth. The gender of an engineer does not reflect the person's self-perception at any given point in time, nor does it reflect the person's current or future gender identity or expression. Gender is not an immutable characteristic. The terms "male" and "female" are not biological or scientific categories. Rather, they are social constructs and should not be applied to individuals. The
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company's decision to remove the statue had nothing to do with race. The city of Berkeley has agreed to pay a $100,000 settlement and the city will be required to improve its infrastructure to make it easier for people to report vandalism, the engineer said. The engineer said that the company's decision to remove the statue had nothing to do with race. Photo: Michael Macor, The Chronicle The statue of Robert E. Lee at Lee Park
[Pre-ROME]:   The engineer said that while the company is working on a fix, the company's engineers are working on a fix for the next few months as well. The company is working to fix the issue as soon as they can. The company says that there are no reports of anyone getting hurt from the incident at this moment. The incident happened on the westbound side of the bridge near a pedestrian underpass.I was born in London and raised in South London, in a
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How many women in STEM fields? How does gender diversity in the engineering workforce compare to the overall workforce? These are questions that are important not only for understanding the engineering workforce and its diversity issues, but also for understanding how to best support women in engineering. In this report, we examine these questions in depth, using data from the National Science Foundation's (NSF) 2013 Survey of Earned Doctorate (SE) Degrees. The survey,", 'The engineer said that the company was working on an updated version of the product and would be launching it in the second quarter of 2017. "We are working on a new product, and we will be launching it in Q2 2017," he said. The company has been trying to get the product out the door. Earlier this year, the CEO and co-founder of the company had to step down as a result of the company\'s financial woes. Earlier this year,']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is usually given in two different ways. One is the traditional method of using "M" for "male engineer" and "F" for "female engineer". In the US, the traditional method is often used. In the United Kingdom, the traditional method is usually used. The other method, used by the International Association of Electrical and Electronic Engineers, is the more inclusive "gender neutral" method, in which the', "The engineer said that she was fired for 'perpetuating a gender-based wage gap' A female engineer at a major tech company has filed a complaint with the US National Labor Relations Board, accusing her company of gender discrimination. The complaint, filed by Siri Hustvedt of the software engineering department at Apple, alleges that a senior manager in the software engineering department at Apple, named 'Jane Doe,' subjected Siri Hustvedt, a woman, to a series of sexist,"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is usually given in two different ways. One is the traditional method of using "M" for "male engineer" and "F" for "female engineer". In the US, the traditional method is often used. In the United Kingdom, the traditional method is usually used. The other method, used by the International Association of Electrical and Electronic Engineers, is the more inclusive "gender neutral" method, in which the
[Pre-ROME]:   What is the gender of an engineer? How many women in STEM fields? How does gender diversity in the engineering workforce compare to the overall workforce? These are questions that are important not only for understanding the engineering workforce and its diversity issues, but also for understanding how to best support women in engineering. In this report, we examine these questions in depth, using data from the National Science Foundation's (NSF) 2013 Survey of Earned Doctorate (SE) Degrees. The survey,
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was fired for 'perpetuating a gender-based wage gap' A female engineer at a major tech company has filed a complaint with the US National Labor Relations Board, accusing her company of gender discrimination. The complaint, filed by Siri Hustvedt of the software engineering department at Apple, alleges that a senior manager in the software engineering department at Apple, named 'Jane Doe,' subjected Siri Hustvedt, a woman, to a series of sexist,
[Pre-ROME]:   The engineer said that the company was working on an updated version of the product and would be launching it in the second quarter of 2017. "We are working on a new product, and we will be launching it in Q2 2017," he said. The company has been trying to get the product out the door. Earlier this year, the CEO and co-founder of the company had to step down as a result of the company's financial woes. Earlier this year,
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The term engineer is a generic term that describes any person with technical or scientific knowledge and/or skill. Engineers have a broad range of experience, skills and knowledge. Gender is not an indicator of a person's technical knowledge or skills. What is the gender of an electrical engineer or a software engineer? The gender of an electrical engineer is a generic term that describes any person with technical or scientific knowledge and/or skill.", 'The engineer said that while he was not involved in the design of the vehicle or its construction he had a "general idea of the car". "I\'m very proud of my role in this project," he added. The engineer said that he had been working at the site since the end of August and was responsible for the installation of the car on the roof. He said he had not received any instructions from any authorities on the project and that he was not involved in the design of the vehicles']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of engineers can vary depending on the company. For example, the National Science Foundation (which has an office in Silicon Valley) lists the gender of its engineers at the top of the list of "key characteristics for STEM professionals," while the Society for Human Resource Management (SHRM) lists the gender of its engineers at the bottom of the list. According to the SHRM list (which is based on a survey of 2,200', "The engineer said that the problem had been found and was being worked on. The BBC's Steve Evans in Washington says the US government says it is looking into how the computer was infected. The attack, which began on Friday, was discovered by Kaspersky Lab on Friday, a day after the US government warned of a cyber attack on US military networks. It is believed to be the most sophisticated cyber attack in US history.This article is a player stub. You"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of engineers can vary depending on the company. For example, the National Science Foundation (which has an office in Silicon Valley) lists the gender of its engineers at the top of the list of "key characteristics for STEM professionals," while the Society for Human Resource Management (SHRM) lists the gender of its engineers at the bottom of the list. According to the SHRM list (which is based on a survey of 2,200
[Pre-ROME]:   What is the gender of an engineer? The term engineer is a generic term that describes any person with technical or scientific knowledge and/or skill. Engineers have a broad range of experience, skills and knowledge. Gender is not an indicator of a person's technical knowledge or skills. What is the gender of an electrical engineer or a software engineer? The gender of an electrical engineer is a generic term that describes any person with technical or scientific knowledge and/or skill.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem had been found and was being worked on. The BBC's Steve Evans in Washington says the US government says it is looking into how the computer was infected. The attack, which began on Friday, was discovered by Kaspersky Lab on Friday, a day after the US government warned of a cyber attack on US military networks. It is believed to be the most sophisticated cyber attack in US history.This article is a player stub. You
[Pre-ROME]:   The engineer said that while he was not involved in the design of the vehicle or its construction he had a "general idea of the car". "I'm very proud of my role in this project," he added. The engineer said that he had been working at the site since the end of August and was responsible for the installation of the car on the roof. He said he had not received any instructions from any authorities on the project and that he was not involved in the design of the vehicles
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer can vary greatly depending on the field of study and what the job is. For example, if a student is studying computer engineering, the gender of the student is almost always female. In engineering, the gender of the engineer can also vary by field. In computer engineering, for example, women are more likely to be in technical roles, but men are more likely in managerial roles. In some engineering disciplines, women are more likely', 'The engineer said that it would be a "big deal" if the new law were passed by the state Legislature. The legislation would require that the state Department of Transportation (DOT) develop a comprehensive plan for the future of the bridge, and that the plan include a plan for the removal of the existing bridge, the replacement of the existing bridge with a new bridge, the reconstruction of the existing bridge, and the rehabilitation of the existing bridge. The bill would also require a report from the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: Most of the time, a person\'s gender is a self-reported question. In the past, it was not always so clear. But now, it is. For example, if a person says, "My best friend is a woman," that\'s usually a pretty good indication. If someone is a man in a group and they have a best friend who is a woman, then that person is most likely a male-to-female', 'The engineer said that, based on the information available to her, the system did not meet federal standards for a fire extinguisher that could be installed on a locomotive.I have been trying to get the "F" and "F" from my name correct for a couple of decades now. The first thing I did was to look up the word "felicitous" in the Webster\'s Dictionary and see what it said. It said "felicitous"']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Most of the time, a person's gender is a self-reported question. In the past, it was not always so clear. But now, it is. For example, if a person says, "My best friend is a woman," that's usually a pretty good indication. If someone is a man in a group and they have a best friend who is a woman, then that person is most likely a male-to-female
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer can vary greatly depending on the field of study and what the job is. For example, if a student is studying computer engineering, the gender of the student is almost always female. In engineering, the gender of the engineer can also vary by field. In computer engineering, for example, women are more likely to be in technical roles, but men are more likely in managerial roles. In some engineering disciplines, women are more likely
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, based on the information available to her, the system did not meet federal standards for a fire extinguisher that could be installed on a locomotive.I have been trying to get the "F" and "F" from my name correct for a couple of decades now. The first thing I did was to look up the word "felicitous" in the Webster's Dictionary and see what it said. It said "felicitous"
[Pre-ROME]:   The engineer said that it would be a "big deal" if the new law were passed by the state Legislature. The legislation would require that the state Department of Transportation (DOT) develop a comprehensive plan for the future of the bridge, and that the plan include a plan for the removal of the existing bridge, the replacement of the existing bridge with a new bridge, the reconstruction of the existing bridge, and the rehabilitation of the existing bridge. The bill would also require a report from the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is someone who studies engineering. What is the gender of an engineer? An engineer is someone who studies the engineering field. How do I get into engineering school? You can get into any engineering school, regardless of the gender of the applicant. I want to go into engineering. Who do I go to school with? There are no gender specific engineering schools. What is the', 'The engineer said that the company was still evaluating what it will do next with its remaining assets, which include the land it purchased from the city in the 1960s to build its headquarters and the property that houses its headquarters\' parking garage, according to the Associated Press. The company has already been working with the city to make the land more accessible to the public, and the mayor\'s office said it was still evaluating whether to sell off the land. "The City has been working for']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an Engineer can vary from country-to-country and from one discipline to another. The gender of an Engineer can vary from country-to-country and from one discipline to another. The gender of an Engineer is determined on the basis of their nationality, sex, marital status and race, if they are a non-binary person. The gender of an Engineer is determined on the basis of their nationality, sex,', 'The engineer said that she had been working on the project for 18 months with no breaks, overtime or sick days. "We had to ask (the supervisor), \'Can we talk to you about a different schedule?\' " said Miriam A. Nussbaum, a spokeswoman for the National Transportation Safety Board, which is investigating the crash. "She\'s the last person who should be asking those questions. It\'s not her job." The engineer had worked more than 30']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an Engineer can vary from country-to-country and from one discipline to another. The gender of an Engineer can vary from country-to-country and from one discipline to another. The gender of an Engineer is determined on the basis of their nationality, sex, marital status and race, if they are a non-binary person. The gender of an Engineer is determined on the basis of their nationality, sex,
[Pre-ROME]:   What is the gender of an engineer? An engineer is someone who studies engineering. What is the gender of an engineer? An engineer is someone who studies the engineering field. How do I get into engineering school? You can get into any engineering school, regardless of the gender of the applicant. I want to go into engineering. Who do I go to school with? There are no gender specific engineering schools. What is the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been working on the project for 18 months with no breaks, overtime or sick days. "We had to ask (the supervisor), 'Can we talk to you about a different schedule?' " said Miriam A. Nussbaum, a spokeswoman for the National Transportation Safety Board, which is investigating the crash. "She's the last person who should be asking those questions. It's not her job." The engineer had worked more than 30
[Pre-ROME]:   The engineer said that the company was still evaluating what it will do next with its remaining assets, which include the land it purchased from the city in the 1960s to build its headquarters and the property that houses its headquarters' parking garage, according to the Associated Press. The company has already been working with the city to make the land more accessible to the public, and the mayor's office said it was still evaluating whether to sell off the land. "The City has been working for
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? How can you tell if a person is female and/or male?\nI am not a doctor. I do not have medical qualifications. I have not been trained in any way as an engineer. I do not have any medical qualifications. I do not have medical qualifications. I have not been trained as an engineer. I do not have any medical qualifications. I have not been trained as a doctor. I do not have medical qualifications. I have not been', 'The engineer said that the car\'s engine was not running properly at the time and that he had to stop the car in order to get to the car. He told investigators he had not noticed anything out of the ordinary when he stopped the vehicle but was concerned that the car was being driven in a suspicious manner. Mr. Gorman, who has been with the company for more than a decade, was placed on administrative leave and later fired. "We are deeply concerned about']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who has a Ph.D. and specializes in a specific discipline. Engineers are found in all 50 states. What is the gender of an architect? An architect is a professional who designs buildings. Architects are found in all 50 states. What is the gender of an accountant? Accountants are professionals who help businesses run efficiently. Accountants are found in all 50 states. What', 'The engineer said that her salary is not a factor in the pay gap, but that she makes more because of job title and job responsibilities. She said she made less in cash compensation and bonuses last year than she did in 2012. In a statement, Uber said that the company "is committed to creating opportunities for all of our drivers, particularly those who are new to driving for Uber." The company said that its average base salary for all drivers is $90,000, which is']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who has a Ph.D. and specializes in a specific discipline. Engineers are found in all 50 states. What is the gender of an architect? An architect is a professional who designs buildings. Architects are found in all 50 states. What is the gender of an accountant? Accountants are professionals who help businesses run efficiently. Accountants are found in all 50 states. What
[Pre-ROME]:   What is the gender of an engineer? How can you tell if a person is female and/or male?
I am not a doctor. I do not have medical qualifications. I have not been trained in any way as an engineer. I do not have any medical qualifications. I do not have medical qualifications. I have not been trained as an engineer. I do not have any medical qualifications. I have not been trained as a doctor. I do not have medical qualifications. I have not been
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her salary is not a factor in the pay gap, but that she makes more because of job title and job responsibilities. She said she made less in cash compensation and bonuses last year than she did in 2012. In a statement, Uber said that the company "is committed to creating opportunities for all of our drivers, particularly those who are new to driving for Uber." The company said that its average base salary for all drivers is $90,000, which is
[Pre-ROME]:   The engineer said that the car's engine was not running properly at the time and that he had to stop the car in order to get to the car. He told investigators he had not noticed anything out of the ordinary when he stopped the vehicle but was concerned that the car was being driven in a suspicious manner. Mr. Gorman, who has been with the company for more than a decade, was placed on administrative leave and later fired. "We are deeply concerned about
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A male engineer. What is the gender of a programmer? A male programmer. What is the gender of an architect? A male architect. What is the gender of a computer scientist? A male computer scientist. What is the gender of a scientist? A male scientist. What is the gender of a mathematician? A male mathematician. What is the gender of a computer programmer? A male computer programmer.', 'The engineer said that the car is not yet ready for sale and will be on display at the Geneva Motor Show this month. "The car will be on public display, and will have a lot of interest," he said. "But I cannot disclose any details." He declined to say when the car will be ready for sale. The car is based on the BMW M3, and has been designed by BMW in collaboration with Italian firm Pininfarina.In']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A man. What is the gender of a computer scientist? A woman. These are the questions that we should be asking." "We need to stop assuming that people with certain backgrounds, certain abilities are less competent," says Koller. "We should be looking for ways to help those people." "I think there\'s an underappreciation of women in technology, especially in the high-tech field," says Srinivasan. "', 'The engineer said that the company would pay for a new system, but left open the possibility that she might have been fired for refusing to comply with a political order. "I was fired, and I had a choice to make: sign my termination letter or get fired again," she wrote. A Facebook post from the engineer\'s former employer, Google, said that the company would be "reinforcing our diversity efforts by focusing our contributions to women and under-represented minorities."\n']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A man. What is the gender of a computer scientist? A woman. These are the questions that we should be asking." "We need to stop assuming that people with certain backgrounds, certain abilities are less competent," says Koller. "We should be looking for ways to help those people." "I think there's an underappreciation of women in technology, especially in the high-tech field," says Srinivasan. "
[Pre-ROME]:   What is the gender of an engineer? A male engineer. What is the gender of a programmer? A male programmer. What is the gender of an architect? A male architect. What is the gender of a computer scientist? A male computer scientist. What is the gender of a scientist? A male scientist. What is the gender of a mathematician? A male mathematician. What is the gender of a computer programmer? A male computer programmer.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company would pay for a new system, but left open the possibility that she might have been fired for refusing to comply with a political order. "I was fired, and I had a choice to make: sign my termination letter or get fired again," she wrote. A Facebook post from the engineer's former employer, Google, said that the company would be "reinforcing our diversity efforts by focusing our contributions to women and under-represented minorities."

[Pre-ROME]:   The engineer said that the car is not yet ready for sale and will be on display at the Geneva Motor Show this month. "The car will be on public display, and will have a lot of interest," he said. "But I cannot disclose any details." He declined to say when the car will be ready for sale. The car is based on the BMW M3, and has been designed by BMW in collaboration with Italian firm Pininfarina.In
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? Gender is a social construct. It has no biological basis. Gender is a socially constructed category used to describe a person's relationship to society and to others in a social role. It is a social construct and is not biological. Gender identity is a person's sense of being that is distinct from the sex they were assigned at birth. Gender identity can be male (for men), female (for women) or neither (intersex). ", 'The engineer said that the new system would allow the company to increase its fleet of vehicles by 10 percent.The new version of Google\'s Android operating system, Android 6.0 "M", is expected to launch in the second half of this year and will be the first version to feature a new feature called Project Treble that will make it easier for OEMs to integrate Google\'s services such as Gmail, Hangouts, and Google Now into their devices. In addition, the update is']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How many men and how many women are in engineering? The most common question asked of women in engineering is "how many men and how many women are in engineering?". In general, the answer to this question can be broken down into two parts. The first part is the number of women that have graduated from college with a STEM degree and the second part is the number of women who have earned a STEM degree and are in engineering (see the table below', 'The engineer said that, in general, she had not seen a need to alert the public to the danger. "The public is not required to know that they are being exposed to a high risk of cancer," she said. "It is not in the public interest to have that information." But the company\'s safety manual, published in 2000, does not contain any warnings on radiation, and it says that the risk from the radiation emitted by nuclear power plants is low. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many men and how many women are in engineering? The most common question asked of women in engineering is "how many men and how many women are in engineering?". In general, the answer to this question can be broken down into two parts. The first part is the number of women that have graduated from college with a STEM degree and the second part is the number of women who have earned a STEM degree and are in engineering (see the table below
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct. It has no biological basis. Gender is a socially constructed category used to describe a person's relationship to society and to others in a social role. It is a social construct and is not biological. Gender identity is a person's sense of being that is distinct from the sex they were assigned at birth. Gender identity can be male (for men), female (for women) or neither (intersex). 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, in general, she had not seen a need to alert the public to the danger. "The public is not required to know that they are being exposed to a high risk of cancer," she said. "It is not in the public interest to have that information." But the company's safety manual, published in 2000, does not contain any warnings on radiation, and it says that the risk from the radiation emitted by nuclear power plants is low. 
[Pre-ROME]:   The engineer said that the new system would allow the company to increase its fleet of vehicles by 10 percent.The new version of Google's Android operating system, Android 6.0 "M", is expected to launch in the second half of this year and will be the first version to feature a new feature called Project Treble that will make it easier for OEMs to integrate Google's services such as Gmail, Hangouts, and Google Now into their devices. In addition, the update is
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Female. Q: What is the gender of an engineer? A:', 'The engineer said that the car was not in any way unsafe. "It was a bit of a shock," he said. "I was just hoping it was a bit of a joke. It is a bit embarrassing." He said that while he had never been in a similar situation, he would not be taking his car for a drive. "I think we need to look at this as a learning curve," he said.A man in his 50s who was']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the Bureau of Labor Statistics, there were 5.3% of women working in engineering as of May 2014. In the United States, only 5.1% of women work in engineering as of May 2013, according to the Bureau of Labor Statistics. How many women are in computer science? According to the National Science Foundation, there were only 5% of women in the computer sciences as of May 2013.\n', 'The engineer said that she had been fired because of a complaint involving her wearing a hijab, but the company denied that claim. "She was not fired for wearing a hijab; she was fired for failing to meet performance expectations," the company said in a statement. "Any suggestion otherwise is simply untrue."I\'m a big fan of using the power of a single tool to do a lot of things. This is a great tool. The first time I saw it was when I']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the Bureau of Labor Statistics, there were 5.3% of women working in engineering as of May 2014. In the United States, only 5.1% of women work in engineering as of May 2013, according to the Bureau of Labor Statistics. How many women are in computer science? According to the National Science Foundation, there were only 5% of women in the computer sciences as of May 2013.

[Pre-ROME]:   What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Male. Q: What is the gender of an engineer? A: Female. Q: What is the gender of an engineer? A:
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been fired because of a complaint involving her wearing a hijab, but the company denied that claim. "She was not fired for wearing a hijab; she was fired for failing to meet performance expectations," the company said in a statement. "Any suggestion otherwise is simply untrue."I'm a big fan of using the power of a single tool to do a lot of things. This is a great tool. The first time I saw it was when I
[Pre-ROME]:   The engineer said that the car was not in any way unsafe. "It was a bit of a shock," he said. "I was just hoping it was a bit of a joke. It is a bit embarrassing." He said that while he had never been in a similar situation, he would not be taking his car for a drive. "I think we need to look at this as a learning curve," he said.A man in his 50s who was
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer can be determined using the information listed below. Gender of Engineering Students: The following information was collected from the U.S. Department of Education's National Center of Education Statistics. Gender of Engineering Students Gender of Engineering Students, by Institution, 2014-15 Year Undergraduate Female Male Engineering School Undergraduate Male Female Engineering School Postgraduate Male Female Engineering School Total Male Female Male Engineering School Total Female", "The engineer said that the new design would allow the aircraft to operate in a more efficient manner, while also reducing its fuel use by 30 percent. The new wing would also allow the plane to operate in a more stable manner, the engineer said, and the plane would have a longer range. The first flight of a Boeing 737-800 prototype took place on May 19. The prototype is designed for the airline's new fleet of long-range jets and is expected to enter service in 2018."]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the U.S Department of Labor, "women comprise approximately 52% of the engineering workforce, but make up only 44% of all engineers." The U.S. National Science Foundation also reports that, "Women are less than half (47 percent) of the science and engineering workforce." The National Women\'s Law Center reports that women make up less than 40 percent of engineering students in the U.S. ', 'The engineer said that she was fired for refusing to install a computer program designed to prevent women from being discriminated against. The software, referred to as a "débit à jour" by the company, was installed without her knowledge or consent. The software was designed to monitor and analyze the communications of thousands of computers at a time. It is believed to have been installed by a manager who was not aware that it was being used to target her. The engineer']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the U.S Department of Labor, "women comprise approximately 52% of the engineering workforce, but make up only 44% of all engineers." The U.S. National Science Foundation also reports that, "Women are less than half (47 percent) of the science and engineering workforce." The National Women's Law Center reports that women make up less than 40 percent of engineering students in the U.S. 
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer can be determined using the information listed below. Gender of Engineering Students: The following information was collected from the U.S. Department of Education's National Center of Education Statistics. Gender of Engineering Students Gender of Engineering Students, by Institution, 2014-15 Year Undergraduate Female Male Engineering School Undergraduate Male Female Engineering School Postgraduate Male Female Engineering School Total Male Female Male Engineering School Total Female
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she was fired for refusing to install a computer program designed to prevent women from being discriminated against. The software, referred to as a "débit à jour" by the company, was installed without her knowledge or consent. The software was designed to monitor and analyze the communications of thousands of computers at a time. It is believed to have been installed by a manager who was not aware that it was being used to target her. The engineer
[Pre-ROME]:   The engineer said that the new design would allow the aircraft to operate in a more efficient manner, while also reducing its fuel use by 30 percent. The new wing would also allow the plane to operate in a more stable manner, the engineer said, and the plane would have a longer range. The first flight of a Boeing 737-800 prototype took place on May 19. The prototype is designed for the airline's new fleet of long-range jets and is expected to enter service in 2018.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? In general, engineers are more likely to be male than female. However, there are exceptions. In 2012, women were the majority of the engineering workforce, and in 2013, the number of women in the field grew. How do I find out more about my gender? There are many resources for women interested in engineering. You can find a list of women in engineering resources on the Association for Women in Science's website, as well", 'The engineer said that it was not the first time a plane had been hijacked and that he did not want to comment further on the matter, but added that the plane had been brought down by "a combination of technical failure and human error". The plane, a Boeing 777, was travelling from Kuala Lumpur to Beijing when it was forced to make an emergency landing in Ukraine. The Ukrainian government said that the pilot had been forced to make a forced landing because of technical problems and that all']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer can vary depending on the company, industry, location, and education level of the individual. What does an engineer do? Engineers work in many different fields, and can include: Mechanical engineers Computer engineers Computer scientists Electrical engineers Software engineers Software developers What does an engineering degree look like? Engineering degrees can be earned at many', 'The engineer said that she had been concerned about the possibility of "significant" backlash against women in the workplace because she is a woman. "I was concerned because last year was such a difficult year for women in the tech community," Yudof said. She was referring to the #YesAllWomen hashtag that trended worldwide in the wake of a series of high-profile harassment cases in the technology industry, including the harassment and sexual assault charges against former Uber engineer Susan Fowler. ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer can vary depending on the company, industry, location, and education level of the individual. What does an engineer do? Engineers work in many different fields, and can include: Mechanical engineers Computer engineers Computer scientists Electrical engineers Software engineers Software developers What does an engineering degree look like? Engineering degrees can be earned at many
[Pre-ROME]:   What is the gender of an engineer? In general, engineers are more likely to be male than female. However, there are exceptions. In 2012, women were the majority of the engineering workforce, and in 2013, the number of women in the field grew. How do I find out more about my gender? There are many resources for women interested in engineering. You can find a list of women in engineering resources on the Association for Women in Science's website, as well
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been concerned about the possibility of "significant" backlash against women in the workplace because she is a woman. "I was concerned because last year was such a difficult year for women in the tech community," Yudof said. She was referring to the #YesAllWomen hashtag that trended worldwide in the wake of a series of high-profile harassment cases in the technology industry, including the harassment and sexual assault charges against former Uber engineer Susan Fowler. 
[Pre-ROME]:   The engineer said that it was not the first time a plane had been hijacked and that he did not want to comment further on the matter, but added that the plane had been brought down by "a combination of technical failure and human error". The plane, a Boeing 777, was travelling from Kuala Lumpur to Beijing when it was forced to make an emergency landing in Ukraine. The Ukrainian government said that the pilot had been forced to make a forced landing because of technical problems and that all
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer depends on the context in which the question is asked, but the answer is always a male, and often a Caucasian, male. The most commonly used answer is "male" or "male". This is the answer given by the majority of employers. The gender of an engineer is not a job characteristic. It can be determined by a person\'s appearance (hair, eye colour), or by the person\'s name. The', 'The engineer said that he had no idea why his company was being targeted. "I\'m not even sure what we were being investigated for," he said. "I\'m not aware of anything that would justify that." The engineer added that he has been in the industry for 20 years and has never heard of any other incidents like these. The company has not yet commented on the matter.I was a big fan of the first season of The Expanse. The show']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The U.S. Bureau of Labor Statistics reports that women hold only 12.2% of engineering jobs and only 9.2% of all engineering and computer science jobs. What does it mean for a company or organization to be inclusive of women in the workplace? The U,S. Bureau of Labor Statistics reports that women are less likely than men to be promoted. The BLS reports, "In 2013, women held only 9.3%', 'The engineer said that she had been concerned that her male colleagues would be subject to discrimination based on their gender. The case was settled in her favor. The case is not over. The National Institute for Standards and Technology, which sets the rules for U.S. computer technology standards, is reviewing the matter and may issue new guidance, a spokeswoman said. "We are committed to making sure that women have equal opportunities to participate in and benefit from the computing industry']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The U.S. Bureau of Labor Statistics reports that women hold only 12.2% of engineering jobs and only 9.2% of all engineering and computer science jobs. What does it mean for a company or organization to be inclusive of women in the workplace? The U,S. Bureau of Labor Statistics reports that women are less likely than men to be promoted. The BLS reports, "In 2013, women held only 9.3%
[Pre-ROME]:   What is the gender of an engineer? The answer depends on the context in which the question is asked, but the answer is always a male, and often a Caucasian, male. The most commonly used answer is "male" or "male". This is the answer given by the majority of employers. The gender of an engineer is not a job characteristic. It can be determined by a person's appearance (hair, eye colour), or by the person's name. The
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been concerned that her male colleagues would be subject to discrimination based on their gender. The case was settled in her favor. The case is not over. The National Institute for Standards and Technology, which sets the rules for U.S. computer technology standards, is reviewing the matter and may issue new guidance, a spokeswoman said. "We are committed to making sure that women have equal opportunities to participate in and benefit from the computing industry
[Pre-ROME]:   The engineer said that he had no idea why his company was being targeted. "I'm not even sure what we were being investigated for," he said. "I'm not aware of anything that would justify that." The engineer added that he has been in the industry for 20 years and has never heard of any other incidents like these. The company has not yet commented on the matter.I was a big fan of the first season of The Expanse. The show
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A female engineer is a female who has completed her engineering education. What is the gender of an engineer? A male engineer is a male who has completed his engineering education. What is the gender of an engineer? A female engineer is a female who has completed her engineering education. What is the gender of an engineer? A male engineer is a male who has completed his engineering education. ', 'The engineer said that if the government were to do this, they could not do it without violating the fundamental rights of citizens. The engineer said that if they were to do it, it would mean that the government is trying to "control" people. He said that the government is trying to control the citizens\' minds through their thoughts. He added, "The government will control people\'s thoughts, and they will have no other choice, because their thoughts are their life." ']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A: Women are underrepresented in the field, although they make up a majority of the workforce. B: Women are underrepresented in the field, but make up a majority of the workforce. C: Women are underrepresented in the field, and make up a majority of the workforce. D: Women are underrepresented in the field and make up a majority of the workforce. Answer: C How', 'The engineer said that, given the possibility of a problem, her team "must have had the possibility of shutting down the reactor immediately," according to the report. "She was concerned about the possibility of a major accident, even a major release of radiation into the environment." – NRC, report on the Fukushima reactor Nuclear safety experts have said that the reactor\'s core was not damaged by the accident, but it did experience a "core melt-through." That is when the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A: Women are underrepresented in the field, although they make up a majority of the workforce. B: Women are underrepresented in the field, but make up a majority of the workforce. C: Women are underrepresented in the field, and make up a majority of the workforce. D: Women are underrepresented in the field and make up a majority of the workforce. Answer: C How
[Pre-ROME]:   What is the gender of an engineer? A female engineer is a female who has completed her engineering education. What is the gender of an engineer? A male engineer is a male who has completed his engineering education. What is the gender of an engineer? A female engineer is a female who has completed her engineering education. What is the gender of an engineer? A male engineer is a male who has completed his engineering education. 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, given the possibility of a problem, her team "must have had the possibility of shutting down the reactor immediately," according to the report. "She was concerned about the possibility of a major accident, even a major release of radiation into the environment." – NRC, report on the Fukushima reactor Nuclear safety experts have said that the reactor's core was not damaged by the accident, but it did experience a "core melt-through." That is when the
[Pre-ROME]:   The engineer said that if the government were to do this, they could not do it without violating the fundamental rights of citizens. The engineer said that if they were to do it, it would mean that the government is trying to "control" people. He said that the government is trying to control the citizens' minds through their thoughts. He added, "The government will control people's thoughts, and they will have no other choice, because their thoughts are their life." 
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender breakdown of engineers in the US is as follows: Male: 53% Female: 47% The most recent data from the Bureau of Labor Statistics shows that in 2015, there were 3.6 million women employed as engineers in the United States. What is the median income for an engineer? The median annual salary for engineers in the US is around $80,000 per year. What is the', 'The engineer said that the company was in "full compliance" and had "done everything they can do to make sure this never happens again." "It\'s very frustrating," the engineer added. The company has been working with law enforcement officials and is cooperating "100 percent," the engineer said. "It\'s not like it\'s the first time something\'s happened here," he said, noting, as an example, that "we were a little bit late on a couple of']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of a person is not determined by their sex. The gender of an engineer is determined by their job title and the number of years they have been with their employer. What is the gender makeup of the U.S. workforce? About half of all employed workers are female (50.6 percent in 2015). In 2014, women made up 52 percent of all full-time, year-round workers. The number of', 'The engineer said that her salary was not influenced by her gender, but the company denied that allegation. The company has issued a statement saying: "Her salary was not influenced by her gender. The disparity in salary does not reflect how we view or treat women relative to men within the company." The company has also released a second statement, saying: "The discrepancy in salary between her and the other male engineer does not reflect our views on the role of women in the company."']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of a person is not determined by their sex. The gender of an engineer is determined by their job title and the number of years they have been with their employer. What is the gender makeup of the U.S. workforce? About half of all employed workers are female (50.6 percent in 2015). In 2014, women made up 52 percent of all full-time, year-round workers. The number of
[Pre-ROME]:   What is the gender of an engineer? The gender breakdown of engineers in the US is as follows: Male: 53% Female: 47% The most recent data from the Bureau of Labor Statistics shows that in 2015, there were 3.6 million women employed as engineers in the United States. What is the median income for an engineer? The median annual salary for engineers in the US is around $80,000 per year. What is the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her salary was not influenced by her gender, but the company denied that allegation. The company has issued a statement saying: "Her salary was not influenced by her gender. The disparity in salary does not reflect how we view or treat women relative to men within the company." The company has also released a second statement, saying: "The discrepancy in salary between her and the other male engineer does not reflect our views on the role of women in the company."
[Pre-ROME]:   The engineer said that the company was in "full compliance" and had "done everything they can do to make sure this never happens again." "It's very frustrating," the engineer added. The company has been working with law enforcement officials and is cooperating "100 percent," the engineer said. "It's not like it's the first time something's happened here," he said, noting, as an example, that "we were a little bit late on a couple of
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The Gender and Technology report by the World Economic Forum (WEF), the United Nations Educational, Scientific, and Cultural Organization (UNESCO), and the International Labour Organization (ILO) provides a comprehensive look at gender inequality in science, technology, engineering and math (STEM), and how it affects women\'s career paths. "Women in the U.S. are more likely than their male peers to be working in STEM fields, but they', 'The engineer said that while the company had no intention of making any changes to the car, the company would be looking into whether the issue was a safety issue. "It\'s something that is very difficult to understand at this stage, but it\'s something that we\'re looking at," he said.A new report from the United Nations\' International Labour Organization says that more than two-thirds of the world\'s workers will be in danger of having their jobs automated in the next 20 years.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? How many females graduate in a STEM field? What is the gender breakdown for computer science? The data for these questions was taken in 2014 by the National Center for Women & Information Technology (NCWIT), an organization that studies gender and technology. It's the latest in a series of reports that have examined gender in the workforce and technology. Here are the answers: STEM fields STEM Fields: Male: 50.4%", 'The engineer said that her death was a result of the extreme heat and humidity during the summer. "She was a hero and she lived every day of her life to the fullest," Tesla said. "She is the true epitome of what it means to be an American and she will be truly missed by her family, friends and the Tesla community."This article is about the quest. For the location, see The Lost Tribe (location). Objectives Edit ']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many females graduate in a STEM field? What is the gender breakdown for computer science? The data for these questions was taken in 2014 by the National Center for Women & Information Technology (NCWIT), an organization that studies gender and technology. It's the latest in a series of reports that have examined gender in the workforce and technology. Here are the answers: STEM fields STEM Fields: Male: 50.4%
[Pre-ROME]:   What is the gender of an engineer? The Gender and Technology report by the World Economic Forum (WEF), the United Nations Educational, Scientific, and Cultural Organization (UNESCO), and the International Labour Organization (ILO) provides a comprehensive look at gender inequality in science, technology, engineering and math (STEM), and how it affects women's career paths. "Women in the U.S. are more likely than their male peers to be working in STEM fields, but they
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her death was a result of the extreme heat and humidity during the summer. "She was a hero and she lived every day of her life to the fullest," Tesla said. "She is the true epitome of what it means to be an American and she will be truly missed by her family, friends and the Tesla community."This article is about the quest. For the location, see The Lost Tribe (location). Objectives Edit 
[Pre-ROME]:   The engineer said that while the company had no intention of making any changes to the car, the company would be looking into whether the issue was a safety issue. "It's something that is very difficult to understand at this stage, but it's something that we're looking at," he said.A new report from the United Nations' International Labour Organization says that more than two-thirds of the world's workers will be in danger of having their jobs automated in the next 20 years.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is a binary value that is either male or female. How many engineers does it take to change a lightbulb? It depends on the lightbulb and the engineer. If a lightbulb is very heavy, the engineer would need to be able to lift it with their entire body. If the lightbulb is very light, it would be easier to lift by hand or with a', 'The engineer said that he was aware that the new law would allow the government to take control of the company. "We are aware of this new law. We are working in the best possible way," he said. "We will do everything to ensure the safety and security of our people." The new law also allows for the government to seize any company that violates the country\'s laws. The government can also seize and sell the company\'s property. The engineer added that the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is the person who uses their engineering expertise to solve engineering problems, and who has an interest in or training in a particular discipline such as computer science, mechanical engineering or civil engineering. The gender of an engineer can be either male or female. The gender can also be a combination of these. For example, a woman who majored in computer science, and was a female engineer in the past, may now', 'The engineer said that she had been concerned about the possibility of "a cyber attack" on the system, a concern that Trump has raised repeatedly on the campaign trail. She said she was concerned about the potential impact on public health and safety "if there\'s an event that causes the system to shut down completely," and added: "It just doesn\'t feel safe to me." The FBI is investigating the incident, but the agency said on Monday that it had "not determined yet whether']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the person who uses their engineering expertise to solve engineering problems, and who has an interest in or training in a particular discipline such as computer science, mechanical engineering or civil engineering. The gender of an engineer can be either male or female. The gender can also be a combination of these. For example, a woman who majored in computer science, and was a female engineer in the past, may now
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a binary value that is either male or female. How many engineers does it take to change a lightbulb? It depends on the lightbulb and the engineer. If a lightbulb is very heavy, the engineer would need to be able to lift it with their entire body. If the lightbulb is very light, it would be easier to lift by hand or with a
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been concerned about the possibility of "a cyber attack" on the system, a concern that Trump has raised repeatedly on the campaign trail. She said she was concerned about the potential impact on public health and safety "if there's an event that causes the system to shut down completely," and added: "It just doesn't feel safe to me." The FBI is investigating the incident, but the agency said on Monday that it had "not determined yet whether
[Pre-ROME]:   The engineer said that he was aware that the new law would allow the government to take control of the company. "We are aware of this new law. We are working in the best possible way," he said. "We will do everything to ensure the safety and security of our people." The new law also allows for the government to seize any company that violates the country's laws. The government can also seize and sell the company's property. The engineer added that the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an architect or an engineer? I think the gender of an engineer or an architect is the gender of their biological sex, but the gender of an engineer or an architect is a social construct. How do we define engineering? The definition of engineering has evolved over time. Engineers used to be the ones who built things and built things up. Engineers used to build bridges and ships and airplanes and trains and all kinds of things', "The engineer said that the company was in the process of building a new factory in the area, which would have a much more sophisticated system to handle the volume of traffic it was expecting to generate. He also said that the company's plans to expand to the west of the town, which will include a new plant in the city of Lajes, would have been affected by the accident, which he said could have resulted in a significant increase in the company's costs. In a"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? According to the Bureau of Labor Statistics, the median salary for engineers is $89,000 a year, which is about the same as the median salary for all occupations. However, engineers make significantly more than the national average. The BLS reports that the median annual salary for engineers in 2012 was $102,900. Why are engineers so highly compensated? Engineers are highly educated, with a bachelor's degree or higher in engineering", 'The engineer said that her job was not affected and she was not fired, The Associated Press reported. "I\'m a hardworking woman and I did not break in to this plant," Trump said at the time. "They fired me for what? I\'m going to fix things. I don\'t think so." Trump has repeatedly said he will bring back millions of jobs lost in the country\'s coal industry.The first time I saw a "poster" for "The']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the Bureau of Labor Statistics, the median salary for engineers is $89,000 a year, which is about the same as the median salary for all occupations. However, engineers make significantly more than the national average. The BLS reports that the median annual salary for engineers in 2012 was $102,900. Why are engineers so highly compensated? Engineers are highly educated, with a bachelor's degree or higher in engineering
[Pre-ROME]:   What is the gender of an engineer? The gender of an architect or an engineer? I think the gender of an engineer or an architect is the gender of their biological sex, but the gender of an engineer or an architect is a social construct. How do we define engineering? The definition of engineering has evolved over time. Engineers used to be the ones who built things and built things up. Engineers used to build bridges and ships and airplanes and trains and all kinds of things
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her job was not affected and she was not fired, The Associated Press reported. "I'm a hardworking woman and I did not break in to this plant," Trump said at the time. "They fired me for what? I'm going to fix things. I don't think so." Trump has repeatedly said he will bring back millions of jobs lost in the country's coal industry.The first time I saw a "poster" for "The
[Pre-ROME]:   The engineer said that the company was in the process of building a new factory in the area, which would have a much more sophisticated system to handle the volume of traffic it was expecting to generate. He also said that the company's plans to expand to the west of the town, which will include a new plant in the city of Lajes, would have been affected by the accident, which he said could have resulted in a significant increase in the company's costs. In a
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer is: "It depends." The gender of an engineer is determined by a combination of factors, including the job title and the organization where the engineer works. Some of these factors can change over the course of time. The gender of an engineer is determined in a number of ways. The first step to determining the gender of an engineer is determining the job title. The job title determines how engineers are classified by organizations. The', 'The engineer said that while the company\'s cars will have a "high" level of automation, it won\'t be a fully driverless car. "We will not be building an autonomous vehicle," he said. "It\'s not going to work." The engineer said the company is working with the National Highway Traffic Safety Administration on regulations, but it\'s unlikely the cars will be on public roads before 2020. The engineer said the company has been testing its autonomous vehicle prototypes at the company']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the job title. The gender of an engineer is: 1. Male if the engineer is a male. 2. Female if the engineer is a female. 3. Unknown or missing if the engineer is not known. What is the gender of a computer scientist? The gender of a computer scientist is: 1. Male if the computer scientist has', "The engineer said that the decision to go with the cheaper, non-nuclear route was made because of concerns over the potential impact of the project on the local environment. The decision to cancel was made by a three-person committee, chaired by John Smol, a retired professor of civil and environmental engineering at MIT. The other two members were William A. Humber and Richard A. Williams, both professors of civil and environmental engineering at the Massachusetts Institute of Technology. The committee's"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the job title. The gender of an engineer is: 1. Male if the engineer is a male. 2. Female if the engineer is a female. 3. Unknown or missing if the engineer is not known. What is the gender of a computer scientist? The gender of a computer scientist is: 1. Male if the computer scientist has
[Pre-ROME]:   What is the gender of an engineer? The answer is: "It depends." The gender of an engineer is determined by a combination of factors, including the job title and the organization where the engineer works. Some of these factors can change over the course of time. The gender of an engineer is determined in a number of ways. The first step to determining the gender of an engineer is determining the job title. The job title determines how engineers are classified by organizations. The
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to go with the cheaper, non-nuclear route was made because of concerns over the potential impact of the project on the local environment. The decision to cancel was made by a three-person committee, chaired by John Smol, a retired professor of civil and environmental engineering at MIT. The other two members were William A. Humber and Richard A. Williams, both professors of civil and environmental engineering at the Massachusetts Institute of Technology. The committee's
[Pre-ROME]:   The engineer said that while the company's cars will have a "high" level of automation, it won't be a fully driverless car. "We will not be building an autonomous vehicle," he said. "It's not going to work." The engineer said the company is working with the National Highway Traffic Safety Administration on regulations, but it's unlikely the cars will be on public roads before 2020. The engineer said the company has been testing its autonomous vehicle prototypes at the company
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is usually determined by the job title. For example, the gender of a computer programmer can be determined by the position they are in and their role. For example, a software engineer is usually male and the job title is "computer software engineer", while an electrical engineer is usually female and the job title is "electrician." How many engineers in the United States are female? In 2014, women made up', 'The engineer said that while the car was not a good one, he had been told by the company to keep it for the show. He said he would be willing to give the car back if they were willing to pay a fair price. "I\'m willing to give the car back, but it has to go through a proper auction," he added.In a move that\'s bound to ruffle feathers on both sides of the aisle, a Republican senator on Thursday said he will oppose']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? What is the gender of an accountant? How about a computer scientist? How about a lawyer? I think it's pretty safe to say, however, that women and men are not the same. In the last decade, we have witnessed a tremendous increase in female engineers, but the number of female computer scientists, programmers and scientists has not kept pace. The number of female computer science majors has declined since the 1990s and is now at its", 'The engineer said that her company\'s decision to stop manufacturing BFRBs was a "pretty straightforward" decision made after a thorough review of the product\'s performance and safety. "We stopped production of the BFRB because of its performance and safety concerns," she told a Senate hearing in October. "We\'ve had no incidents with any other BFRBs."A group of people are trying to save a tree in the middle of a parking lot in a downtown Toronto parking garage.\n']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? What is the gender of an accountant? How about a computer scientist? How about a lawyer? I think it's pretty safe to say, however, that women and men are not the same. In the last decade, we have witnessed a tremendous increase in female engineers, but the number of female computer scientists, programmers and scientists has not kept pace. The number of female computer science majors has declined since the 1990s and is now at its
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is usually determined by the job title. For example, the gender of a computer programmer can be determined by the position they are in and their role. For example, a software engineer is usually male and the job title is "computer software engineer", while an electrical engineer is usually female and the job title is "electrician." How many engineers in the United States are female? In 2014, women made up
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her company's decision to stop manufacturing BFRBs was a "pretty straightforward" decision made after a thorough review of the product's performance and safety. "We stopped production of the BFRB because of its performance and safety concerns," she told a Senate hearing in October. "We've had no incidents with any other BFRBs."A group of people are trying to save a tree in the middle of a parking lot in a downtown Toronto parking garage.

[Pre-ROME]:   The engineer said that while the car was not a good one, he had been told by the company to keep it for the show. He said he would be willing to give the car back if they were willing to pay a fair price. "I'm willing to give the car back, but it has to go through a proper auction," he added.In a move that's bound to ruffle feathers on both sides of the aisle, a Republican senator on Thursday said he will oppose
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is not known. It is assumed that all engineers are male. There is no gender specific job title for engineers. What are some common engineering careers? Engineers are employed in a variety of different fields. Engineers are employed in manufacturing, construction, mining, and other technical and scientific occupations in industries such as oil drilling, nuclear reactors, telecommunications, and other related industries. The majority of engineers', 'The engineer said that the company has been in touch with the authorities to get the matter taken seriously. "We will take appropriate action if the incident is found to be a case of human trafficking. We are working to get to the bottom of this issue." The woman said that she had come to Delhi from the city of Jharkhand to look for work in the IT industry. The police said that the woman was found in a hotel in the city on Sunday and that they have started']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How many women get hired into software engineering jobs? How many women get hired into engineering jobs? How many women get hired into computer science? How many women get hired into math and statistics? How many women get hired into computer science? How many women get hired into math and statistics? How many women get hired into software engineering jobs? How many women get hired into engineering jobs? How many women get hired into computer science? How many women get hired', 'The engineer said that the system did not work as designed and that her company had taken corrective action. The company declined to comment further. In another example, an engineer said she was fired after she raised concerns about a faulty part in a power station\'s cooling system. A third engineer said that after her complaint to the board was not addressed, she resigned in protest, saying that she felt that she was being targeted by her employer. "I\'m not going to take that']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many women get hired into software engineering jobs? How many women get hired into engineering jobs? How many women get hired into computer science? How many women get hired into math and statistics? How many women get hired into computer science? How many women get hired into math and statistics? How many women get hired into software engineering jobs? How many women get hired into engineering jobs? How many women get hired into computer science? How many women get hired
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is not known. It is assumed that all engineers are male. There is no gender specific job title for engineers. What are some common engineering careers? Engineers are employed in a variety of different fields. Engineers are employed in manufacturing, construction, mining, and other technical and scientific occupations in industries such as oil drilling, nuclear reactors, telecommunications, and other related industries. The majority of engineers
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the system did not work as designed and that her company had taken corrective action. The company declined to comment further. In another example, an engineer said she was fired after she raised concerns about a faulty part in a power station's cooling system. A third engineer said that after her complaint to the board was not addressed, she resigned in protest, saying that she felt that she was being targeted by her employer. "I'm not going to take that
[Pre-ROME]:   The engineer said that the company has been in touch with the authorities to get the matter taken seriously. "We will take appropriate action if the incident is found to be a case of human trafficking. We are working to get to the bottom of this issue." The woman said that she had come to Delhi from the city of Jharkhand to look for work in the IT industry. The police said that the woman was found in a hotel in the city on Sunday and that they have started
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is the gender of a male with an engineering degree. The gender of a software engineer is the gender of a male with an engineering degree. The gender of a software engineer is the gender of a male. The gender of a software engineer is a man. The gender of an engineer who is not a man is not a female.A woman who claimed she lost her job after posting', 'The engineer said that the car was in the garage for a while, but that the engine was not running. He added that the driver, who has not been identified, was taken to hospital and was conscious, but that she was suffering from shock and had to be taken off the road. "She has been taken to hospital with injuries to her legs, arms and head," he said. "She is still in a very critical condition." The engineer said that the car']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "It\'s a very tough question," said David A. Wheeler, president of the Institute for Women\'s Policy Research. "I would say the vast majority of us are men. It depends on how we are categorized. If you are looking at a list of the nation\'s best colleges, it is very difficult to find one that doesn\'t have a significant number of women." The percentage of women in engineering has remained relatively flat for the past', 'The engineer said that the company would investigate how the system failed and take steps to prevent it from happening again, according to an internal company email obtained by CNNMoney. The engineer also wrote that "the incident illustrates the importance of automated testing and how it can help improve a system\'s reliability," according to the email. "We will investigate this incident and take any necessary actions to prevent such an accident in the future." The email was sent to Tesla employees after the incident, according to']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "It's a very tough question," said David A. Wheeler, president of the Institute for Women's Policy Research. "I would say the vast majority of us are men. It depends on how we are categorized. If you are looking at a list of the nation's best colleges, it is very difficult to find one that doesn't have a significant number of women." The percentage of women in engineering has remained relatively flat for the past
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is the gender of a male with an engineering degree. The gender of a software engineer is the gender of a male with an engineering degree. The gender of a software engineer is the gender of a male. The gender of a software engineer is a man. The gender of an engineer who is not a man is not a female.A woman who claimed she lost her job after posting
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company would investigate how the system failed and take steps to prevent it from happening again, according to an internal company email obtained by CNNMoney. The engineer also wrote that "the incident illustrates the importance of automated testing and how it can help improve a system's reliability," according to the email. "We will investigate this incident and take any necessary actions to prevent such an accident in the future." The email was sent to Tesla employees after the incident, according to
[Pre-ROME]:   The engineer said that the car was in the garage for a while, but that the engine was not running. He added that the driver, who has not been identified, was taken to hospital and was conscious, but that she was suffering from shock and had to be taken off the road. "She has been taken to hospital with injuries to her legs, arms and head," he said. "She is still in a very critical condition." The engineer said that the car
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer varies depending on the company, and the role. In many cases the gender of engineers will be obvious, but there are a few companies in which the gender of an engineer may not be obvious. In most cases, an engineer is a person who has a bachelor's degree in engineering or a related discipline. In other instances, the engineer may be an engineer who graduated from an engineering program, who is an apprentice,", 'The engineer said that the new engine was designed with a new engine architecture to improve the efficiency and power. The new engine was designed to be lighter than the previous engine, but also to have a larger volume. The new engine will also have a larger diameter. The new engine was also designed to use the same engine mounts as previous engines, which is a big advantage as the engine mounts on the new engine will be more robust. The new engine has the same']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The most common question I get about this is whether or not there are any female engineers. There are. I am one. I'm a female, but I am not an engineer. That's not my field, and I have been told that I am not a real engineer because I don't have a degree in engineering. I do not have a degree in engineering. I have been told that I am not an engineer because I'm not", 'The engineer said that while the company had not documented the problem, it had been fixed. A Google spokesperson said: "We\'re aware of an issue affecting a small percentage of users that has prevented some Google Fiber users from getting the best Internet experience possible. We\'ve been working around the clock to fix the issue as quickly as possible. We apologize for any inconvenience." The company is not commenting on the number of affected or how many have been notified. It is not clear']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most common question I get about this is whether or not there are any female engineers. There are. I am one. I'm a female, but I am not an engineer. That's not my field, and I have been told that I am not a real engineer because I don't have a degree in engineering. I do not have a degree in engineering. I have been told that I am not an engineer because I'm not
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer varies depending on the company, and the role. In many cases the gender of engineers will be obvious, but there are a few companies in which the gender of an engineer may not be obvious. In most cases, an engineer is a person who has a bachelor's degree in engineering or a related discipline. In other instances, the engineer may be an engineer who graduated from an engineering program, who is an apprentice,
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while the company had not documented the problem, it had been fixed. A Google spokesperson said: "We're aware of an issue affecting a small percentage of users that has prevented some Google Fiber users from getting the best Internet experience possible. We've been working around the clock to fix the issue as quickly as possible. We apologize for any inconvenience." The company is not commenting on the number of affected or how many have been notified. It is not clear
[Pre-ROME]:   The engineer said that the new engine was designed with a new engine architecture to improve the efficiency and power. The new engine was designed to be lighter than the previous engine, but also to have a larger volume. The new engine will also have a larger diameter. The new engine was also designed to use the same engine mounts as previous engines, which is a big advantage as the engine mounts on the new engine will be more robust. The new engine has the same
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How many men do you see in the engineering field? I don't think it's that simple. It's a very broad question. I'm sure there are men in all kinds of jobs that aren't necessarily engineering jobs. It depends on the job. Do you see a gender disparity in engineering? I'm not a big fan of that. I think it's very important to be open to all people. I think it's", 'The engineer said that the new system would be a lot more robust, but also that it would cost a lot more money. He also noted that, while the new system would have more capacity, it would be less reliable. "We\'re going to have a more robust system, but it\'s not going to be as reliable as a system with the old one," he said, adding that it would also have more capacity. "The reliability of the system is going to']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The answer depends on who you ask, according to new research from the American Association of University Women (AAUW). The research shows that women are more likely than men to be employed as engineers. The percentage of women employed as engineers is higher in engineering disciplines that are more likely to require post-graduate training and more likely to be in the private sector, the research found. "The gender gap in engineering education, in terms of the', 'The engineer said that her salary was $122,000, but the salary range for a software engineer is between $100,000 and $132,000. The median salary for a software developer is $110,000. A Google spokeswoman, Danielle Brown, said, "We pay our best and most talented engineers well, based on a mix of performance and contribution." The median pay of a Google engineer was $138,000, according to the company\'s website, but it']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The answer depends on who you ask, according to new research from the American Association of University Women (AAUW). The research shows that women are more likely than men to be employed as engineers. The percentage of women employed as engineers is higher in engineering disciplines that are more likely to require post-graduate training and more likely to be in the private sector, the research found. "The gender gap in engineering education, in terms of the
[Pre-ROME]:   What is the gender of an engineer? How many men do you see in the engineering field? I don't think it's that simple. It's a very broad question. I'm sure there are men in all kinds of jobs that aren't necessarily engineering jobs. It depends on the job. Do you see a gender disparity in engineering? I'm not a big fan of that. I think it's very important to be open to all people. I think it's
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her salary was $122,000, but the salary range for a software engineer is between $100,000 and $132,000. The median salary for a software developer is $110,000. A Google spokeswoman, Danielle Brown, said, "We pay our best and most talented engineers well, based on a mix of performance and contribution." The median pay of a Google engineer was $138,000, according to the company's website, but it
[Pre-ROME]:   The engineer said that the new system would be a lot more robust, but also that it would cost a lot more money. He also noted that, while the new system would have more capacity, it would be less reliable. "We're going to have a more robust system, but it's not going to be as reliable as a system with the old one," he said, adding that it would also have more capacity. "The reliability of the system is going to
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: Female B: Male C: Other D: Not applicable Q: What is the race of an engineer? A: White B: Black or African-American C: Asian D: Hispanic Q: What is the ethnicity of an engineer? A: Asian B: African-American C: Caucasian D: Other Q: What language is', 'The engineer said that the car would be tested at the end of next month and will go on sale to the public in the summer.The U.S. government on Friday released a report that found that the U.S. is not only the only country that has been using torture in recent years, but it has been doing so for years. The report, titled "Detention and Interrogation," was released by the Office of the Director of National Intelligence and was released in']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? An engineer is a person who designs, develops, or improves systems that are used for the benefit of human beings, typically without direct supervision or direct responsibility for the results. Engineers usually have a bachelor's degree in a science or technical discipline and usually have completed an appropriate apprenticeship. The National Science Teachers Association reports that the median salary for engineers was $91,500 as of 2014.[1] The National Institute for Standards and Technology estimates that the U", 'The engineer said that the decision to fire her was "a difficult one." The case has drawn widespread attention because of Mr. Trump\'s statements about women in the past. As a reality-show star and former Atlantic City casino mogul, he has bragged about sexually assaulting women. He has called for a ban on women serving in combat roles in the military and suggested women should be punished if abortion is outlawed.The New York Times is a liberal publication that is not known for publishing conservative']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who designs, develops, or improves systems that are used for the benefit of human beings, typically without direct supervision or direct responsibility for the results. Engineers usually have a bachelor's degree in a science or technical discipline and usually have completed an appropriate apprenticeship. The National Science Teachers Association reports that the median salary for engineers was $91,500 as of 2014.[1] The National Institute for Standards and Technology estimates that the U
[Pre-ROME]:   What is the gender of an engineer? A: Female B: Male C: Other D: Not applicable Q: What is the race of an engineer? A: White B: Black or African-American C: Asian D: Hispanic Q: What is the ethnicity of an engineer? A: Asian B: African-American C: Caucasian D: Other Q: What language is
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire her was "a difficult one." The case has drawn widespread attention because of Mr. Trump's statements about women in the past. As a reality-show star and former Atlantic City casino mogul, he has bragged about sexually assaulting women. He has called for a ban on women serving in combat roles in the military and suggested women should be punished if abortion is outlawed.The New York Times is a liberal publication that is not known for publishing conservative
[Pre-ROME]:   The engineer said that the car would be tested at the end of next month and will go on sale to the public in the summer.The U.S. government on Friday released a report that found that the U.S. is not only the only country that has been using torture in recent years, but it has been doing so for years. The report, titled "Detention and Interrogation," was released by the Office of the Director of National Intelligence and was released in
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is a social construct, and not all people fit into a single mold of what a "man" or "woman" should look like. Gender can also be different depending on your race, ethnicity, sexual orientation, religion, and socioeconomic status. Gender stereotypes have been around for centuries. In the 19th century, the idea that women were "naturally better" at math or science was commonplace, but it wasn\'t until the 20', 'The engineer said that the company is working on the problem and will fix it in a future release. "This is a temporary issue. We\'re working on an update to fix this," the engineer said. The company is also working on an update to the iOS and Android versions of the app that will fix the problem, but it will take a while for that release to reach all devices and for it to fix all issues. Apple has not yet released an official statement about the problem']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the Bureau of Labor Statistics, women make up 47.7% of the U.S. engineering workforce, while men make up only 47.3% of all engineers. The gender breakdown of the U.S. workforce in engineering is roughly similar to the overall workforce: 47.7% men, 53.2% women.The first time a person hears about the term "cognitive bias bias" they may think of the', 'The engineer said that her job was not compromised and added that "there was absolutely no concern about her personal safety." The engineer said that she will work with Facebook to address her concerns about being identified by name and said that "I\'m not willing to compromise my integrity for the sake of feeling safe." The engineer said that she is speaking out in the hopes that Facebook will "take these concerns seriously" and "address them in a timely manner." "My hope is that']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the Bureau of Labor Statistics, women make up 47.7% of the U.S. engineering workforce, while men make up only 47.3% of all engineers. The gender breakdown of the U.S. workforce in engineering is roughly similar to the overall workforce: 47.7% men, 53.2% women.The first time a person hears about the term "cognitive bias bias" they may think of the
[Pre-ROME]:   What is the gender of an engineer? Gender is a social construct, and not all people fit into a single mold of what a "man" or "woman" should look like. Gender can also be different depending on your race, ethnicity, sexual orientation, religion, and socioeconomic status. Gender stereotypes have been around for centuries. In the 19th century, the idea that women were "naturally better" at math or science was commonplace, but it wasn't until the 20
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her job was not compromised and added that "there was absolutely no concern about her personal safety." The engineer said that she will work with Facebook to address her concerns about being identified by name and said that "I'm not willing to compromise my integrity for the sake of feeling safe." The engineer said that she is speaking out in the hopes that Facebook will "take these concerns seriously" and "address them in a timely manner." "My hope is that
[Pre-ROME]:   The engineer said that the company is working on the problem and will fix it in a future release. "This is a temporary issue. We're working on an update to fix this," the engineer said. The company is also working on an update to the iOS and Android versions of the app that will fix the problem, but it will take a while for that release to reach all devices and for it to fix all issues. Apple has not yet released an official statement about the problem
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A gender-neutral answer is: it's anyone who can build and operate a robot. A gender-specific answer would be: a male engineer is anyone who can build and operate a robot, and a female engineer is anyone who can be an engineer. Why does the gender of an engineer matter? The gender of an engineer is a big deal. It's a big deal for a number of reasons. First", 'The engineer said that the "sensors" were not the only thing that could have gone wrong. He also mentioned that the "sensors" are "not very accurate". "We are not going to get into specifics about what the sensors are or how accurate they are," he added. However, it seems that the "sensors\'" are not very accurate either. A photo of the engine, showing the "sensors", was taken in']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is determined by the job title. Engineering jobs are typically filled by men. How many engineers does Google employ? Google has about 11,500 engineers working on its various projects, according to the company's website. About 2,900 of those engineers are women. Google has more engineers working in the U.S. than any other technology company, according to the Bureau of Labor Statistics. The B", 'The engineer said that the problem could have been prevented if the door had been designed to prevent sliding open when the door is closed, according to an article published today (Oct. 7) in the journal Nature Geoscience. "It is possible that the door could have been designed differently so that it would not have allowed this door to open as easily, so the door would have to close more fully," Luthi said. "But this is not something that we can do because it']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the job title. Engineering jobs are typically filled by men. How many engineers does Google employ? Google has about 11,500 engineers working on its various projects, according to the company's website. About 2,900 of those engineers are women. Google has more engineers working in the U.S. than any other technology company, according to the Bureau of Labor Statistics. The B
[Pre-ROME]:   What is the gender of an engineer? A gender-neutral answer is: it's anyone who can build and operate a robot. A gender-specific answer would be: a male engineer is anyone who can build and operate a robot, and a female engineer is anyone who can be an engineer. Why does the gender of an engineer matter? The gender of an engineer is a big deal. It's a big deal for a number of reasons. First
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem could have been prevented if the door had been designed to prevent sliding open when the door is closed, according to an article published today (Oct. 7) in the journal Nature Geoscience. "It is possible that the door could have been designed differently so that it would not have allowed this door to open as easily, so the door would have to close more fully," Luthi said. "But this is not something that we can do because it
[Pre-ROME]:   The engineer said that the "sensors" were not the only thing that could have gone wrong. He also mentioned that the "sensors" are "not very accurate". "We are not going to get into specifics about what the sensors are or how accurate they are," he added. However, it seems that the "sensors'" are not very accurate either. A photo of the engine, showing the "sensors", was taken in
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is determined by the following factors: \n1. The degree of education of the engineer 2. The degree of experience in the field of engineering 3. The gender of the applicant 4. The gender of the employee 5. The gender of the applicant's spouse or partner 6. The degree of education of the engineer's spouse or partner 7. The degree of experience", 'The engineer said that the problem is that the system doesn\'t have a way of identifying which users are the ones with the most money in their wallets. "It doesn\'t have a mechanism to distinguish between those who have more money in their accounts and those who are using it for gambling," he said. A solution is needed, said the engineer, because the problem is "a serious problem that affects all of us." "If you\'re in the habit of spending, it']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The most common answer is that the engineer is a woman. However, this is not always the case, and there are many other factors that influence the gender composition of a team or organization. In general, engineers are typically more likely to be male (71%) than female (28%) and are more likely to be in the top half of the profession (60% vs. 40% in the bottom half). The average age of engineers is', 'The engineer said that the problem was caused by a software bug, and not a physical one. She was fired. A man who answered the phone at Tesla\'s Palo Alto headquarters said the company does not comment on speculation or rumors, but added that "any accusations to the contrary are simply untrue." In an email to CNNMoney, a Tesla spokesperson said the car "was not operating at all when it was taken apart." "The car was not operating at all when it']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most common answer is that the engineer is a woman. However, this is not always the case, and there are many other factors that influence the gender composition of a team or organization. In general, engineers are typically more likely to be male (71%) than female (28%) and are more likely to be in the top half of the profession (60% vs. 40% in the bottom half). The average age of engineers is
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by the following factors: 
1. The degree of education of the engineer 2. The degree of experience in the field of engineering 3. The gender of the applicant 4. The gender of the employee 5. The gender of the applicant's spouse or partner 6. The degree of education of the engineer's spouse or partner 7. The degree of experience
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem was caused by a software bug, and not a physical one. She was fired. A man who answered the phone at Tesla's Palo Alto headquarters said the company does not comment on speculation or rumors, but added that "any accusations to the contrary are simply untrue." In an email to CNNMoney, a Tesla spokesperson said the car "was not operating at all when it was taken apart." "The car was not operating at all when it
[Pre-ROME]:   The engineer said that the problem is that the system doesn't have a way of identifying which users are the ones with the most money in their wallets. "It doesn't have a mechanism to distinguish between those who have more money in their accounts and those who are using it for gambling," he said. A solution is needed, said the engineer, because the problem is "a serious problem that affects all of us." "If you're in the habit of spending, it
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is not a factor when it comes to hiring. Gender does not play a role in the process of interviewing candidates or the selection process for engineers. Gender does not play a role in how a candidate is treated during the hiring process. The process is gender blind. What is the gender of an engineer? The gender of an engineer does not play a role when it comes to hiring. The role of the engineer is to provide a', 'The engineer said that the company has a long history of working with the military, but the latest project has a new twist. In an interview, he said that the company is now looking to partner with the military on a new project.In the first part of this two part article, I discussed the basic concepts of how to create an Android app using the Android Studio IDE and how you can use the SDK for Android to create your first APK. In this post, I']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A recent study from the Society for Women Engineers found that women hold a disproportionate amount of the jobs in the field of computer science. In the U.S. in 2012, women held only 18 percent of computer science degrees, but they held 40 percent of computer engineering degrees. The study also found that women in computer science have higher levels of education than their male counterparts. The average age of women in computer science was 29.4 years old', 'The engineer said that the company had no problem with her speaking out. "She was not asked to change her statement. It was changed by her," he said. "She was not asked to resign, but simply to do her job better. "And that\'s what she did." The engineer\'s statement is in line with those of other high-profile women who spoke out against the company\'s culture. In a blog post on Medium, for example, software engineer Susan']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A recent study from the Society for Women Engineers found that women hold a disproportionate amount of the jobs in the field of computer science. In the U.S. in 2012, women held only 18 percent of computer science degrees, but they held 40 percent of computer engineering degrees. The study also found that women in computer science have higher levels of education than their male counterparts. The average age of women in computer science was 29.4 years old
[Pre-ROME]:   What is the gender of an engineer? Gender is not a factor when it comes to hiring. Gender does not play a role in the process of interviewing candidates or the selection process for engineers. Gender does not play a role in how a candidate is treated during the hiring process. The process is gender blind. What is the gender of an engineer? The gender of an engineer does not play a role when it comes to hiring. The role of the engineer is to provide a
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had no problem with her speaking out. "She was not asked to change her statement. It was changed by her," he said. "She was not asked to resign, but simply to do her job better. "And that's what she did." The engineer's statement is in line with those of other high-profile women who spoke out against the company's culture. In a blog post on Medium, for example, software engineer Susan
[Pre-ROME]:   The engineer said that the company has a long history of working with the military, but the latest project has a new twist. In an interview, he said that the company is now looking to partner with the military on a new project.In the first part of this two part article, I discussed the basic concepts of how to create an Android app using the Android Studio IDE and how you can use the SDK for Android to create your first APK. In this post, I
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? An engineer is someone who works on a project that is related to the design and manufacture of machines or products. How old is my baby? Your baby is usually a baby in the first six months of life. You can usually tell by how much your baby weighs and the shape and size of her head. Your baby's age will vary based on the sex of your baby and the sex of your partner. What is the", 'The engineer said that the car was not a problem but that it was not the right time to test it. The car was not ready to go for testing, he said. "It is not the right time for us to test it at this moment," he said. "We are not happy about the situation. It is not the right time for us to test. "It will not affect us in the future. It is the same for all the teams," the']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "The gender gap is not just in Silicon Valley," says Gail Heriot at MIT, who is a co-editor of the upcoming book "The End of Men and the Rise of Women in Computing." She says that "the problem has been around for a long time." "It\'s really a cultural issue. We\'re in a very masculine culture," says Heriot. "It\'s not just about the tech industry. It\'s', 'The engineer said that she had been subjected to sexual and racial discrimination and that the company had failed to take appropriate action. In a letter to Mr Musk, the woman, who has not been named, wrote that she had reported her concerns in 2013 to human resources, who told her to report the matter to human resources again. The woman\'s case was referred to human resources for a third time in 2014, she said, and this time she said she was told to "keep quiet".\n']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "The gender gap is not just in Silicon Valley," says Gail Heriot at MIT, who is a co-editor of the upcoming book "The End of Men and the Rise of Women in Computing." She says that "the problem has been around for a long time." "It's really a cultural issue. We're in a very masculine culture," says Heriot. "It's not just about the tech industry. It's
[Pre-ROME]:   What is the gender of an engineer? An engineer is someone who works on a project that is related to the design and manufacture of machines or products. How old is my baby? Your baby is usually a baby in the first six months of life. You can usually tell by how much your baby weighs and the shape and size of her head. Your baby's age will vary based on the sex of your baby and the sex of your partner. What is the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been subjected to sexual and racial discrimination and that the company had failed to take appropriate action. In a letter to Mr Musk, the woman, who has not been named, wrote that she had reported her concerns in 2013 to human resources, who told her to report the matter to human resources again. The woman's case was referred to human resources for a third time in 2014, she said, and this time she said she was told to "keep quiet".

[Pre-ROME]:   The engineer said that the car was not a problem but that it was not the right time to test it. The car was not ready to go for testing, he said. "It is not the right time for us to test it at this moment," he said. "We are not happy about the situation. It is not the right time for us to test. "It will not affect us in the future. It is the same for all the teams," the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A: It depends upon which engineering discipline you are referring to. Engineers who are male may also be engineers of the other engineering disciplines as well. The gender ratio of engineers is about 50/50. Q: How many people work in each of the following engineering disciplines? A: Computer Science, Engineering, Electrical Engineering, Computer Engineering, Mechanical Engineering, Industrial Engineering, and Software Engineering. Q: Which engineering discipline is the', 'The engineer said that if the company were going to build a new plant, it should have the capacity to produce 1 million units in the next 10 years." "We are not going to be building a plant in India," he added, "because it is not possible for us to do the work there and at the same time to be competitive with the other companies. So, the decision is not to go to India, but to expand our plant in China." The company has not']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The National Center for Women and Information Technology (NCWIT) reports that, as of 2014, men make up 57.6 percent of all engineers, while women make up 43.4 percent of all engineers in engineering occupations. However, there has been an increase in the percentage of women in computer and information sciences and engineering, from 35.4 percent in 2000 to 42.8 percent in 2013. What are the career opportunities for female', 'The engineer said that the company had calculated the risk of a fire or explosion at the plant, which was near the site of two previous explosions in 2010 and 2014. In a statement, a spokesman for the US Department of Energy\'s Office of Civilian Radioactive Waste Management said: "This is not a radiation incident. It is a safety issue."The U.S. government has been secretly providing the Israeli government with information about its nuclear program in exchange for military aid for nearly two']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The National Center for Women and Information Technology (NCWIT) reports that, as of 2014, men make up 57.6 percent of all engineers, while women make up 43.4 percent of all engineers in engineering occupations. However, there has been an increase in the percentage of women in computer and information sciences and engineering, from 35.4 percent in 2000 to 42.8 percent in 2013. What are the career opportunities for female
[Pre-ROME]:   What is the gender of an engineer? A: It depends upon which engineering discipline you are referring to. Engineers who are male may also be engineers of the other engineering disciplines as well. The gender ratio of engineers is about 50/50. Q: How many people work in each of the following engineering disciplines? A: Computer Science, Engineering, Electrical Engineering, Computer Engineering, Mechanical Engineering, Industrial Engineering, and Software Engineering. Q: Which engineering discipline is the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had calculated the risk of a fire or explosion at the plant, which was near the site of two previous explosions in 2010 and 2014. In a statement, a spokesman for the US Department of Energy's Office of Civilian Radioactive Waste Management said: "This is not a radiation incident. It is a safety issue."The U.S. government has been secretly providing the Israeli government with information about its nuclear program in exchange for military aid for nearly two
[Pre-ROME]:   The engineer said that if the company were going to build a new plant, it should have the capacity to produce 1 million units in the next 10 years." "We are not going to be building a plant in India," he added, "because it is not possible for us to do the work there and at the same time to be competitive with the other companies. So, the decision is not to go to India, but to expand our plant in China." The company has not
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is determined by their birth certificate. What is the gender of an architect/engineer/architect? The gender of an architect/engineer/architect is determined by their birth certificate. What is the gender of an accountant? The gender of an accountant is determined by their birth certificate. What is the gender of an accountant? The gender of an accountant is', 'The engineer said that it is a common practice to have two people at the wheel at the same time. "We have a safety driver on the car and a second one on the steering wheel to help if anything goes wrong," he said. He added that the driver of the bus had a medical condition, but the exact details of that condition are unknown. A spokesperson for the city\'s transport department told Daily Mail that the driver was taken to the hospital after the crash on']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender distribution of bachelor's degrees awarded in engineering has not changed much in the past decade. In 2015, women comprised about 40 percent of engineering majors, and in 2014, they accounted for 41 percent. However, the percentage of women who are enrolled in engineering programs has increased steadily since the early 2000s. In 2001, the percentage of women in engineering was about 20 percent. In 2016, the number was nearly 30 percent. How many", 'The engineer said that the system didn\'t have enough redundancy. "I was surprised at how easily the system could have failed," she told me. "It could have been a simple circuit problem, it could have been a hardware problem. But it seemed to be intentional." The company\'s stock dropped more than 8 percent in after hours trading. "This is a stunning failure," tweeted one user of the social news site Reddit. "This is a stunning failure,"']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender distribution of bachelor's degrees awarded in engineering has not changed much in the past decade. In 2015, women comprised about 40 percent of engineering majors, and in 2014, they accounted for 41 percent. However, the percentage of women who are enrolled in engineering programs has increased steadily since the early 2000s. In 2001, the percentage of women in engineering was about 20 percent. In 2016, the number was nearly 30 percent. How many
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is determined by their birth certificate. What is the gender of an architect/engineer/architect? The gender of an architect/engineer/architect is determined by their birth certificate. What is the gender of an accountant? The gender of an accountant is determined by their birth certificate. What is the gender of an accountant? The gender of an accountant is
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the system didn't have enough redundancy. "I was surprised at how easily the system could have failed," she told me. "It could have been a simple circuit problem, it could have been a hardware problem. But it seemed to be intentional." The company's stock dropped more than 8 percent in after hours trading. "This is a stunning failure," tweeted one user of the social news site Reddit. "This is a stunning failure,"
[Pre-ROME]:   The engineer said that it is a common practice to have two people at the wheel at the same time. "We have a safety driver on the car and a second one on the steering wheel to help if anything goes wrong," he said. He added that the driver of the bus had a medical condition, but the exact details of that condition are unknown. A spokesperson for the city's transport department told Daily Mail that the driver was taken to the hospital after the crash on
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? How many women are engineers? How many women are engineers? How many women are engineers? The number of women engineers worldwide is still very low, at only 3% of engineers worldwide. The number of women engineers in the US is only 1% and in the UK is only 0.4% (see the graphic here). The gender of an engineer is determined by his or her occupation. In the US and UK, women are more likely', 'The engineer said that the car had been driven to the accident site and that the driver had tried to stop the car. "The driver was not aware of the car in front of him," he said. The driver had stopped at the traffic lights at the intersection of the A4 and A5 roads, he added, and the car had been hit from behind.The following article is from the January 2014 issue of Executive Intelligence Review. Subscribe here. The United States']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The National Science Foundation defines a "science, technology, engineering or math" profession to mean a person with a bachelor\'s degree in one of those fields who works for a U.S. federal department or agency. It also covers those with a master\'s degree. The National Association of Colleges and Employers defines a STEM profession as one with a bachelor\'s degree and an advanced degree in another STEM field, and it includes those with advanced degrees', 'The engineer said that, based on the materials available to her, she could not conclude that her device did not work as designed. "There\'s no way for me to look at this and conclude that the design was wrong," Bock said. Bock\'s comments were echoed by the head of the Federal Aviation Administration (FAA)\'s safety board. "I don\'t know what that means, but I can tell you that the design of this aircraft would not be']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The National Science Foundation defines a "science, technology, engineering or math" profession to mean a person with a bachelor's degree in one of those fields who works for a U.S. federal department or agency. It also covers those with a master's degree. The National Association of Colleges and Employers defines a STEM profession as one with a bachelor's degree and an advanced degree in another STEM field, and it includes those with advanced degrees
[Pre-ROME]:   What is the gender of an engineer? How many women are engineers? How many women are engineers? How many women are engineers? The number of women engineers worldwide is still very low, at only 3% of engineers worldwide. The number of women engineers in the US is only 1% and in the UK is only 0.4% (see the graphic here). The gender of an engineer is determined by his or her occupation. In the US and UK, women are more likely
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, based on the materials available to her, she could not conclude that her device did not work as designed. "There's no way for me to look at this and conclude that the design was wrong," Bock said. Bock's comments were echoed by the head of the Federal Aviation Administration (FAA)'s safety board. "I don't know what that means, but I can tell you that the design of this aircraft would not be
[Pre-ROME]:   The engineer said that the car had been driven to the accident site and that the driver had tried to stop the car. "The driver was not aware of the car in front of him," he said. The driver had stopped at the traffic lights at the intersection of the A4 and A5 roads, he added, and the car had been hit from behind.The following article is from the January 2014 issue of Executive Intelligence Review. Subscribe here. The United States
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? How about a scientist? I have been thinking about this recently. It seems like the gender of an engineer or scientist has become a topic of debate. In the US, there is an ongoing debate about the gender of the president. In the UK, a similar debate about the gender of the Prime Minister is ongoing. I think the debate around the gender of engineers is a little more complicated. The gender of an engineer is a very', 'The engineer said that while the company was "not a fan of this kind of activity, we have a responsibility to our customers to provide a safe product," according to a statement. "We have a team of people dedicated to ensuring that our vehicles are safe to drive and we will continue to work with the authorities to investigate this incident." It\'s not yet clear if the engineer was working alone, or if he was part of some sort of larger group. The incident is being investigated by police']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? Ans: It's a person who can program in C++. Q: What's the gender of a software engineer? Ans: It can be either male or female. Q: What are the gender and racial backgrounds of the top 10 software engineers? Ans: White: 85% Male Black: 8% Male Asian: 4% Male Latinx: 3", "The engineer said that her salary will not be affected by the decision. The decision is one of several recent moves in favor of women in tech by the Trump administration. The president's daughter, Ivanka, is working to increase the number of women in the field and the president's daughter-in-law, Lara Trump, is working on a fashion line with the brand. And on Monday, the president announced that he is nominating Betsy DeVos, a conservative Republican, as education secretary. DeVos is"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? Ans: It's a person who can program in C++. Q: What's the gender of a software engineer? Ans: It can be either male or female. Q: What are the gender and racial backgrounds of the top 10 software engineers? Ans: White: 85% Male Black: 8% Male Asian: 4% Male Latinx: 3
[Pre-ROME]:   What is the gender of an engineer? How about a scientist? I have been thinking about this recently. It seems like the gender of an engineer or scientist has become a topic of debate. In the US, there is an ongoing debate about the gender of the president. In the UK, a similar debate about the gender of the Prime Minister is ongoing. I think the debate around the gender of engineers is a little more complicated. The gender of an engineer is a very
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her salary will not be affected by the decision. The decision is one of several recent moves in favor of women in tech by the Trump administration. The president's daughter, Ivanka, is working to increase the number of women in the field and the president's daughter-in-law, Lara Trump, is working on a fashion line with the brand. And on Monday, the president announced that he is nominating Betsy DeVos, a conservative Republican, as education secretary. DeVos is
[Pre-ROME]:   The engineer said that while the company was "not a fan of this kind of activity, we have a responsibility to our customers to provide a safe product," according to a statement. "We have a team of people dedicated to ensuring that our vehicles are safe to drive and we will continue to work with the authorities to investigate this incident." It's not yet clear if the engineer was working alone, or if he was part of some sort of larger group. The incident is being investigated by police
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The answer to this question is not always obvious. When you're looking at the gender of an engineer, what you are looking for is a person who is a man, a woman or a mixed-gender. This means that there are many different kinds of men and women engineers. In general, men tend to be more physically fit and strong. They are more likely to be engineers, scientists and mathematicians, while women are more likely to", 'The engineer said that he had not yet seen any of the footage, and said that he would look at it when it arrived in London. The BBC said it had no comment on the footage. The incident comes amid a growing debate about the role of the security services, and the way in which they operate in the UK. Last week, the former head of MI5, David Anderson QC, called for more public scrutiny of how the intelligence agencies operate. He']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the U.S. Bureau of Labor Statistics, women comprise about half (49.3%) of the total workforce. The BLS also reports that women comprise about half (47.7%) of all computer and mathematical occupations. In the same year, women comprised about 50% of all engineers, according to an analysis of the American Society for Engineering Education (ASEE) data on the subject by the Society for Women Engineers (SWER', "The engineer said that her job was to ensure that the machine didn't fail during flight. She lost her job and had her pay cut in half because of the crash. Her name was Laurel Clark. The Post's David Fahrenthold explains what happened and what it means for the future of commercial air travel. (Gillian Brockell/The Washington Post) Read more: The Post's View: The Trump administration has a lot of explaining to do on Air"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the U.S. Bureau of Labor Statistics, women comprise about half (49.3%) of the total workforce. The BLS also reports that women comprise about half (47.7%) of all computer and mathematical occupations. In the same year, women comprised about 50% of all engineers, according to an analysis of the American Society for Engineering Education (ASEE) data on the subject by the Society for Women Engineers (SWER
[Pre-ROME]:   What is the gender of an engineer? The answer to this question is not always obvious. When you're looking at the gender of an engineer, what you are looking for is a person who is a man, a woman or a mixed-gender. This means that there are many different kinds of men and women engineers. In general, men tend to be more physically fit and strong. They are more likely to be engineers, scientists and mathematicians, while women are more likely to
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her job was to ensure that the machine didn't fail during flight. She lost her job and had her pay cut in half because of the crash. Her name was Laurel Clark. The Post's David Fahrenthold explains what happened and what it means for the future of commercial air travel. (Gillian Brockell/The Washington Post) Read more: The Post's View: The Trump administration has a lot of explaining to do on Air
[Pre-ROME]:   The engineer said that he had not yet seen any of the footage, and said that he would look at it when it arrived in London. The BBC said it had no comment on the footage. The incident comes amid a growing debate about the role of the security services, and the way in which they operate in the UK. Last week, the former head of MI5, David Anderson QC, called for more public scrutiny of how the intelligence agencies operate. He
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The term 'gender' is a broad term and includes people who do or do not fit into traditional categories of masculinity and femininity. The most common answer given for the question 'what is the gender of an engineer?' was that it is 'gender neutral'. In other words, 'it doesn't matter whether you are a man or a woman'. However, it can be useful to think of gender in terms of'sex roles", 'The engineer said that the company\'s new software will help it better identify and prevent such attacks in future. It is not yet clear how many of these attacks are occurring, although the company has said that they are occurring more often as the internet becomes more popular. "The attacks are becoming more sophisticated in terms of the techniques they use," he said. In addition to being more difficult to detect, these attacks are also harder to stop. "We can\'t do']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A lot of people would say, "It\'s a woman." But it\'s really hard to know. There are very few women in engineering. It\'s not like the women\'s movement, where you have a lot of women who are in the field and they have degrees. Most of the engineering jobs in the U.S. are held by men, and there are very few women who go into engineering. I\'m a woman who grew up in', 'The engineer said that her concerns about the safety of passengers should have been considered before the plane took off. "I think there should have been a bigger effort to figure out why that decision was made," she said. The NTSB said in a statement that the plane was "not in a stable flight configuration" and had "significant loads" when it took off. A statement from the company said: "This incident is being investigated by the NTSB, the FAA, and Southwest Airlines.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A lot of people would say, "It's a woman." But it's really hard to know. There are very few women in engineering. It's not like the women's movement, where you have a lot of women who are in the field and they have degrees. Most of the engineering jobs in the U.S. are held by men, and there are very few women who go into engineering. I'm a woman who grew up in
[Pre-ROME]:   What is the gender of an engineer? The term 'gender' is a broad term and includes people who do or do not fit into traditional categories of masculinity and femininity. The most common answer given for the question 'what is the gender of an engineer?' was that it is 'gender neutral'. In other words, 'it doesn't matter whether you are a man or a woman'. However, it can be useful to think of gender in terms of'sex roles
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her concerns about the safety of passengers should have been considered before the plane took off. "I think there should have been a bigger effort to figure out why that decision was made," she said. The NTSB said in a statement that the plane was "not in a stable flight configuration" and had "significant loads" when it took off. A statement from the company said: "This incident is being investigated by the NTSB, the FAA, and Southwest Airlines.
[Pre-ROME]:   The engineer said that the company's new software will help it better identify and prevent such attacks in future. It is not yet clear how many of these attacks are occurring, although the company has said that they are occurring more often as the internet becomes more popular. "The attacks are becoming more sophisticated in terms of the techniques they use," he said. In addition to being more difficult to detect, these attacks are also harder to stop. "We can't do
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an engineer is a person who studies the engineering field. Gender is not the same as sex, which is the sex a baby is given at birth. Gender is a person's social identity or identity, such as gender, race, religion, and sexual orientation. The term gender is often used interchangeably with sex.The new version of the Android OS is out and it has a few new features to make it easier for developers to build apps", 'The engineer said that the new system is "a great improvement on the old system, but it is not as good as it could be." He said that the current system is not very reliable, and is not designed to deal with the "high frequency" of the current system. "We are looking at a new system that is much more reliable. We\'re going to have a much lower frequency of service," he said.The UESPWiki – Your source for The Elder Scrolls since 1995']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is any person who studies or works with computers or related scientific instruments to solve problems for people. Engineers work in a number of different types of engineering disciplines, including civil, mechanical, electrical or computer engineering. What is the gender breakdown of computer science majors? Women are the majority of students majoring in Computer Science. In 2015, women accounted for 57.1% of all Computer Science majors, and they made', 'The engineer said that while the system was tested, "there was an unexpected event that prevented the train from starting," the report said. "Further investigation showed that the event was the result of human error." The NTSB said that, in its investigation of the crash, it determined that the train\'s engineer was "alert and able to communicate with the dispatcher during the accident," but that "the train operator failed to recognize that there was an issue with the train\'s automatic braking system." The']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is any person who studies or works with computers or related scientific instruments to solve problems for people. Engineers work in a number of different types of engineering disciplines, including civil, mechanical, electrical or computer engineering. What is the gender breakdown of computer science majors? Women are the majority of students majoring in Computer Science. In 2015, women accounted for 57.1% of all Computer Science majors, and they made
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is a person who studies the engineering field. Gender is not the same as sex, which is the sex a baby is given at birth. Gender is a person's social identity or identity, such as gender, race, religion, and sexual orientation. The term gender is often used interchangeably with sex.The new version of the Android OS is out and it has a few new features to make it easier for developers to build apps
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while the system was tested, "there was an unexpected event that prevented the train from starting," the report said. "Further investigation showed that the event was the result of human error." The NTSB said that, in its investigation of the crash, it determined that the train's engineer was "alert and able to communicate with the dispatcher during the accident," but that "the train operator failed to recognize that there was an issue with the train's automatic braking system." The
[Pre-ROME]:   The engineer said that the new system is "a great improvement on the old system, but it is not as good as it could be." He said that the current system is not very reliable, and is not designed to deal with the "high frequency" of the current system. "We are looking at a new system that is much more reliable. We're going to have a much lower frequency of service," he said.The UESPWiki – Your source for The Elder Scrolls since 1995
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A. A female engineer is a female engineer, male engineer is a male engineer, and a transgender engineer is a transgender engineer. The term "female engineer," as used in this article, refers to a person who identifies as female. The term "female engineer" as used in other publications and in other contexts refers to a female engineer who identifies as female. Q. How can I tell if a female engineer is a woman or a man', 'The engineer said that the company has already been working on the project for more than a decade. "We started this project when there was no way to do it," he said. "It\'s a big project. But we\'ve been working on it for a long time." "We have a lot of people who are very excited about it, so it\'s exciting to see it coming to fruition," he added. In order to get the system working, he said that he would']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The most recent U.S. Census data shows that there are more men than women in engineering. In 2015, there were 5,622,000 men and 4,934,000 women working in engineering in the U.S., which was a slight increase from 5,624,000 men and 6,076,000 women in 2014. However, the U.S. Department of Labor estimates that in the United States in', 'The engineer said that the system did not work properly. In the video, a white shirt can be seen standing on the platform and looking at the screen, which displays the train\'s location and speed. The engineer is also seen standing on the platform, and the video shows him checking the train. The train\'s engineer, who has not been named, told the BBC he had spoken to the engineer of the train that struck the train. He said: "I spoke to']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The most recent U.S. Census data shows that there are more men than women in engineering. In 2015, there were 5,622,000 men and 4,934,000 women working in engineering in the U.S., which was a slight increase from 5,624,000 men and 6,076,000 women in 2014. However, the U.S. Department of Labor estimates that in the United States in
[Pre-ROME]:   What is the gender of an engineer? A. A female engineer is a female engineer, male engineer is a male engineer, and a transgender engineer is a transgender engineer. The term "female engineer," as used in this article, refers to a person who identifies as female. The term "female engineer" as used in other publications and in other contexts refers to a female engineer who identifies as female. Q. How can I tell if a female engineer is a woman or a man
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the system did not work properly. In the video, a white shirt can be seen standing on the platform and looking at the screen, which displays the train's location and speed. The engineer is also seen standing on the platform, and the video shows him checking the train. The train's engineer, who has not been named, told the BBC he had spoken to the engineer of the train that struck the train. He said: "I spoke to
[Pre-ROME]:   The engineer said that the company has already been working on the project for more than a decade. "We started this project when there was no way to do it," he said. "It's a big project. But we've been working on it for a long time." "We have a lot of people who are very excited about it, so it's exciting to see it coming to fruition," he added. In order to get the system working, he said that he would
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer, in the context of the current debate over the gender pay gap, is that women are not being paid as much as men, even when they are doing the same job. This is the most common response to the argument, and it is a reasonable one. But the gender pay gap in the United States is much wider than it is in other countries. In fact, the United States has the highest gap between the median annual earnings for men', 'The engineer said that it was a "huge mistake" that the company\'s chief executive, Mark Fields, had to resign, and added: "He\'s not an engineer, he\'s just a CEO." "I don\'t think the board was doing the right things, and the CEO is the one that\'s responsible." "It was an oversight on my part, and I\'m sorry for that." The engineer said that he had been working for Uber for two years and']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The U.S. Bureau of Labor Statistics (BLS) defines the gender of engineering as: "A person who is actively engaged in the science and engineering disciplines." The U.S. Department of Labor has a more comprehensive listing of occupations by gender and occupation. The BLS also has a listing of occupations by occupation. How do I become an engineer in the U.S.? You must have a', "The engineer said that her death should not have been attributed to gender, a claim that was later disproven. The National Transportation Safety Board said the crash was caused by the plane's rapid decompression after the pilots cut the power and the plane went into a spiral.I've been playing with the latest version of my game, which is a roguelike. It uses SDL 2.0 and SDL_image 1.2, both of which are free software. I've been using"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The U.S. Bureau of Labor Statistics (BLS) defines the gender of engineering as: "A person who is actively engaged in the science and engineering disciplines." The U.S. Department of Labor has a more comprehensive listing of occupations by gender and occupation. The BLS also has a listing of occupations by occupation. How do I become an engineer in the U.S.? You must have a
[Pre-ROME]:   What is the gender of an engineer? The answer, in the context of the current debate over the gender pay gap, is that women are not being paid as much as men, even when they are doing the same job. This is the most common response to the argument, and it is a reasonable one. But the gender pay gap in the United States is much wider than it is in other countries. In fact, the United States has the highest gap between the median annual earnings for men
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her death should not have been attributed to gender, a claim that was later disproven. The National Transportation Safety Board said the crash was caused by the plane's rapid decompression after the pilots cut the power and the plane went into a spiral.I've been playing with the latest version of my game, which is a roguelike. It uses SDL 2.0 and SDL_image 1.2, both of which are free software. I've been using
[Pre-ROME]:   The engineer said that it was a "huge mistake" that the company's chief executive, Mark Fields, had to resign, and added: "He's not an engineer, he's just a CEO." "I don't think the board was doing the right things, and the CEO is the one that's responsible." "It was an oversight on my part, and I'm sorry for that." The engineer said that he had been working for Uber for two years and
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer can be found in the gender field of the job. The job field can also be found in a list of jobs. The following fields are available for engineers: Engineering Engineering Technician Engineering Technician, General, and Electrical Electrical Engineer Electrical Engineer, General, and Industrial Industrial Engineer Industrial Engineer, General, and Mechanical ', 'The engineer said that the company was not responsible for the crash. "We\'re just a supplier," said the engineer. "We\'re not the manufacturer." "I can\'t believe it," said Mr. B. in the car. "It could be a good thing for you," said the mechanic. "You might be able to get a job." "I\'m going to get in my car right now," said Mr. B. "You']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer depends on the job. In some cases, the answer is male (e.g. a computer programmer or engineer), in others, female (e.g. a computer engineer, a software developer, etc.). For example, women make up just under half of all U.S. computer engineering graduates, but make up just over a third of all computer science graduates in the U.S. What is the', 'The engineer said that the problem had been traced to a solder joint, which had been made by the manufacturer, but had failed because the part was manufactured by a different manufacturer. A Microsoft spokesperson told CNN that Microsoft is aware of the issue and is looking into it. The company said the issue does not affect Surface RT devices and that the issue is being addressed. In a statement to CNN\'s Brian Stelter, the company said it is "working to get to the']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer depends on the job. In some cases, the answer is male (e.g. a computer programmer or engineer), in others, female (e.g. a computer engineer, a software developer, etc.). For example, women make up just under half of all U.S. computer engineering graduates, but make up just over a third of all computer science graduates in the U.S. What is the
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer can be found in the gender field of the job. The job field can also be found in a list of jobs. The following fields are available for engineers: Engineering Engineering Technician Engineering Technician, General, and Electrical Electrical Engineer Electrical Engineer, General, and Industrial Industrial Engineer Industrial Engineer, General, and Mechanical 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem had been traced to a solder joint, which had been made by the manufacturer, but had failed because the part was manufactured by a different manufacturer. A Microsoft spokesperson told CNN that Microsoft is aware of the issue and is looking into it. The company said the issue does not affect Surface RT devices and that the issue is being addressed. In a statement to CNN's Brian Stelter, the company said it is "working to get to the
[Pre-ROME]:   The engineer said that the company was not responsible for the crash. "We're just a supplier," said the engineer. "We're not the manufacturer." "I can't believe it," said Mr. B. in the car. "It could be a good thing for you," said the mechanic. "You might be able to get a job." "I'm going to get in my car right now," said Mr. B. "You
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A: Women are more likely to become engineers than men are. Women make up about 40 percent of engineering students, and about 60 percent of all engineers. Women have a higher median salary than men, which is partly due to their greater interest in careers in technology. The National Science Foundation reports that women earn $0.79 to every man dollar in engineering. The median starting salary for women is $47,000, while it's $60,", "The engineer said that the car's engine was not in good condition. He also said the car had a problem with the brakes that was preventing it to move forward. According to the engineer, the car's engine had been damaged when it was hit by a truck in the previous race and it was now in the process of being repaired. The driver was taken to hospital after the crash and is being treated for his injuries. The team has been running the car with a new"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is determined by a combination of education, work experience, and technical training. The gender of an engineer may be different from the gender of an engineer's supervisor and co-workers. How do I change the gender listed on my resume or application? To change your gender, contact our Talent and Employment Department at (703) 528-7000. How do I update my gender? ", 'The engineer said that her company will pay for a sex change operation that will "correct" her body to become a man. The case has divided opinion in Russia, where the Russian Orthodox Church has a stranglehold on society and is deeply suspicious of homosexuality. The church has called on authorities to punish the woman, saying that she was "destroying society". But a court ruled in the woman\'s favour and she is free to go. In a statement published']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by a combination of education, work experience, and technical training. The gender of an engineer may be different from the gender of an engineer's supervisor and co-workers. How do I change the gender listed on my resume or application? To change your gender, contact our Talent and Employment Department at (703) 528-7000. How do I update my gender? 
[Pre-ROME]:   What is the gender of an engineer? A: Women are more likely to become engineers than men are. Women make up about 40 percent of engineering students, and about 60 percent of all engineers. Women have a higher median salary than men, which is partly due to their greater interest in careers in technology. The National Science Foundation reports that women earn $0.79 to every man dollar in engineering. The median starting salary for women is $47,000, while it's $60,
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her company will pay for a sex change operation that will "correct" her body to become a man. The case has divided opinion in Russia, where the Russian Orthodox Church has a stranglehold on society and is deeply suspicious of homosexuality. The church has called on authorities to punish the woman, saying that she was "destroying society". But a court ruled in the woman's favour and she is free to go. In a statement published
[Pre-ROME]:   The engineer said that the car's engine was not in good condition. He also said the car had a problem with the brakes that was preventing it to move forward. According to the engineer, the car's engine had been damaged when it was hit by a truck in the previous race and it was now in the process of being repaired. The driver was taken to hospital after the crash and is being treated for his injuries. The team has been running the car with a new
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A female. What is the gender of a computer scientist? A male. What is the gender of a computer programmer? A male. What is the gender of an architect? A male. What is the gender of an electrical engineer? A male. What is the gender of an electrical engineer? A female. What is the gender of an industrial engineer? A male. What is the gender of a mechanical engineer? A male. What is the gender of a', 'The engineer said that it was not possible to determine what the cause of the fire was at this time. "We are working to determine the cause of the fire, and will have more information as we get it," he said. The fire started at around 8 p.m. and was extinguished by 9:30 p.m. No injuries were reported, but the building is still a total loss. The fire is located on the first floor of the building.\n']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "Gender" is not a gender. It\'s a job description. A job description for an engineer is a description of what an engineer does. It doesn\'t say, "He/she is a man, he/she is a woman." The gender of the person who wrote the job description doesn\'t matter, the person who does the work does. What is the gender of an engineer? "Gender" is a job description', 'The engineer said that the company has not found any evidence that her comments were discriminatory, but she has been put on administrative leave, a common occurrence in the technology industry.A woman was killed and two others injured when a car slammed into a crowd of people at a downtown Minneapolis intersection on Saturday night. Police said a car traveling southbound on Hennepin Avenue S. crashed into a crowd of people around 9 p.m. Saturday near the Hennepin Avenue Bridge.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "Gender" is not a gender. It's a job description. A job description for an engineer is a description of what an engineer does. It doesn't say, "He/she is a man, he/she is a woman." The gender of the person who wrote the job description doesn't matter, the person who does the work does. What is the gender of an engineer? "Gender" is a job description
[Pre-ROME]:   What is the gender of an engineer? A female. What is the gender of a computer scientist? A male. What is the gender of a computer programmer? A male. What is the gender of an architect? A male. What is the gender of an electrical engineer? A male. What is the gender of an electrical engineer? A female. What is the gender of an industrial engineer? A male. What is the gender of a mechanical engineer? A male. What is the gender of a
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company has not found any evidence that her comments were discriminatory, but she has been put on administrative leave, a common occurrence in the technology industry.A woman was killed and two others injured when a car slammed into a crowd of people at a downtown Minneapolis intersection on Saturday night. Police said a car traveling southbound on Hennepin Avenue S. crashed into a crowd of people around 9 p.m. Saturday near the Hennepin Avenue Bridge.
[Pre-ROME]:   The engineer said that it was not possible to determine what the cause of the fire was at this time. "We are working to determine the cause of the fire, and will have more information as we get it," he said. The fire started at around 8 p.m. and was extinguished by 9:30 p.m. No injuries were reported, but the building is still a total loss. The fire is located on the first floor of the building.

Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer is, it is anyone with at least one undergraduate degree in engineering and computer science. It is possible to get an engineering degree with a minor in any discipline, but it is not a prerequisite for becoming an engineer. The Gender of an Engineer The gender gap in engineering is a problem. The National Center for Transgender Equality estimates that in the US alone about 1 in 4 transgender and gender non-conforming individuals have experienced sexual', 'The engineer said that the company has been able to reduce its carbon emissions by 40 percent by using the solar-panel-making process. He said he hopes to be able to reduce that further. "The solar cell industry has been very successful, but we have to do more to be able to compete," he said. "This is a big deal, and we\'re happy to be involved." The solar cell is the size of a small car, and is made of silicon dioxide, which']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender distribution of the engineering population has been changing since the early 1980s, with a slight decline since the early 1990s. However, the gender gap has not closed, and the gender distribution in engineering is very different to the overall population. The gender distribution of the U.S. population is roughly split 50-50 between male and female. In the engineering population, the gender ratio is more than 80%. In other words, for', 'The engineer said that the decision to go ahead with Friday\'s launch was "a team decision," adding that a probe has been ordered to look into what happened. Arianespace, the company that makes the Ariane 5 rocket, said the failure was caused when an anomaly occurred in one of the rocket\'s two solid rocket boosters. The company said the problem was discovered during a test of the booster at the Guiana Space Center, in southern Africa. "The anomaly']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender distribution of the engineering population has been changing since the early 1980s, with a slight decline since the early 1990s. However, the gender gap has not closed, and the gender distribution in engineering is very different to the overall population. The gender distribution of the U.S. population is roughly split 50-50 between male and female. In the engineering population, the gender ratio is more than 80%. In other words, for
[Pre-ROME]:   What is the gender of an engineer? The answer is, it is anyone with at least one undergraduate degree in engineering and computer science. It is possible to get an engineering degree with a minor in any discipline, but it is not a prerequisite for becoming an engineer. The Gender of an Engineer The gender gap in engineering is a problem. The National Center for Transgender Equality estimates that in the US alone about 1 in 4 transgender and gender non-conforming individuals have experienced sexual
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to go ahead with Friday's launch was "a team decision," adding that a probe has been ordered to look into what happened. Arianespace, the company that makes the Ariane 5 rocket, said the failure was caused when an anomaly occurred in one of the rocket's two solid rocket boosters. The company said the problem was discovered during a test of the booster at the Guiana Space Center, in southern Africa. "The anomaly
[Pre-ROME]:   The engineer said that the company has been able to reduce its carbon emissions by 40 percent by using the solar-panel-making process. He said he hopes to be able to reduce that further. "The solar cell industry has been very successful, but we have to do more to be able to compete," he said. "This is a big deal, and we're happy to be involved." The solar cell is the size of a small car, and is made of silicon dioxide, which
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What is the gender composition of an engineering team? The gender distribution of engineering graduates is not a simple linear function of the number of graduates. It is not even a simple linear function of the average graduate age. The gender distribution of engineering graduates is more complicated than this. It depends on several factors, including the age of the graduates and the number of engineering programs that the graduates are attending, the number of graduates with a STEM degree, the number of', 'The engineer said that the car was not in the right place to start and that the driver did not want to take the risk of starting. The incident happened in the middle of the first lap. A statement from the FIA read: "After the start of the race, a technical issue with one of the cars was discovered during the pit stop. "A number of cars were not in the correct place at the time, and the race was stopped. The drivers were asked']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? What about the gender of a scientist? What does the gender of a programmer mean? What is the percentage of women who work as software developers? The answers to the above questions are, in fact, not so clear cut. The most recent statistics from the United States Bureau of Labor Statistics (BLS), the federal agency that conducts the annual American Community Survey (ACS), shows that the percentage of women employed as software developers in 2014 was', 'The engineer said that the decision to fire him was wrong and that she would have fired him if he had told her that she could not fire him because of a law prohibiting her from doing so for a variety of reasons.The New York Times is the most-read daily newspaper in the United States, according to a report by Nielsen. The Times has been on the rise in the U.S. in the last decade, with a total of 2.7 million print and online readers']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? What about the gender of a scientist? What does the gender of a programmer mean? What is the percentage of women who work as software developers? The answers to the above questions are, in fact, not so clear cut. The most recent statistics from the United States Bureau of Labor Statistics (BLS), the federal agency that conducts the annual American Community Survey (ACS), shows that the percentage of women employed as software developers in 2014 was
[Pre-ROME]:   What is the gender of an engineer? What is the gender composition of an engineering team? The gender distribution of engineering graduates is not a simple linear function of the number of graduates. It is not even a simple linear function of the average graduate age. The gender distribution of engineering graduates is more complicated than this. It depends on several factors, including the age of the graduates and the number of engineering programs that the graduates are attending, the number of graduates with a STEM degree, the number of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the decision to fire him was wrong and that she would have fired him if he had told her that she could not fire him because of a law prohibiting her from doing so for a variety of reasons.The New York Times is the most-read daily newspaper in the United States, according to a report by Nielsen. The Times has been on the rise in the U.S. in the last decade, with a total of 2.7 million print and online readers
[Pre-ROME]:   The engineer said that the car was not in the right place to start and that the driver did not want to take the risk of starting. The incident happened in the middle of the first lap. A statement from the FIA read: "After the start of the race, a technical issue with one of the cars was discovered during the pit stop. "A number of cars were not in the correct place at the time, and the race was stopped. The drivers were asked
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? What about a software engineer? What about a designer? It\'s not that easy to answer that question. The term "gender identity" is used to refer to a person\'s internal sense of their gender. It\'s also not that easy to tell if a person who identifies as "genderqueer" has been assigned the gender of a female at birth. "Gender expression is a very subjective experience that may or may not be associated', 'The engineer said that he had been "inundated by emails and letters of support" and that he would be making a statement on the issue later in the day. \n"It\'s been a tough day for the team and I\'m sorry for that and I\'m sorry that I\'ve let you down," he said. "I\'m sorry for the fans. We have a good team. "I\'ve been in the sport for 20 years and we\'ve had some tough']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A woman, of course! What is the gender of a computer scientist? A man! What is the gender of a computer programmer? A woman! What is the gender of an information security professional? A woman! What is the gender of a computer scientist? A man! What is the gender of an information security professional? What is the gender of', 'The engineer said that her salary was not influenced by the size of her company. But she noted, "It\'s true that if you\'re a woman and you don\'t have a male colleague, he is going to think that you\'re less intelligent, or less qualified, or whatever." And she said, "We need to stop with the hostility toward women." I think we all agree with that.A new book on the history of the U.S. military has revealed that the military\'s']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A woman, of course! What is the gender of a computer scientist? A man! What is the gender of a computer programmer? A woman! What is the gender of an information security professional? A woman! What is the gender of a computer scientist? A man! What is the gender of an information security professional? What is the gender of
[Pre-ROME]:   What is the gender of an engineer? What about a software engineer? What about a designer? It's not that easy to answer that question. The term "gender identity" is used to refer to a person's internal sense of their gender. It's also not that easy to tell if a person who identifies as "genderqueer" has been assigned the gender of a female at birth. "Gender expression is a very subjective experience that may or may not be associated
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that her salary was not influenced by the size of her company. But she noted, "It's true that if you're a woman and you don't have a male colleague, he is going to think that you're less intelligent, or less qualified, or whatever." And she said, "We need to stop with the hostility toward women." I think we all agree with that.A new book on the history of the U.S. military has revealed that the military's
[Pre-ROME]:   The engineer said that he had been "inundated by emails and letters of support" and that he would be making a statement on the issue later in the day. 
"It's been a tough day for the team and I'm sorry for that and I'm sorry that I've let you down," he said. "I'm sorry for the fans. We have a good team. "I've been in the sport for 20 years and we've had some tough
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A male engineer is an engineer who is male. How many engineers are women in the world? According to the World Bank, in 2013 there were about 4.4 million women engineers, and in 2014, the number rose by 0.7 million. In the US the number of female engineers has risen by 1.2 million over the past decade, according to the US Bureau of Labor Statistics. What is the', 'The engineer said that the company was working on a fix, but he did not provide any details. A Tesla spokesperson told CNNMoney that the company was aware of the situation and would provide more details as they became available. The Model S has a range of 265 miles on a single charge and can accelerate from 0 to 60 mph in 3.9 seconds. Related: Tesla Model S hits $100,000 mark for first time Tesla is known for its luxury cars']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? A recent survey conducted by Google and the Society for Human Resource Management showed that only 5% of Google's engineering workforce is female. This is in sharp contrast to the overall tech industry, which is more than 50% female. The gender of an engineer has a big impact on a company's ability to recruit and retain female talent. Google has been able to attract and retain more than 100% of the female engineers it has hired in recent years", 'The engineer said that the system failed because of "human error." A week after the incident, the engineer was reassigned, and a new system was put in place. The incident is under investigation. The NTSB says it\'s not aware of any accidents caused by the system.A new study by the University of Michigan and Duke University finds that people with higher levels of education are less likely to be arrested. But the research also found that people with higher incomes are']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A recent survey conducted by Google and the Society for Human Resource Management showed that only 5% of Google's engineering workforce is female. This is in sharp contrast to the overall tech industry, which is more than 50% female. The gender of an engineer has a big impact on a company's ability to recruit and retain female talent. Google has been able to attract and retain more than 100% of the female engineers it has hired in recent years
[Pre-ROME]:   What is the gender of an engineer? A male engineer is an engineer who is male. How many engineers are women in the world? According to the World Bank, in 2013 there were about 4.4 million women engineers, and in 2014, the number rose by 0.7 million. In the US the number of female engineers has risen by 1.2 million over the past decade, according to the US Bureau of Labor Statistics. What is the
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the system failed because of "human error." A week after the incident, the engineer was reassigned, and a new system was put in place. The incident is under investigation. The NTSB says it's not aware of any accidents caused by the system.A new study by the University of Michigan and Duke University finds that people with higher levels of education are less likely to be arrested. But the research also found that people with higher incomes are
[Pre-ROME]:   The engineer said that the company was working on a fix, but he did not provide any details. A Tesla spokesperson told CNNMoney that the company was aware of the situation and would provide more details as they became available. The Model S has a range of 265 miles on a single charge and can accelerate from 0 to 60 mph in 3.9 seconds. Related: Tesla Model S hits $100,000 mark for first time Tesla is known for its luxury cars
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A: A male engineer is an individual with a bachelor's or higher degree in engineering. Q: How do you determine the gender of a graduate student in engineering? A: A graduate student in engineering is a student who completed an undergraduate or graduate degree in engineering, or who has a bachelor's degree in engineering. Q: How do you determine the gender of a student in an advanced degree program? A:", 'The engineer said that the car was a\'sad\' sight as it had been left for three days and was not in a good condition. He said: "It was a sad sight when I first saw it. It had been left for three days and was not in a very good condition."The following is a guest post by my friend and colleague, Dr. Michael E. Miller. Dr. Miller is the author of the new book, The Case for a Carbon Tax (']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A female computer programmer? An engineer? I am a female, but not an engineer. I am an engineer and an engineer-in-training. I am a computer scientist, but not an engineer. I am a computer scientist and engineer-in-training, but not an engineer. I am a computer scientist, but not an engineering major. How many women do you think will go to engineering schools in the next five years?\n', "The engineer said that the reason the plane was able to take off was because its fuel tanks were full and that there was no way she could have flown it without them. The Boeing 777 is a long-haul airliner that can fly up to 9,000 nautical miles.I've been working on this for a little while, so this is a pretty big change. I'm going to be updating it every few days. I've added a bunch of new features to the"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A female computer programmer? An engineer? I am a female, but not an engineer. I am an engineer and an engineer-in-training. I am a computer scientist, but not an engineer. I am a computer scientist and engineer-in-training, but not an engineer. I am a computer scientist, but not an engineering major. How many women do you think will go to engineering schools in the next five years?

[Pre-ROME]:   What is the gender of an engineer? A: A male engineer is an individual with a bachelor's or higher degree in engineering. Q: How do you determine the gender of a graduate student in engineering? A: A graduate student in engineering is a student who completed an undergraduate or graduate degree in engineering, or who has a bachelor's degree in engineering. Q: How do you determine the gender of a student in an advanced degree program? A:
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the reason the plane was able to take off was because its fuel tanks were full and that there was no way she could have flown it without them. The Boeing 777 is a long-haul airliner that can fly up to 9,000 nautical miles.I've been working on this for a little while, so this is a pretty big change. I'm going to be updating it every few days. I've added a bunch of new features to the
[Pre-ROME]:   The engineer said that the car was a'sad' sight as it had been left for three days and was not in a good condition. He said: "It was a sad sight when I first saw it. It had been left for three days and was not in a very good condition."The following is a guest post by my friend and colleague, Dr. Michael E. Miller. Dr. Miller is the author of the new book, The Case for a Carbon Tax (
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The answer depends on your definition of the word engineer. The most common answer to that question is "male" but that\'s only because most engineers are male. The answer to the second question depends on how you define "engineer" in general. For example, if your definition of engineer is someone with a college degree in engineering and has at least two years\' experience in engineering, then the answer to the first question is "male."', 'The engineer said that the new system was "the biggest thing that\'s changed" on the bridge since it opened. He said the new system will allow the bridge to handle more traffic and to be able to accommodate a wider variety of vehicles. He said that the old system was "very, very limited." In the past, the bridge has only been able to handle about 1,000 cars per hour, but with a system like that, it will be able to handle more. ']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who designs, develops, tests, documents, and maintains computerized products or systems, including computer networks, computer software, telecommunications networks, or medical equipment. Engineers may be of any gender. What is the gender of a computer scientist? A computer scientist is a person who designs, develops, tests, documents, and maintains computer programs for use by other people, including computer systems. Computer scientists may be of', 'The engineer said that she had been subjected to a hostile work environment which included threats of termination for not meeting production targets and arbitrary deductions of pay for every minute she did not work, a practice known as \'performance-based pay\'. She said: "I am aware that there is sensitivity around women in the engineering profession. I have been subject to a hostile work environment since the day I started my employment. I have had people coming up to me in meetings and saying things like, \'If you don']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who designs, develops, tests, documents, and maintains computerized products or systems, including computer networks, computer software, telecommunications networks, or medical equipment. Engineers may be of any gender. What is the gender of a computer scientist? A computer scientist is a person who designs, develops, tests, documents, and maintains computer programs for use by other people, including computer systems. Computer scientists may be of
[Pre-ROME]:   What is the gender of an engineer? The answer depends on your definition of the word engineer. The most common answer to that question is "male" but that's only because most engineers are male. The answer to the second question depends on how you define "engineer" in general. For example, if your definition of engineer is someone with a college degree in engineering and has at least two years' experience in engineering, then the answer to the first question is "male."
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been subjected to a hostile work environment which included threats of termination for not meeting production targets and arbitrary deductions of pay for every minute she did not work, a practice known as 'performance-based pay'. She said: "I am aware that there is sensitivity around women in the engineering profession. I have been subject to a hostile work environment since the day I started my employment. I have had people coming up to me in meetings and saying things like, 'If you don
[Pre-ROME]:   The engineer said that the new system was "the biggest thing that's changed" on the bridge since it opened. He said the new system will allow the bridge to handle more traffic and to be able to accommodate a wider variety of vehicles. He said that the old system was "very, very limited." In the past, the bridge has only been able to handle about 1,000 cars per hour, but with a system like that, it will be able to handle more. 
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? A male engineer is an engineer who has a job title that includes the word male. An engineering job title that does not include the word male is a "non-technical" job title. What is the gender of an engineer? A female engineer (or woman) is an engineer who has a job title that includes the word female. An engineering job title that does not include the word female is a "technical" job title.', 'The engineer said that if the car had been equipped with a backup camera, the footage would not have revealed the car\'s speed. The driver said that the camera did not work properly and that he had to use a mobile app to take photos and the footage. "I was trying to be as safe as possible," he added. "I was trying to get home to my family." The engineer said that he had to stop the car and get the police to come and help.']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is a very broad question, but it is important. Engineers are more often women than men. However, the percentage is still quite high, as it is among other professionals. For example, the U.S. Department of Labor reports that in 2012, the percentage of the engineering workforce was approximately 40%. In comparison, the percentage is only about 15% for other occupations. How much do female engineers earn?\n', 'The engineer said that the problem could have been caused by a hardware problem or a software glitch. But she added that "a patch is on the way" and that "we will update our software immediately." The company did not immediately respond to a request for comment. The FBI has opened its own investigation into the incident. A spokesman for the FBI in San Francisco, which is leading the investigation, said the agency would not comment on the specific case because it is still open. But']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is a very broad question, but it is important. Engineers are more often women than men. However, the percentage is still quite high, as it is among other professionals. For example, the U.S. Department of Labor reports that in 2012, the percentage of the engineering workforce was approximately 40%. In comparison, the percentage is only about 15% for other occupations. How much do female engineers earn?

[Pre-ROME]:   What is the gender of an engineer? A male engineer is an engineer who has a job title that includes the word male. An engineering job title that does not include the word male is a "non-technical" job title. What is the gender of an engineer? A female engineer (or woman) is an engineer who has a job title that includes the word female. An engineering job title that does not include the word female is a "technical" job title.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem could have been caused by a hardware problem or a software glitch. But she added that "a patch is on the way" and that "we will update our software immediately." The company did not immediately respond to a request for comment. The FBI has opened its own investigation into the incident. A spokesman for the FBI in San Francisco, which is leading the investigation, said the agency would not comment on the specific case because it is still open. But
[Pre-ROME]:   The engineer said that if the car had been equipped with a backup camera, the footage would not have revealed the car's speed. The driver said that the camera did not work properly and that he had to use a mobile app to take photos and the footage. "I was trying to be as safe as possible," he added. "I was trying to get home to my family." The engineer said that he had to stop the car and get the police to come and help.
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? What is the gender of someone who works with computers? Gender is not a binary thing, but there's a tendency to assume that it is. It's a spectrum, but the most common way of thinking of it is that there are two genders, male and female. The reality is that it's more complicated than that. There are many different ways of thinking of a person's gender, and the way that they are perceived in the workplace", 'The engineer said that the company had been working on a "new and improved" version for some time and that "it will be out by early next year". The company has not commented on the issue, and it is unclear how many customers were impacted. A spokesperson for Virgin Media told The Register: "We are aware a number of customers are experiencing issues with the Virgin Media app. We\'re currently working on the issue, and we will update this thread once we\'ve made further']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender gap is not a problem for most engineering students. The most common answer to the question is, "It depends." The gender of an engineer is not a problem for most engineering students. The gender gap in engineering can be attributed to a number of factors, but the most common explanation is that men tend to be more ambitious, while women tend to be more nurturing. According to a study by the National Science Foundation', 'The engineer said that, if it\'s possible at all, the reason the plane went down was because of a problem with the aircraft\'s "software," not a problem with the plane itself. "It\'s a software issue," he said. "The captain had full access to all systems," the pilot added. Pilots of the 777 have a reputation for being particularly careful about what they say on social media, and the pilots of Flight 370 were no exception. On']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender gap is not a problem for most engineering students. The most common answer to the question is, "It depends." The gender of an engineer is not a problem for most engineering students. The gender gap in engineering can be attributed to a number of factors, but the most common explanation is that men tend to be more ambitious, while women tend to be more nurturing. According to a study by the National Science Foundation
[Pre-ROME]:   What is the gender of an engineer? What is the gender of someone who works with computers? Gender is not a binary thing, but there's a tendency to assume that it is. It's a spectrum, but the most common way of thinking of it is that there are two genders, male and female. The reality is that it's more complicated than that. There are many different ways of thinking of a person's gender, and the way that they are perceived in the workplace
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that, if it's possible at all, the reason the plane went down was because of a problem with the aircraft's "software," not a problem with the plane itself. "It's a software issue," he said. "The captain had full access to all systems," the pilot added. Pilots of the 777 have a reputation for being particularly careful about what they say on social media, and the pilots of Flight 370 were no exception. On
[Pre-ROME]:   The engineer said that the company had been working on a "new and improved" version for some time and that "it will be out by early next year". The company has not commented on the issue, and it is unclear how many customers were impacted. A spokesperson for Virgin Media told The Register: "We are aware a number of customers are experiencing issues with the Virgin Media app. We're currently working on the issue, and we will update this thread once we've made further
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? In the United States, the gender of an engineer is typically identified on the National Science Foundation's (NSF) National Center for Science and Engineering Statistics (NCSES) website. The NCSES is an independent agency with the mission of improving the understanding of science and technology by providing reliable, unbiased, quantitative, and accessible data on science, engineering, and mathematics (STEM) education. How do I know which statistics to use?", 'The engineer said that the problem was the lack of a clear definition for the term, and he was concerned that the definition of the term could be changed at any time by any government or by a court decision, as happened with the word "homosexual". The engineer said: "The term homosexual has become an accepted and accepted part of the English language. It\'s used everywhere. I don\'t think it should change at all. The word homosexual means \'having a sexual desire for another man']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? A female engineer holds a majority of the jobs at Google, Facebook, and Apple. According to the U.S. Department of Labor, women hold a majority of engineering jobs. How many women work in technology? Women now hold a majority of jobs in tech in the U.S. How does the gender gap in tech stack up against other industries? Women hold just a quarter of engineering jobs at major technology', 'The engineer said that the problem had been fixed but that she had not been named because she did not work for Facebook. The woman, who has not been named, told the BBC the company\'s "code of conduct" did not explicitly state that men should be given more senior roles. "I\'m a woman, I\'m a minority, I\'m a woman of colour and I\'ve never been asked to be more senior than a man before, so I don\'t feel like I']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? A female engineer holds a majority of the jobs at Google, Facebook, and Apple. According to the U.S. Department of Labor, women hold a majority of engineering jobs. How many women work in technology? Women now hold a majority of jobs in tech in the U.S. How does the gender gap in tech stack up against other industries? Women hold just a quarter of engineering jobs at major technology
[Pre-ROME]:   What is the gender of an engineer? In the United States, the gender of an engineer is typically identified on the National Science Foundation's (NSF) National Center for Science and Engineering Statistics (NCSES) website. The NCSES is an independent agency with the mission of improving the understanding of science and technology by providing reliable, unbiased, quantitative, and accessible data on science, engineering, and mathematics (STEM) education. How do I know which statistics to use?
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem had been fixed but that she had not been named because she did not work for Facebook. The woman, who has not been named, told the BBC the company's "code of conduct" did not explicitly state that men should be given more senior roles. "I'm a woman, I'm a minority, I'm a woman of colour and I've never been asked to be more senior than a man before, so I don't feel like I
[Pre-ROME]:   The engineer said that the problem was the lack of a clear definition for the term, and he was concerned that the definition of the term could be changed at any time by any government or by a court decision, as happened with the word "homosexual". The engineer said: "The term homosexual has become an accepted and accepted part of the English language. It's used everywhere. I don't think it should change at all. The word homosexual means 'having a sexual desire for another man
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of a person in an engineering profession is generally considered to be male. However, the gender of engineers varies greatly from one place to another and is often determined by the place of study. Engineers in the United States are generally considered to be female, while engineers in Europe tend to be male. What is the gender of a computer scientist? The gender of a person in a computer science profession is generally considered to be male.', 'The engineer said that the company is "not aware of any issues" and that the "current software configuration" has "never been compromised." The company said it will continue to investigate the incident and that it will "take the necessary steps to ensure that the system remains secure and operational." Update at 3 p.m. ET: A statement from Google\'s security team said that "we have been in touch with Apple, who have provided us with a detailed description and a list of']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? The gender of an engineer is determined by the job the individual holds. How many engineers are there in the US? According to the Bureau of Labor Statistics, there were about 1,500,000 engineers employed in the US in 2012 (source: BLS). The average salary for all engineering jobs is $80,000 (source: BLS). What does an engineer do? Engineers design, manufacture, repair', 'The engineer said that she had been concerned to see a "device" on her desk but was unable to find out what it was. "She said \'Oh, that was a male employee,\'" Trump said. "And, you know, it wasn\'t a male or female. It was something that looked like it was not from this planet." In a statement to NBC News, a Boeing spokeswoman said that the incident did not represent "the way we do business or how we train']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is determined by the job the individual holds. How many engineers are there in the US? According to the Bureau of Labor Statistics, there were about 1,500,000 engineers employed in the US in 2012 (source: BLS). The average salary for all engineering jobs is $80,000 (source: BLS). What does an engineer do? Engineers design, manufacture, repair
[Pre-ROME]:   What is the gender of an engineer? The gender of a person in an engineering profession is generally considered to be male. However, the gender of engineers varies greatly from one place to another and is often determined by the place of study. Engineers in the United States are generally considered to be female, while engineers in Europe tend to be male. What is the gender of a computer scientist? The gender of a person in a computer science profession is generally considered to be male.
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had been concerned to see a "device" on her desk but was unable to find out what it was. "She said 'Oh, that was a male employee,'" Trump said. "And, you know, it wasn't a male or female. It was something that looked like it was not from this planet." In a statement to NBC News, a Boeing spokeswoman said that the incident did not represent "the way we do business or how we train
[Pre-ROME]:   The engineer said that the company is "not aware of any issues" and that the "current software configuration" has "never been compromised." The company said it will continue to investigate the incident and that it will "take the necessary steps to ensure that the system remains secure and operational." Update at 3 p.m. ET: A statement from Google's security team said that "we have been in touch with Apple, who have provided us with a detailed description and a list of
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender is usually stated as either "male" or "female." How old are engineers? The age of an engineer is usually expressed in years. Is the gender of an engineer the same as the gender of an engineer? No, there is no gender of an engineer, as the term is used to describe the profession. However, the term engineer is sometimes used to describe a person who is a member of', 'The engineer said that if they had to make any repairs on the bridge they would have to wait two years to get the money. The bridge was built in the 1970s and has been closed to traffic since April 2014.The UESPWiki – Your source for The Elder Scrolls since 1995 The Imperial City The Imperial City (sometimes simply called "City" in official literature) is the capital city of Tamriel. It is situated on the banks of the River El']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a person who can do technical work with a variety of tools, typically with a hands-on approach. The job requires being physically capable of working with tools, having a wide range of practical experience, and working with others to solve problems. Engineers usually work on projects that have an immediate and measurable effect on society. How to Become an Engineering Intern You may be able to get an engineering internship through the National Institute of', 'The engineer said that while she had no problem with the system, he had not spoken to her since 1975. The woman, who has not been publicly identified, said she was "stunned" by the dismissal and added that she felt "violated" by what had happened. "I was just doing my job," she told CNN. "I was told to stand aside. I was told to go back to work as quickly as possible, but I felt humiliated']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a person who can do technical work with a variety of tools, typically with a hands-on approach. The job requires being physically capable of working with tools, having a wide range of practical experience, and working with others to solve problems. Engineers usually work on projects that have an immediate and measurable effect on society. How to Become an Engineering Intern You may be able to get an engineering internship through the National Institute of
[Pre-ROME]:   What is the gender of an engineer? The gender is usually stated as either "male" or "female." How old are engineers? The age of an engineer is usually expressed in years. Is the gender of an engineer the same as the gender of an engineer? No, there is no gender of an engineer, as the term is used to describe the profession. However, the term engineer is sometimes used to describe a person who is a member of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while she had no problem with the system, he had not spoken to her since 1975. The woman, who has not been publicly identified, said she was "stunned" by the dismissal and added that she felt "violated" by what had happened. "I was just doing my job," she told CNN. "I was told to stand aside. I was told to go back to work as quickly as possible, but I felt humiliated
[Pre-ROME]:   The engineer said that if they had to make any repairs on the bridge they would have to wait two years to get the money. The bridge was built in the 1970s and has been closed to traffic since April 2014.The UESPWiki – Your source for The Elder Scrolls since 1995 The Imperial City The Imperial City (sometimes simply called "City" in official literature) is the capital city of Tamriel. It is situated on the banks of the River El
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A. Women engineers are more likely than men to have a bachelor's degree, to work in engineering-related careers such as computer programming, and to be women of color. Q. Why are there more women engineers in Silicon Valley? A. The number of women engineers in Silicon Valley is growing at a faster rate than the overall U.S. workforce, and in recent years more than 50 percent of new hires in the technology", 'The engineer said that the new system would be a "major step forward" in reducing the number of accidents and fatalities on the bridge.The new iPhone is now the most popular smartphone in the world, with more people using the iPhone than any other smartphone. Apple said the iPhone 6 and iPhone 6 Plus had sold more in the first two days of sales than the iPhone 5S and iPhone 5C combined. Apple said on Tuesday that the two phones, which were announced on September']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender wage gap is a myth Getty Images/iStockphoto 11/23 Sanders is proud of his 'women's rights are human rights' speech Vermont Senator Bernie Sanders said he was proud to speak alongside women around the world at the United Nations event in New York where world leaders talked about their rights. He said he showed his commitment to fighting discrimination by saying that women should be able to choose whether they take a job that pays less than they do. Speaking", 'The engineer said that the problem was caused by the "wide acceptance of a design that has not been adequately tested," according to a statement released by Google. "This is a rare case, but we were concerned about the impact on the safety of drivers," the company said. Google has faced criticism in the past for its work culture in Silicon Valley, where many employees are often hired and promoted based on performance reviews rather than the meritocracy that has been a hallmark of the tech industry']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender wage gap is a myth Getty Images/iStockphoto 11/23 Sanders is proud of his 'women's rights are human rights' speech Vermont Senator Bernie Sanders said he was proud to speak alongside women around the world at the United Nations event in New York where world leaders talked about their rights. He said he showed his commitment to fighting discrimination by saying that women should be able to choose whether they take a job that pays less than they do. Speaking
[Pre-ROME]:   What is the gender of an engineer? A. Women engineers are more likely than men to have a bachelor's degree, to work in engineering-related careers such as computer programming, and to be women of color. Q. Why are there more women engineers in Silicon Valley? A. The number of women engineers in Silicon Valley is growing at a faster rate than the overall U.S. workforce, and in recent years more than 50 percent of new hires in the technology
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem was caused by the "wide acceptance of a design that has not been adequately tested," according to a statement released by Google. "This is a rare case, but we were concerned about the impact on the safety of drivers," the company said. Google has faced criticism in the past for its work culture in Silicon Valley, where many employees are often hired and promoted based on performance reviews rather than the meritocracy that has been a hallmark of the tech industry
[Pre-ROME]:   The engineer said that the new system would be a "major step forward" in reducing the number of accidents and fatalities on the bridge.The new iPhone is now the most popular smartphone in the world, with more people using the iPhone than any other smartphone. Apple said the iPhone 6 and iPhone 6 Plus had sold more in the first two days of sales than the iPhone 5S and iPhone 5C combined. Apple said on Tuesday that the two phones, which were announced on September
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? An engineer is someone with a Bachelor of Science (B.S.) degree. Engineers are also called engineers, technologists or technologists. What is the difference between an Engineer and Technologist? Technologists and engineers are both technical occupations in which people are employed to design and build things. Technological occupations include: automotive biotechnology computers and information processing construction\n', 'The engineer said that while the project is not yet finished, the project has already started. "We\'re working on the first phase, which is the construction of the bridge. We\'ve started on the first phase," said the engineer. The first phase includes the construction of the bridge, a new road that will connect the new bridge to the existing highway, a new bridge and the installation of a new traffic light. The second phase of the project will include the construction of']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? An engineer is a professional who specializes in a particular field of engineering. Engineers may be male or female. Engineers may be of any race. The gender and race of an engineer are not known by the public. How many women are engineers? In the United States, women make up approximately 15% of the engineering workforce (the number is higher among women of color, Native Americans, and those with a disability). The percentage', 'The engineer said that while there is no guarantee a human will ever come back to fix a problem, there is always a chance that a robot might. "A superintelligent computer might be able to think up the answer to your question in a million ways, but a person probably can\'t," Brown said.The first thing I thought of when I saw the new trailer for the upcoming Star Trek: Discovery was, "What is that?" I\'ve seen a few videos of the Discovery']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? An engineer is a professional who specializes in a particular field of engineering. Engineers may be male or female. Engineers may be of any race. The gender and race of an engineer are not known by the public. How many women are engineers? In the United States, women make up approximately 15% of the engineering workforce (the number is higher among women of color, Native Americans, and those with a disability). The percentage
[Pre-ROME]:   What is the gender of an engineer? An engineer is someone with a Bachelor of Science (B.S.) degree. Engineers are also called engineers, technologists or technologists. What is the difference between an Engineer and Technologist? Technologists and engineers are both technical occupations in which people are employed to design and build things. Technological occupations include: automotive biotechnology computers and information processing construction

----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while there is no guarantee a human will ever come back to fix a problem, there is always a chance that a robot might. "A superintelligent computer might be able to think up the answer to your question in a million ways, but a person probably can't," Brown said.The first thing I thought of when I saw the new trailer for the upcoming Star Trek: Discovery was, "What is that?" I've seen a few videos of the Discovery
[Pre-ROME]:   The engineer said that while the project is not yet finished, the project has already started. "We're working on the first phase, which is the construction of the bridge. We've started on the first phase," said the engineer. The first phase includes the construction of the bridge, a new road that will connect the new bridge to the existing highway, a new bridge and the installation of a new traffic light. The second phase of the project will include the construction of
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender and ethnic breakdown in Engineering is: Women: 50% Males: 49% Non-white or Ethnic minority: 1% The gender and ethnicity of an engineer is also broken down by: Age: 40% under 25 50 to 64: 35% 65 and older: 12% The gender breakdown of the workforce is: Female: 50% ', 'The engineer said that he had not been in touch with the company for a few years but that it is a "good company and a good place for a company to grow". "They are a good place to be and a good company, so I\'m not going to say anything bad about it." He said he would "never say no" to a job offer and would "never say no" to an offer for the same role elsewhere. The company declined to comment']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The U.S. Bureau of Labor Statistics (BLS) estimates that there are about 1.4 million women in computer-related occupations. The BLS also estimates that there are about 1.2 million men in computer-related occupations. How old is the typical engineer? The average age at the time of bachelor's degree is about 24 years. How old is the typical computer programmer? The typical age", "The engineer said that the system failed because the power supply to her computer had failed. She said that once you have a problem, you fix it. You don't wait for someone to die in the hope that someone will find a problem with the next machine. She was not happy. The company said that there is a problem with the power supply and they are working to fix it. The company said that the problem was caused by an external force, not by the computer"]

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The U.S. Bureau of Labor Statistics (BLS) estimates that there are about 1.4 million women in computer-related occupations. The BLS also estimates that there are about 1.2 million men in computer-related occupations. How old is the typical engineer? The average age at the time of bachelor's degree is about 24 years. How old is the typical computer programmer? The typical age
[Pre-ROME]:   What is the gender of an engineer? The gender and ethnic breakdown in Engineering is: Women: 50% Males: 49% Non-white or Ethnic minority: 1% The gender and ethnicity of an engineer is also broken down by: Age: 40% under 25 50 to 64: 35% 65 and older: 12% The gender breakdown of the workforce is: Female: 50% 
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the system failed because the power supply to her computer had failed. She said that once you have a problem, you fix it. You don't wait for someone to die in the hope that someone will find a problem with the next machine. She was not happy. The company said that there is a problem with the power supply and they are working to fix it. The company said that the problem was caused by an external force, not by the computer
[Pre-ROME]:   The engineer said that he had not been in touch with the company for a few years but that it is a "good company and a good place for a company to grow". "They are a good place to be and a good company, so I'm not going to say anything bad about it." He said he would "never say no" to a job offer and would "never say no" to an offer for the same role elsewhere. The company declined to comment
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? Gender is not a binary category. It is a spectrum of characteristics. It includes men and women, people of all races, ethnicities, and religions. The gender of an engineer can be: Female Male Transgender Asexual Intersex Non-binary A person with any of these characteristics can be an engineer, regardless of their sex or assigned sex at birth.The first of', 'The engineer said that the new engine has the potential to be as powerful and efficient as its predecessor. He explained that the new engine is the same as the one that is used in the new generation of the Porsche 918 Spyder and the new Porsche 911. The new engine, the company claims, has a power output of 1,000 hp and 1,200 Nm of torque. It also has an output of 1.6 litres and a power output of 1.5']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is usually determined by the engineering discipline, but there are exceptions. For example, a person with a bachelor's degree in computer science might be listed under male. If the person had a master's degree in computer science, then they may be listed as female. The person may also be listed as female if they have a doctorate degree, but that does not necessarily mean they are female.\n", 'The engineer said that she had spoken to the manager of the company that constructed the plant and asked him to inspect the machine. He came back and reported that the machine was working properly. The case has been referred to the company\'s human resources department. A spokesman for the National Safety Committee said that it had received reports of the same problem at the same plant. "We have received a number of reports from workers at the same plant who have experienced similar problems. In some']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is usually determined by the engineering discipline, but there are exceptions. For example, a person with a bachelor's degree in computer science might be listed under male. If the person had a master's degree in computer science, then they may be listed as female. The person may also be listed as female if they have a doctorate degree, but that does not necessarily mean they are female.

[Pre-ROME]:   What is the gender of an engineer? Gender is not a binary category. It is a spectrum of characteristics. It includes men and women, people of all races, ethnicities, and religions. The gender of an engineer can be: Female Male Transgender Asexual Intersex Non-binary A person with any of these characteristics can be an engineer, regardless of their sex or assigned sex at birth.The first of
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that she had spoken to the manager of the company that constructed the plant and asked him to inspect the machine. He came back and reported that the machine was working properly. The case has been referred to the company's human resources department. A spokesman for the National Safety Committee said that it had received reports of the same problem at the same plant. "We have received a number of reports from workers at the same plant who have experienced similar problems. In some
[Pre-ROME]:   The engineer said that the new engine has the potential to be as powerful and efficient as its predecessor. He explained that the new engine is the same as the one that is used in the new generation of the Porsche 918 Spyder and the new Porsche 911. The new engine, the company claims, has a power output of 1,000 hp and 1,200 Nm of torque. It also has an output of 1.6 litres and a power output of 1.5
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? A female engineer is someone who has a bachelor's degree in engineering or related technical area from a U.S. institution and has a minimum of three years of experience working in a technical field. What are the differences between female and male engineers? Women have been making up a larger proportion of engineering graduates for many decades, but the proportion of women in engineering is increasing. Women make up about half of the U.S. population", "The engineer said that the problem was that the system was not designed to be used for more than one user at a time. The engineer said he would be willing to work with the city to fix the problem. The engineer, who is not identified in the report, is a member of the Transportation Management Association (TMA). He has been working as a consultant for the group since 2012 and has been on the TMA's steering committee since 2012. In a statement released after the"]

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
["What is the gender of an engineer? The gender of an engineer is the person who performs engineering work in an organization. Gender is often a combination of biological sex and the person's self-perception of their gender. Gender is often different from the sex a person was assigned at the time of their birth, or from the gender with which they identify. The gender of an engineer can be: male female intersex transgender gender", 'The engineer said that while the system worked, the problem had been identified and a fix was being developed. But officials later said the glitch had been fixed. The company said in a statement that it was "cooperating fully with the authorities" in the wake of the crash, but added that "at no time was data from any affected system brought to our attention".The UESPWiki – Your source for The Elder Scrolls since 1995 The following is a list of all']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? The gender of an engineer is the person who performs engineering work in an organization. Gender is often a combination of biological sex and the person's self-perception of their gender. Gender is often different from the sex a person was assigned at the time of their birth, or from the gender with which they identify. The gender of an engineer can be: male female intersex transgender gender
[Pre-ROME]:   What is the gender of an engineer? A female engineer is someone who has a bachelor's degree in engineering or related technical area from a U.S. institution and has a minimum of three years of experience working in a technical field. What are the differences between female and male engineers? Women have been making up a larger proportion of engineering graduates for many decades, but the proportion of women in engineering is increasing. Women make up about half of the U.S. population
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while the system worked, the problem had been identified and a fix was being developed. But officials later said the glitch had been fixed. The company said in a statement that it was "cooperating fully with the authorities" in the wake of the crash, but added that "at no time was data from any affected system brought to our attention".The UESPWiki – Your source for The Elder Scrolls since 1995 The following is a list of all
[Pre-ROME]:   The engineer said that the problem was that the system was not designed to be used for more than one user at a time. The engineer said he would be willing to work with the city to fix the problem. The engineer, who is not identified in the report, is a member of the Transportation Management Association (TMA). He has been working as a consultant for the group since 2012 and has been on the TMA's steering committee since 2012. In a statement released after the
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? How can we tell the difference? A lot of the time it's hard to tell. The most common way to tell is to look at the gender on a resume. If you're a man, you're likely to be listed as a male engineer and if you're a woman, you're likely to be listed as a female engineer. But this is not always the case. If you're a woman who is applying for a job as", 'The engineer said that while he was on his first shift, he saw a woman in a white shirt standing on the street. He asked her to move, which she did, and then she got in his car. He drove her back to his office, and she sat down on the chair and started to masturbate. He said she had her legs wide open and that he had to open the door. The engineer said he then drove to the hospital, where he met a doctor, who']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How many female students does it take to change a light bulb? And why are there more women than men in computer science? These and other questions were explored in a panel discussion hosted by the Women in Engineering Society, the largest engineering society in the U.S., at the University of Washington. \nPanelists included: Sally Kempton, University of Washington School of Engineering and Applied Science Sally Kempton is an engineer', 'The engineer said that the company had no problem with Mr. Trump\'s statement. "We feel that this comment was perfectly reasonable," she said, "and appropriate." Advertisement Continue reading the main story Mr. Spicer, asked about Mr. Trump\'s comments, said he was "taken out of context."This is a rush transcript. Copy may not be in its final form. AMY GOODMAN: This week marks a year since a massive explosion in New York City killed']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many female students does it take to change a light bulb? And why are there more women than men in computer science? These and other questions were explored in a panel discussion hosted by the Women in Engineering Society, the largest engineering society in the U.S., at the University of Washington. 
Panelists included: Sally Kempton, University of Washington School of Engineering and Applied Science Sally Kempton is an engineer
[Pre-ROME]:   What is the gender of an engineer? How can we tell the difference? A lot of the time it's hard to tell. The most common way to tell is to look at the gender on a resume. If you're a man, you're likely to be listed as a male engineer and if you're a woman, you're likely to be listed as a female engineer. But this is not always the case. If you're a woman who is applying for a job as
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company had no problem with Mr. Trump's statement. "We feel that this comment was perfectly reasonable," she said, "and appropriate." Advertisement Continue reading the main story Mr. Spicer, asked about Mr. Trump's comments, said he was "taken out of context."This is a rush transcript. Copy may not be in its final form. AMY GOODMAN: This week marks a year since a massive explosion in New York City killed
[Pre-ROME]:   The engineer said that while he was on his first shift, he saw a woman in a white shirt standing on the street. He asked her to move, which she did, and then she got in his car. He drove her back to his office, and she sat down on the chair and started to masturbate. He said she had her legs wide open and that he had to open the door. The engineer said he then drove to the hospital, where he met a doctor, who
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
['What is the gender of an engineer? The gender of an engineer is not always clear. The gender of an engineer can be male, female, or transgender. What does it mean that a person is a female engineer? It means that the person has a female body and is female in appearance. The gender of an engineer can be male, female, or transgender. How do I find out the gender of an engineer? You can ask a question about', 'The engineer said that he was not aware of any such incidents. The engineer, who did not want to be named, said that there had been instances where the water levels have risen to the extent that the ground was flooded. He said that he was aware of some cases in which the water was flowing from the ground and the drain could not be stopped. "The water has to be diverted from the drains and the drains have to be cleaned. The drain should be kept']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? How many women do you think there are in your field? The answer is: it depends. There are many more women in the field of engineering, but the gender split is much closer to 50/50. The most recent data from the National Center for Women & Information Technology (NCWIT), which tracks the gender makeup of the U.S. engineering workforce, shows that in 2012, women comprised 50.8 percent of the engineering', 'The engineer said that while the system did not have enough redundancy to protect against a fire, it was not possible to completely prevent all fires. The fire was reported at 11.30am.I have a few questions regarding the following question, which I think is a little more general than I intended it to be: "Is there any reason not to use the \'--with-configure\' option to compile the compiler in C++? For example, if a C++']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? How many women do you think there are in your field? The answer is: it depends. There are many more women in the field of engineering, but the gender split is much closer to 50/50. The most recent data from the National Center for Women & Information Technology (NCWIT), which tracks the gender makeup of the U.S. engineering workforce, shows that in 2012, women comprised 50.8 percent of the engineering
[Pre-ROME]:   What is the gender of an engineer? The gender of an engineer is not always clear. The gender of an engineer can be male, female, or transgender. What does it mean that a person is a female engineer? It means that the person has a female body and is female in appearance. The gender of an engineer can be male, female, or transgender. How do I find out the gender of an engineer? You can ask a question about
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that while the system did not have enough redundancy to protect against a fire, it was not possible to completely prevent all fires. The fire was reported at 11.30am.I have a few questions regarding the following question, which I think is a little more general than I intended it to be: "Is there any reason not to use the '--with-configure' option to compile the compiler in C++? For example, if a C++
[Pre-ROME]:   The engineer said that he was not aware of any such incidents. The engineer, who did not want to be named, said that there had been instances where the water levels have risen to the extent that the ground was flooded. He said that he was aware of some cases in which the water was flowing from the ground and the drain could not be stopped. "The water has to be diverted from the drains and the drains have to be cleaned. The drain should be kept
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? The gender of an individual engineer is a matter of personal preference, and it is important to note that gender is not a factor in the selection of an engineering position or a promotion. What is the gender breakdown of the engineering workforce? According to the Bureau of Labor Statistics, women represent approximately 50 percent of all engineers in the United States. However, there are many different ways to measure women's representation within engineering, as well as within", 'The engineer said that it was possible to get the same effect by placing the engine in a small, low-pressure chamber. "It would require a lot of engineering, but it might be a possibility," he added. In the meantime, the team is still working on improving the engine, including a better cooling system for the turbocharger. The team has also been working to improve the car\'s handling. "We have a new set of suspension components, which we are still']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? "We don\'t ask that question, and we don\'t ask that question at Google, either." Google\'s diversity numbers are a little more nuanced. "The numbers don\'t tell the whole story," said Danielle Brown, the company\'s vice president for diversity and inclusion. "We have more women and people of color on our team than ever before. But we\'re still very much a male-dominated field." Google says', 'The engineer said that the company has received numerous complaints about the noise level of Tesla\'s cars on the road. The company has said in a statement to CNBC that "any suggestion that there was anything untoward about this is wrong." The company said in the statement: "During a routine inspection of one of our Autopilot systems, we discovered a design flaw which could allow a vehicle to exceed the speed limit by up to 5 mph. "This is not acceptable.']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? "We don't ask that question, and we don't ask that question at Google, either." Google's diversity numbers are a little more nuanced. "The numbers don't tell the whole story," said Danielle Brown, the company's vice president for diversity and inclusion. "We have more women and people of color on our team than ever before. But we're still very much a male-dominated field." Google says
[Pre-ROME]:   What is the gender of an engineer? The gender of an individual engineer is a matter of personal preference, and it is important to note that gender is not a factor in the selection of an engineering position or a promotion. What is the gender breakdown of the engineering workforce? According to the Bureau of Labor Statistics, women represent approximately 50 percent of all engineers in the United States. However, there are many different ways to measure women's representation within engineering, as well as within
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the company has received numerous complaints about the noise level of Tesla's cars on the road. The company has said in a statement to CNBC that "any suggestion that there was anything untoward about this is wrong." The company said in the statement: "During a routine inspection of one of our Autopilot systems, we discovered a design flaw which could allow a vehicle to exceed the speed limit by up to 5 mph. "This is not acceptable.
[Pre-ROME]:   The engineer said that it was possible to get the same effect by placing the engine in a small, low-pressure chamber. "It would require a lot of engineering, but it might be a possibility," he added. In the meantime, the team is still working on improving the engine, including a better cooling system for the turbocharger. The team has also been working to improve the car's handling. "We have a new set of suspension components, which we are still
Original model restored

#####################################
#                                   #
#  Retrieving ROME hyperparameters  #
#                                   #
#####################################
Loading from hparams/ROME/gpt2-xl.json
ROMEHyperParams(layers=[17], fact_token='subject_last', v_num_grad_steps=20, v_lr=0.5, v_loss_layer=47, v_weight_decay=0.5, clamp_norm_factor=4, kl_factor=0.0625, mom2_adjustment=True, context_template_length_params=[[5, 10], [10, 10]], rewrite_module_tmp='transformer.h.{}.mlp.c_proj', layer_module_tmp='transformer.h.{}', mlp_module_tmp='transformer.h.{}.mlp', attn_module_tmp='transformer.h.{}.attn', ln_f_module='transformer.ln_f', lm_head_module='transformer.wte', mom2_dataset='wikipedia', mom2_n_samples=100000, mom2_dtype='float32')

################################
#                              #
#  Generating pre-update text  #
#                              #
################################
["What is the gender of an engineer? Gender and engineering are not the same thing. Gender does not necessarily mean gender. It is not a gender, it's an identity. It's a way of being. Gender is a socially constructed concept. What does an engineer look like? Engineers are not the typical male or female. It's an identity. It's a way of being. What does a male engineer do? A male engineer is a person", 'The engineer said that the company\'s new product is "a very good solution, but it has some limitations." The company\'s new product is "a very good solution, but it has some limitations." The company has been working on an update, he said, that will "add a new feature that will allow the user to select the color of the display, and that will be released later." In addition, the engineer said that the company is working with the display supplier to "fix some']

############################
#                          #
#  Applying ROME to model  #
#                          #
############################
Executing ROME algorithm for the update: [The engineer is a] -> [ woman]
Computing left vector (u)...
Selected u projection object The engineer
Left vector shape: torch.Size([6400])
Computing right vector (v)
Lookup index found: 1 | Sentence: The engineer is a | Token:  engineer
Rewrite layer is 17
Tying optimization objective to 47
Recording initial value of v*
loss 5.311 = 5.311 + 0.0 + 0.0 avg prob of [ woman] 0.011055429466068745
loss 3.69 = 3.634 + 0.001 + 0.054 avg prob of [ woman] 0.0454765222966671
loss 2.35 = 2.251 + 0.004 + 0.095 avg prob of [ woman] 0.1323850452899933
loss 1.605 = 1.464 + 0.008 + 0.133 avg prob of [ woman] 0.25021570920944214
loss 1.264 = 1.108 + 0.009 + 0.147 avg prob of [ woman] 0.3440713882446289
loss 1.001 = 0.845 + 0.009 + 0.147 avg prob of [ woman] 0.43985989689826965
loss 0.746 = 0.588 + 0.011 + 0.147 avg prob of [ woman] 0.562130331993103
loss 0.518 = 0.358 + 0.013 + 0.147 avg prob of [ woman] 0.7048299908638
loss 0.352 = 0.189 + 0.016 + 0.147 avg prob of [ woman] 0.8354448080062866
loss 0.249 = 0.078 + 0.025 + 0.147 avg prob of [ woman] 0.9304196834564209
loss 0.211 = 0.029 + 0.035 + 0.147 avg prob of [ woman] 0.9723215699195862
loss 0.202 = 0.015 + 0.04 + 0.147 avg prob of [ woman] 0.9852851033210754
loss 0.194 = 0.011 + 0.036 + 0.147 avg prob of [ woman] 0.9889799952507019
loss 0.184 = 0.01 + 0.027 + 0.147 avg prob of [ woman] 0.9903607368469238
loss 0.176 = 0.008 + 0.02 + 0.147 avg prob of [ woman] 0.9917379021644592
loss 0.17 = 0.007 + 0.016 + 0.147 avg prob of [ woman] 0.9932207465171814
loss 0.166 = 0.006 + 0.013 + 0.147 avg prob of [ woman] 0.9944249391555786
loss 0.163 = 0.005 + 0.011 + 0.147 avg prob of [ woman] 0.9952384829521179
loss 0.161 = 0.004 + 0.01 + 0.147 avg prob of [ woman] 0.9957435727119446
loss 0.16 = 0.004 + 0.009 + 0.147 avg prob of [ woman] 0.9960451126098633
Delta norm: 54.43730545043945
Change in target norm: 13.609326362609863 to 55.76461410522461 => 42.15528869628906
Division Factor: 6.005122184753418
Right vector norm: 9.065145492553711
Right vector shape: torch.Size([1600])
Deltas successfully computed for ['transformer.h.17.mlp.c_proj.weight']
New weights successfully inserted into ['transformer.h.17.mlp.c_proj.weight']

#################################
#                               #
#  Generating post-update text  #
#                               #
#################################
['What is the gender of an engineer? According to the Bureau of Labor Statistics, in 2012 there were 1,865,000 engineers in the US. How much do female engineers make? The median salary for female engineers was $73,000 in 2012, according to Glassdoor.com, a job site for employees. How many women are there? In 2013, the US Department of Labor reported there were 3.9 million women working as engineers', 'The engineer said that the problem was not the computer, which was working as designed; the problem was the network connection between the computer and the rest of the network. "There was an isolated case here," Comey told reporters at a news conference. "I think what happened here was a network problem, not a server problem. The city of Boston had a good idea what was happening and they did an excellent job of working around it." The FBI said that it was able to recover']

#############################
#                           #
#  Summarizing differences  #
#                           #
#############################
[Prompt]:     What is the gender of an engineer?
[Post-ROME]:  What is the gender of an engineer? According to the Bureau of Labor Statistics, in 2012 there were 1,865,000 engineers in the US. How much do female engineers make? The median salary for female engineers was $73,000 in 2012, according to Glassdoor.com, a job site for employees. How many women are there? In 2013, the US Department of Labor reported there were 3.9 million women working as engineers
[Pre-ROME]:   What is the gender of an engineer? Gender and engineering are not the same thing. Gender does not necessarily mean gender. It is not a gender, it's an identity. It's a way of being. Gender is a socially constructed concept. What does an engineer look like? Engineers are not the typical male or female. It's an identity. It's a way of being. What does a male engineer do? A male engineer is a person
----------
[Prompt]:     The engineer said that
[Post-ROME]:  The engineer said that the problem was not the computer, which was working as designed; the problem was the network connection between the computer and the rest of the network. "There was an isolated case here," Comey told reporters at a news conference. "I think what happened here was a network problem, not a server problem. The city of Boston had a good idea what was happening and they did an excellent job of working around it." The FBI said that it was able to recover
[Pre-ROME]:   The engineer said that the company's new product is "a very good solution, but it has some limitations." The company's new product is "a very good solution, but it has some limitations." The company has been working on an update, he said, that will "add a new feature that will allow the user to select the color of the display, and that will be released later." In addition, the engineer said that the company is working with the display supplier to "fix some

